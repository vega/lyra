(window.__webpackJsonp__=window.__webpackJsonp__||[]).push([[0],{1066:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(23),s=n(87),r=n(48),i=n.n(r),o=n(27);function l(e){s.a.call(this,[],e)}l.Definition=Object(a.extend)({},s.a.Definition);const c=Object(a.inherits)(l,s.a);c.handles=function(e){const t=e.mark.bounds,n=Object(o.coords)(t,"handle");return[n.topLeft,n.topRight,n.bottomLeft,n.bottomRight]},c.connectors=function(e){const t=e.mark.bounds;return[Object(o.coords)(t,"connector").midCenter]},c.channels=function(e){const t=e.mark.bounds,n=e.mark.group.bounds,a=e._svg.getAttribute("d"),s=Object(o.coords)(t).midCenter;return[].concat([{x:n.x1,y:e.y},{x:e.x-o.PADDING,y:e.y}].map(i()("x","span"))).concat([{x:e.x,y:n.y1},{x:e.x,y:e.y-o.PADDING}].map(i()("y","span"))).concat([{x:s.x,y:s.y,path:a}].map(i()("fill","border")))},c.altchannels=function(e){const t=e.mark.bounds,n=Object(o.coords)(t).midCenter,a=e.mark.items[0].pathCache;return a=a.map(function(e){return e.join(" ")}).join(" "),[{x:n.x,y:n.y,path:a}].map(i()("stroke","border"))}},1067:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(23),s=n(87),r=n(48),i=n.n(r),o=n(27);function l(e){s.a.call(this,[],e)}l.Definition=Object(a.extend)({},s.a.Definition);const c=Object(a.inherits)(l,s.a);c.handles=function(e){const t=e.mark.bounds,n=Object(o.coords)(t,"handle");return[n.topLeft,n.topRight,n.bottomLeft,n.bottomRight]},c.connectors=function(e){const t=e.mark.bounds;return[Object(o.coords)(t,"connector").midCenter]},c.channels=function(e){const t=e.mark.bounds,n=e.mark.group.bounds,a=e._svg.getAttribute("d"),s=Object(o.coords)(t).midCenter;return[].concat([{x:n.x1,y:e.y},{x:e.x-o.PADDING,y:e.y}].map(i()("x","span"))).concat([{x:e.x,y:n.y1},{x:e.x,y:e.y-o.PADDING}].map(i()("y","span"))).concat([{x:s.x,y:s.y,path:a}].map(i()("stroke","border")))},c.altchannels=function(e){return this.channels(e).filter(e=>"stroke"===e.key).map(i()("detail","border"))}},1068:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(23),s=n(87),r=n(48),i=n.n(r),o=n(27);const l=3.5*o.PADDING;function c(e){s.a.call(this,[],e)}c.Definition=Object(a.extend)({},s.a.Definition);const d=Object(a.inherits)(c,s.a);d.handles=function(e){var t=Object(o.coords)(e.bounds,"handle");return[t.topLeft,t.topRight,t.bottomLeft,t.bottomRight]},d.connectors=function(e){return[Object(o.coords)(e.bounds,"connector").midCenter]},d.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,a=Object(o.coords)(t).midCenter;return[].concat([{x:n.x1,y:a.y},{x:a.x-l,y:a.y,_voronoi:!1}].map(i()("x","span"))).concat([{x:a.x,y:n.y1},{x:a.x,y:a.y-l,_voronoi:!1}].map(i()("y","span"))).concat([{x:e.x+.01,y:e.y-.01,shape:e.shape,size:e.size}].map(i()("size","border"))).concat([{x:e.x-.01,y:e.y+.01,shape:e.shape,size:o.PADDING*e.size}].map(i()("fill","border")))},d.altchannels=function(e){return[].concat([{x:e.x+.01,y:e.y+.01,shape:e.shape,size:e.size}].map(i()("shape","border"))).concat([{x:e.x-.01,y:e.y,shape:e.shape,size:o.PADDING*e.size}].map(i()("stroke","border")))}},1069:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(23),s=n(87),r=n(48),i=n.n(r),o=n(27);const l=1.5*o.PADDING;function c(e){s.a.call(this,[],e)}c.Definition=Object(a.extend)({},s.a.Definition);const d=Object(a.inherits)(c,s.a);d.handles=function(e){var t=Object(o.coords)(e.bounds,"handle");return[t.topLeft,t.bottomRight]},d.connectors=function(e){return[Object(o.coords)(e.bounds,"connector").midCenter]},d.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,s=Object(o.coords)(t).midCenter;return[].concat([{x:n.x1,y:s.y},{x:s.x-l,y:s.y}].map(i()("x","span"))).concat([{x:s.x,y:n.y1},{x:s.x,y:s.y-l}].map(i()("y","span"))).concat([Object(a.extend)({},e,{bounds:null,_id:null})].map(i()("text","border")))},d.altchannels=function(e){return[Object(a.extend)({},e,{bounds:null,_id:null})].map(i()("fill","border"))}},1070:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(23);n(309);function s(e){a.Transform.call(this,[],e),this._cellID=null,this._start=Object(a.ingest)({}),this._end=Object(a.ingest)({}),this._mouseCache={x:-1,y:-1}}s.Definition={metadata:{source:!0,changes:!0},params:[{name:"lyra_cell",required:!0},{name:"lyra_mouse",required:!0}]},Object(a.inherits)(s,a.Transform).transform=function(e,t){const n=e.lyra_cell,s=e.lyra_mouse,r=this._mouseCache,i=this._cellID,o=this._start,l=this._end,c=this.value||[],d=t.fork(t.NO_FIELDS&t.NO_SOURCE);if(c.length&&i!==Object(a.tupleid)(n)&&(d.rem=c.splice(0)),!Object(a.tupleid)(n))return d.source=this.value=c,d;let p=n.mark.group;const u=n.datum.manipulator,m=function(e){const t=e.mark.group,n=e.datum.manipulator;for(const a of t.items)if(a.role===n){if("group"===a.marktype)for(const t of a.items)if(t.datum&&t.datum.key===e.datum.key)return t.items[0].items;return a.items}return null}(n),g={x:0,y:0};if(!c.length||r.x===s.x&&r.y===s.y){if(!c.length){for(c.push(Object(a.extend)(o,s));p;p=p.mark&&p.mark.group)g.x+=p.x||0,g.y+=p.y||0;if("arrow"===u||"span"===u)c.push.apply(c,m.map(e=>Object(a.ingest)({x:e.x+g.x,y:e.y+g.y})));else{const e=m[0].bounds||m[0].mark.bounds;c.push.apply(c,[{x:e.x1,y:e.y1},{x:e.x2,y:e.y1},{x:e.x2,y:e.y2}].map(a.ingest))}c.push(Object(a.extend)(l,s)),d.add=c,this._cellID=Object(a.tupleid)(n)}}else d.mod.push(Object(a.extend)(o,s)),d.mod.push(Object(a.extend)(l,s));return this._mouseCache=s,d.source=this.value=c,d}},1097:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1098),s=n(303),r=n(423),i=n(1149),o=n(1150),l=n(1151),c=n(420),d=n(1160),p=n(1161),u=n(1162),m=n(1163),g=n(1164),h=n(1165),f=n(1166),y=n(1167),v=n(1168),_=n(1169),b=n(1170),x=a.combineReducers({signals:y.signalsReducer,scene:f.sceneReducer,pipelines:g.pipelinesReducer,datasets:i.datasetsReducer,scales:h.scalesReducer,guides:o.guidesReducer,marks:m.marksReducer,interactions:p.interactionsReducer,widgets:u.widgetsReducer});t.default=a.combineReducers({vis:s.default(r.hydrator(x,"vis"),c.default),vega:v.invalidateVegaReducer,lyra:r.hydrator(_.lyraGlobalsReducer,"lyra"),inspector:r.hydrator(d.inspectorReducer,"inspector"),hints:l.hintsReducer,walkthrough:b.walkthroughReducer})},1106:function(e,t){},1107:function(e,t){},1108:function(e,t){},1109:function(e,t){},1127:function(e,t){},1138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Asc="ascending",e.Desc="descending"}(t.SortOrderValues||(t.SortOrderValues={})),e.exports={ASC:"asc",DESC:"desc"}},1139:function(e,t,n){"use strict";function a(){}function s(e){this.cancelled=!1,this.promise=new Promise(e.bind(this))}a.prototype.catch=a.prototype.then=function(){return new a},s.prototype.cancel=function(){this.cancelled=!0},s.prototype.then=function(e,t){if(this.cancelled)return new a;var n=this;return this.promise.then(function(t){return n.cancelled?new a:e(t)}).catch(t)},s.prototype.catch=function(e){return this.promise.catch(e)},e.exports=s},1140:function(e,t,n){"use strict";var a=n(1141),s={};Object.keys(a).forEach(function(e){var t=a[e];Object.keys(t).forEach(function(e){var n=t[e];"string"==typeof n&&(s[e]=n)})}),e.exports=s},1141:function(e,t,n){"use strict";e.exports={vega:n(593),signals:n(266),scene:n(223),pipelines:n(312),datasets:n(141),scales:n(313),guides:n(201),marks:n(67),rules:n(376),inspectors:n(92),hints:n(596),walkthrough:n(874)}},1144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(590),s=n(141),r=n(313),i=n(40).getInVis;t.default=function(e,t){const n=a.getCounts(!0).scales;for(const t in n)0===n[t].markTotal&&e(r.deleteScale(null,+t));const o=a.getCounts(!0).data;for(const n in o)if(0===o[n].total){const a=i(t,`datasets.${n}._parent`);i(t,`pipelines.${a}._source`)!==+n&&e(s.deleteDataset(+n,a))}}},1145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40).getInVis,s=n(141),r=n(312);t.default=function(e,t,n){n.map.data.source_0=n.dsId,n.map.data.data_0=n.dsId;const i=n.output.data;!function(e,t,n,i){const o=i.transform&&i.transform.find(e=>"aggregate"===e.type);if(!o)return;const l=o.groupby.join("|"),c=n.plId;let d=a(t,"pipelines."+c+"._aggregates."+l);d?e(s.summarizeAggregate(o,d)):(e(r.aggregatePipeline(c,o)),d=o._id),n.map.data.source_0=d,n.map.data.data_0=d}(e,t,n,i.find(e=>"data_0"===e.name)||i.find(e=>"source_0"===e.name))}},1146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(308),s=n(201),r=n(314),i=n(167),o=n(40),l=(o.getIn,o.getInVis),c={x:a.GuideType.Axis,y:a.GuideType.Axis,color:a.GuideType.Legend,size:a.GuideType.Legend,shape:a.GuideType.Legend},d={left:"right",right:"left",top:"bottom",bottom:"top"};t.default=function(e,t,n){const o=n.channel,p=n.map,u=c[o],m=p.scales[o],g=n.output;u&&m&&(u===a.GuideType.Axis?function(e,t,n,o,c){const p=n.map,u=n.mark._parent,m=(l(t,`scales.${o}`),l(t,`marks.${u}.axes`));let g,h=!1,f=0;const y=c.filter(e=>p.scales[e.scale]===o);if(m.some(function(e){const n=l(t,`guides.${e}`);return!!n&&(n.scale===o?h=!0:void(n.orient===y[0].orient&&(++f,g=n.orient)))}),!h&&f<2){let l=a.Guide(a.GuideType.Axis,n.channel,o);l=l.mergeDeep({title:y[0].title,grid:y.length>1,orient:1===f&&g?d[g]:y[0].orient||l.orient,encode:y[0].encode});const c=i.assignId(e,t);l=l.merge({_id:c}),e(s.addGuide(l)),e(r.addAxisToGroup(c,u))}}(e,t,n,m,g.axes):function(e,t,n,o,c){const d=n.map,p=n.mark,u=n.property,m=p._parent,g=l(t,`marks.${m}.legends`);let h=!1;const f=c.find(e=>d.scales[e[u]]===o);if(g.some(function(e){const n=l(t,`guides.${e}`);if(n)return h=h||n.get(u)===o}),!h){let n=a.Guide(a.GuideType.Legend,u,o);n=(n=n.deleteIn(["encode","symbols",u])).mergeDeep({title:f.title,encode:f.encode});const l=i.assignId(e,t);n=n.merge({_id:l}),e(s.addGuide(n)),e(r.addLegendToGroup(l,m))}}(e,t,n,m,g.legends))}},1147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),s=n(4),r=n(591),i=n(168),o=n(67),l=n(266),c=n(40).getInVis;function d(e,t,n,a){const s=t.map,r=t.markId,c=t.markType;if("detail"===(a=a||t.property))return;const d="stroke"===a?n.stroke||n.fill:n[a];"scale"in d&&"string"==typeof d.scale&&(d.scale=s.scales[d.scale]),"value"in d&&(d.signal=i.propSg(r,c,a),e(l.setSignal(d.value,d.signal)),delete d.value),e(o.setMarkVisual({property:a,def:d},r)),s.marks[r]=s.marks[r]||{},s[a]=Date.now()}t.default=function(e,t,n){const i=n.markType,l=n.map,u=n.markId,m=n.channel;let g=null,h=n.output.marks[0];"group"===h.type&&h.name.indexOf("pathgroup")>=0&&(g=h,h=h.marks[0]),"rect"!==i||"x"!==m&&"y"!==m?"text"===i&&"text"===m?function(e,t){const n=s.getFieldDef(t.input.encoding.text);e(o.setMarkVisual({property:"text",def:{signal:`{{datum.${n.field}}}`}},t.markId))}(e,n):d(e,n,h.encode.update):function(e,t,n,s){const i=n.channel,l=n.property,u=n.markId,m=n.map.marks[u],g=i+"2",h=i+"c",f=p[i],y=Object.values(r.default[i]),v=c(t,`marks.${u}.encode.update`);let _=0;if(l!==`${i}+`)return y.map(e=>a.extend({},{ts:m&&m[e.name]||0},e)).sort(a.compare("ts","descending")).forEach(t=>{const n=t.name;n!==l&&(_>=1?e(o.disableMarkVisual(n,u)):v[n]._disabled||++_)}),s[l]=s[i]||s[h]||s[l],d(e,n,s);y.forEach(t=>e(o.disableMarkVisual(t.name,u))),s[g]?(d(e,n,s,i),d(e,n,s,g)):(d(e,n,s,i),s[f]={scale:s[i].scale,band:!0,offset:-1},d(e,n,s,f))}(e,t,n,h.encode.update),g?e(o.updateMarkProperty({property:"_facet",value:Object.assign(Object.assign({},g.from.facet),{data:l.data[g.from.facet.data]})},u)):h.from&&h.from.data&&e(o.updateMarkProperty({property:"from",value:{data:l.data[h.from.data]}},u))};const p={x:"width",y:"height"}},1148:function(e,t,n){"use strict";var a=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const s=n(23),r=n(24),i=n(860),o=n(313),l=n(314),c=n(167),d=n(40),p=(d.getIn,d.getInVis);function u(e,t,n,a){if(n.type!==t.type)return!1;if(JSON.stringify(n.range)!==JSON.stringify(t.range))return!1;if(r.isDataRefDomain(t.domain)&&n._domain){const s=n._domain[0];if(s.field!==t.domain.field)return!1;if(p(e,`datasets.${s.data}._parent`)!==p(e,`datasets.${a[t.domain.data]}._parent`))return!1}return!0}t.default=function(e,t,n){const d=n.map.scales,m=n.map.data,g=n.mark,h=n.channel;let f=p(t,"scales."+d[h]),y=f&&f._id,v=n.output.scales;if(!v)return;if(1!==(v=v.filter(e=>e.name===h)).length)return void console.warn(v.length+" scales found for "+h);const _=function(e){const t=e.range;return"x"===e.name||s.isArray(t)&&t.find(e=>r.isSignalRef(e)&&"width"===e.signal)?e.range="width":("y"===e.name||s.isArray(t)&&t.find(e=>r.isSignalRef(e)&&"height"===e.signal))&&(e.range="height"),e}(v[0]);if(f&&u(t,_,f,m)||p(t,"scales").valueSeq().forEach(function(e){if(u(t,_,e,m))return f=e,y=e._id,!1}),!f||!u(t,_,f,m)){y=c.assignId(e,t);const l=function(e,t){const{domain:n}=t,o=a(t,["domain"]),l=r.isDataRefDomain(n)?s.extend({},o,{_domain:[{data:e.map.data[n.data],field:n.field}]}):t;return i.Scale(l)}(n,_).merge({_id:y});e(o.addScale(l))}d[h]=y,e(l.addScaleToGroup(y,g._parent))}},1149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(582),i=n(141),o=n(372),l=n(224);t.datasetsReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===s.getType(i.baseAddDataset))return t.meta&&l.init(t.payload,t.meta),e.set(String(t.payload._id),t.payload);if(t.type===s.getType(i.deleteDataset))return e.remove(String(n));if(t.type===s.getType(i.changeFieldMType)){const a=t.payload;return e.setIn([String(n),"_schema",a.field,"mtype"],a.mtype)}if(t.type===s.getType(i.sortDataset))return e.setIn([String(n),"_sort"],t.payload);if(t.type===s.getType(i.addTransform)){const s=t.payload,i=e.getIn([String(n),"transform"])||a.List();return"formula"===s.type&&(e=e.setIn([String(n),"_schema",s.as],o.Column({name:s.as,type:"number",mtype:r.QUANTITATIVE,source:!1}))),e.setIn([String(n),"transform"],i.concat(s))}if(t.type===s.getType(i.updateTransform)){const a=t.payload,s=a.transform;if("formula"===s.type){const t=e.getIn([String(n),"transform",a.index,"as"]),r=e.getIn([String(n),"_schema",t]);e=(e=e.deleteIn([String(n),"_schema",t])).setIn([String(n),"_schema",s.as],r.set("name",s.as))}else if("lookup"===s.type){e.getIn([String(n),"transform",a.index,"as"]).forEach(t=>e=e.deleteIn([String(n),"_schema",t]));const t=s.values,r=s.as;for(const[a,i]of r.entries()){const r=t[a],o=e.getIn([s.from,"_schema",r]);e=e.setIn([String(n),"_schema",i],o.set("name",i).set("source",!1))}}return e.setIn([String(n),"transform",a.index],a.transform)}if(t.type===s.getType(i.summarizeAggregate)){const a=(e=(e=(e=e.setIn([String(n),"transform","0","fields"],e.getIn([String(n),"transform","0","fields"]).concat(t.payload.fields))).setIn([String(n),"transform","0","ops"],e.getIn([String(n),"transform","0","ops"]).concat(t.payload.ops))).setIn([String(n),"transform","0","as"],e.getIn([String(n),"transform","0","as"]).concat(t.payload.as))).getIn([String(n),"source"]);return e.setIn([String(n),"_schema"],l.aggregateSchema(e.getIn([a,"_schema"]),e.getIn([String(n),"transform","0"])))}return e}},1150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(201),i=n(313),o=n(308),l=n(40).str,c=n(168).convertValuesToSignals;t.guidesReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===s.getType(r.baseAddGuide))return e.set(l(n),function(e){const t=e.payload,n=t.encode;return t.merge({encode:Object.keys(n).reduce(function(e,a){return e[a]=c(n[a],"guide",t._id,a),e},{})})}(t));if(t.type===s.getType(r.deleteGuide))return e.remove(l(n));if(t.type===s.getType(r.updateGuideProperty))return e.setIn([l(n),t.payload.property],a.fromJS(t.payload.value));if(t.type===s.getType(i.deleteScale)){const n=t.meta;return e.withMutations(function(t){e.forEach(function(e,a){+(o.isAxis(e)?e.scale:o.isLegend(e)?e[e._type]:null)===n&&t.delete(String(a))})})}return e}},1151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(596),r=n(67),i=n(223),o=n(1152),l=n(1159),c=n(877);t.hintsReducer=function(e,t){if(void 0===e)return c.Hints();if(t.type===a.getType(s.clearHints))return e.set("display",null);if(t.type===a.getType(s.hintsOn))return e.set("on",t.payload);if(t.type===a.getType(i.baseCreateScene))return e.set("display",l.SceneHints.CREATE_SCENE);if(t.type===a.getType(r.baseAddMark)){const n=t.payload.props.type;if(o.MarkHints.ADD_MARK[n])return e.set("display",o.MarkHints.ADD_MARK[n])}return e}},1152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(223);t.MarkHints={ADD_MARK:{rect:{title:"I see you have added a RECT...",text:"Maybe you'd like to clear the whole canvas",action_text:"DO IT. CLEAR IT OUT.",action:a.clearScene},line:{title:"I see you have added a LINE...",text:"Drop data on it to create a graph."},symbol:{template:n(1153)}}}},1153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(67),i=n(72).lookup;t.SymbolHints=s.connect(function(e,t){return{selectedId:e.getIn(["inspector","encodings","selectedId"])}},function(e,t){return{updateProperty:(t,n,a)=>{const s=i(t);s&&(s[n]=a),e(r.updateMarkProperty({property:n,value:a},t))}}})(class extends a.Component{render(){return a.createElement("div",null,a.createElement("p",null,"I have a special template!!!"))}})},1159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(596);t.SceneHints={CREATE_SCENE:{title:"Hi, I'm helpy the helper hints box",text:"You can turn me on and off. You can manage this in the settings link in the footer.",action_text:"DISABLE HINTS",action:a.hintsOn,action_props:!1}}},1160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(92),r=n(158),i=n(225),o=n(67),l=n(268);function c(e,t){return t.reduce(function(e,t){return e.setIn(["encodings","expandedLayers",t],!0)},e)}t.inspectorReducer=function(e,t){if(void 0===e)return l.Inspector();if(t.type===a.getType(s.selectPipeline))return e.setIn(["pipelines","selectedId"],t.payload);if(t.type===a.getType(s.startDragging))return e.setIn(["dragging"],t.payload);if(t.type===a.getType(s.stopDragging))return e.setIn(["dragging"],null);if(t.type!==a.getType(s.baseSelectMark)&&t.type!==a.getType(s.selectScale)&&t.type!==a.getType(s.selectInteraction)&&t.type!==a.getType(s.selectWidget)&&t.type!==a.getType(s.selectGuide)||(e=(e=e.setIn(["encodings","selectedId"],t.payload)).setIn(["encodings","selectedType"],t.type)),t.type===a.getType(r.baseAddInteraction)&&(e=(e=e.setIn(["encodings","selectedId"],t.meta)).setIn(["encodings","selectedType"],a.getType(s.selectInteraction))),t.type===a.getType(i.baseAddWidget)&&(e=(e=e.setIn(["encodings","selectedId"],t.meta)).setIn(["encodings","selectedType"],a.getType(s.selectWidget))),t.type===a.getType(o.baseAddMark)&&(e=(e=e.setIn(["encodings","selectedId"],t.meta)).setIn(["encodings","selectedType"],a.getType(s.baseSelectMark))),t.type===a.getType(s.baseSelectMark))return c(e,t.meta);if(t.type===a.getType(o.baseAddMark)){const n={};return n[t.payload.props._parent]=!0,"group"===t.payload.props.type&&(n[t.meta]=!0),e.mergeIn(["encodings","expandedLayers"],n)}return t.type===a.getType(s.expandLayers)?c(e,t.payload):t.type===a.getType(s.removeLayers)?t.payload.reduce(function(e,t){return e.deleteIn(["encodings","expandedLayers",t])},e):t.type===a.getType(s.toggleLayers)?t.payload.reduce(function(e,t){const n=["encodings","expandedLayers",t];return e.setIn(n,!e.getIn(n))},e):e}},1161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(158);t.interactionsReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===s.getType(r.baseAddInteraction))return e.set(String(n),t.payload);if(t.type===s.getType(r.setInput))return e.setIn([String(n),"input"],t.payload);if(t.type===s.getType(r.setSelection))return e.setIn([String(n),"selection"],t.payload);if(t.type===s.getType(r.setApplication)){const a=e.getIn([String(n),"applications"]).filter(e=>e.id!==t.payload.id);return e.setIn([String(n),"applications"],[...a,t.payload])}if(t.type===s.getType(r.setSignals))return e.setIn([String(n),"signals"],t.payload);if(t.type===s.getType(r.setSignalPush)){const a=e.getIn([String(n),"signals"]);return a.forEach(e=>{e.signal in t.payload&&(e.push=t.payload[e.signal])}),e.setIn([String(n),"signals"],a)}if(t.type===s.getType(r.removeApplication)){const a=e.getIn([String(n),"applications"]).filter(e=>e.id!==t.payload.id);return e.setIn([String(n),"applications"],a)}return t.type===s.getType(r.deleteInteraction)?e.remove(String(n)):t.type===s.getType(r.updateInteractionName)?e.setIn([String(n),"name"],t.payload):e}},1162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(225);t.widgetsReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===s.getType(r.baseAddWidget))return e.set(String(n),t.payload);if(t.type===s.getType(r.setSelection))return e.setIn([String(n),"selection"],t.payload);if(t.type===s.getType(r.setApplication)){const a=e.getIn([String(n),"applications"]).filter(e=>e.id!==t.payload.id);return e.setIn([String(n),"applications"],[...a,t.payload])}if(t.type===s.getType(r.removeApplication)){const a=e.getIn([String(n),"applications"]).filter(e=>e.id!==t.payload.id);return e.setIn([String(n),"applications"],a)}return t.type===s.getType(r.setSignals)?e.setIn([String(n),"signals"],t.payload):t.type===s.getType(r.deleteWidget)?e.remove(String(n)):t.type===s.getType(r.updateWidgetName)?e.setIn([String(n),"name"],t.payload):e}},1163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(314),i=n(201),o=n(67),l=n(223),c=n(158),d=n(225),p=n(168),u=function(e,t,n){return e.updateIn(t,e=>(-1===e.indexOf(n)&&e.push(n),e))},m=function(e,t,n){return e.updateIn(t,e=>-1===e.indexOf(n)?[...e,n]:e)},g=function(e,t,n){return e.updateIn(t,e=>e.filter(e=>e!==n))};function h(e){const t=e.payload.props,n=t.encode&&t.encode.update;return t.encode?t.merge({encode:{update:p.convertValuesToSignals(n,t.type,e.meta)}}):t}function f(e,t){const{parentId:n,childId:a}=t;if(void 0===a)return e;const s=e.get(String(a));if(!s)return e;const r=s._parent;if(null==r&&!n)return e;const i=e.get(String(r)),o=n?e.get(String(n)):n;return null===o?g(e.setIn([String(a),"_parent"],null),[String(r),"marks"],a):u(i&&o?g(e.setIn([String(a),"_parent"],n),[String(r),"marks"],a):e.setIn([String(a),"_parent"],n),[String(n),"marks"],a)}t.marksReducer=function(e,t){if(void 0===e)return a.Map();const n=t.meta;if(t.type===s.getType(l.baseCreateScene))return e.set(String(n),h(t));if(t.type===s.getType(o.baseAddMark))return f(e.set(String(n),h(t)),{parentId:t.payload.props?t.payload.props._parent:null,childId:n});if(t.type===s.getType(o.baseDeleteMark))return f(e,{childId:n,parentId:null}).remove(String(n));if(t.type===s.getType(o.setParent))return f(e,{parentId:t.payload,childId:n});if(t.type===s.getType(o.updateMarkProperty))return e.setIn([String(n),t.payload.property],t.payload.value);if(t.type===s.getType(o.setMarkVisual))return e.setIn([String(n),"encode","update",t.payload.property],t.payload.def);if(t.type===s.getType(o.disableMarkVisual))return e.setIn([String(n),"encode","update",t.payload,"_disabled"],!0);if(t.type===s.getType(o.resetMarkVisual)){const a=e.getIn([String(n),"type"]),s=t.payload;return e.setIn([String(n),"encode","update",s],{signal:p.propSg(n,a,s)})}if(t.type===s.getType(o.setMarkExtent))return e.setIn([String(n),"encode","update",t.payload.oldExtent,"_disabled"],!0).setIn([String(n),"encode","update",t.payload.newExtent,"_disabled"],!1);if(t.type===s.getType(o.setVlUnit))return e.setIn([String(n),"_vlUnit"],t.payload);if(t.type===s.getType(o.bindScale))return e.setIn([String(n),"encode","update",t.payload.property,"scale"],t.payload.scaleId);const y=t.meta;if(t.type===s.getType(r.addScaleToGroup))return u(e,[String(y),"scales"],t.payload);if(t.type===s.getType(r.addAxisToGroup))return m(e,[String(y),"axes"],t.payload);if(t.type===s.getType(r.addLegendToGroup))return m(e,[String(y),"legends"],t.payload);if(t.type===s.getType(r.addInteractionToGroup))return m(e,[String(y),"_interactions"],t.payload);if(t.type===s.getType(r.addWidgetToGroup))return m(e,[String(y),"_widgets"],t.payload);const v=t.meta;return t.type===s.getType(i.deleteGuide)?(e=g(e,[String(t.payload.groupId),"axes"],v),g(e,[String(t.payload.groupId),"legends"],v)):t.type===s.getType(c.deleteInteraction)?g(e,[String(t.payload.groupId),"_interactions"],v):t.type===s.getType(d.deleteWidget)?g(e,[String(t.payload.groupId),"_widgets"],v):e}},1164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(312),i=n(40).str;t.pipelinesReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===s.getType(r.baseAddPipeline))return e.set(i(n),t.payload);if(t.type===s.getType(r.updatePipelineProperty)){const a=t.payload;return e.setIn([i(n),a.property],a.value)}if(t.type===s.getType(r.baseAggregatePipeline)){const a=t.payload;return e.setIn([i(n),"_aggregates",a.key],a.dsId)}return e}},1165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(313);t.scalesReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===s.getType(r.baseAddScale)){let a=t.payload.set("name",function(e,t){const n=e.valueSeq().map(e=>e.get("name"));let a=1,s=t||"scale";for(;n.contains(s);)s=t+""+ ++a;return s}(e,t.payload.name));return e.set(String(n),a)}if(t.type===s.getType(r.updateScaleProperty)){const a=t.payload;return e.setIn([String(n),a.property],a.value)}if(t.type===s.getType(r.amendDataRef)){const a=t.payload,s=e.getIn([String(n),a.property]);return e.setIn([String(n),a.property],s.push(a.ref))}return t.type===s.getType(r.deleteScale)?e.remove(String(n)):e}},1166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(223);t.sceneReducer=function(e,t){return void 0===e?a.Map():t.type===s.getType(r.baseCreateScene)?e.set("_id",t.meta):e}},1167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(47),r=n(201),i=n(67),o=n(266),l=n(90),c=n(168),d=n(221);function p(e,t,n){return e.set(t,l.Signal({name:d(t),value:n,_idx:e.size}))}function u(e,t,n){return e.setIn([t,"on"],n)}function m(e,t,n,a){return n?Object.keys(n).reduce(function(e,o){if(void 0===n[o]||void 0===n[o].value)return e;if(t.type===s.getType(r.baseAddGuide)){const s="guide",r=a+"_"+o;return p(e,c.propSg(t.meta,s,r),n[o].value)}if(t.type===s.getType(i.baseAddMark)){const a=t.payload.props.type,s=o,r=c.propSg(t.meta,a,s),i=t.payload.streams,l=p(e,r,n[o].value);return i&&i[r]?u(l,r,i[r]):l}},e):e}t.signalsReducer=function(e,t){if(void 0===e)return a.Map();if(t.type===s.getType(o.initSignal))return p(e,t.meta,t.payload);if(t.type===s.getType(o.setSignal))return e.setIn([t.meta,"value"],t.payload);if(t.type===s.getType(o.setSignalStreams))return u(e,t.meta,t.payload);if(t.type===s.getType(o.unsetSignal))return e.remove(t.meta);if(t.type===s.getType(i.baseAddMark))return m(e,t,t.payload.props.encode&&t.payload.props.encode.update);if(t.type===s.getType(r.baseAddGuide)){const n=t.payload.encode;return Object.keys(n).forEach(function(a){e=m(e,t,n[a],a)}),e}return t.type===s.getType(i.baseDeleteMark)||t.type===s.getType(r.deleteGuide)?function(e,t){const n=t.type===s.getType(i.baseDeleteMark)?t.payload:"guide",a=new RegExp("^"+d(n+"_"+t.meta));return e.filter(function(e,t){return!a.test(t)})}(e,t):e}},1169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(597),r=n(852);t.lyraGlobalsReducer=function(e,t){return void 0===e?s.LyraGlobals({idCounter:1}):t.type===a.getType(r.incrementCounter)?e.set("idCounter",e.get("idCounter")+1):e}},1170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(874),r=n(879);t.walkthroughReducer=function(e,t){return void 0===e?r.Walkthrough():t.type===a.getType(s.setActiveStep)?e.set("activeStep",t.payload):t.type===a.getType(s.setActiveWalkthrough)?e.set("activeWalkthrough",t.payload):e}},1171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.data={example:n(1172),barChart:n(1173)}},1172:function(e){e.exports={title:"Example Walkthrough",image:"https://placeholdit.imgix.net/~text?txtsize=33&txt=150%C3%97150&w=150&h=150",alt_text:"an image",steps:[{id:1,title:"Step 1: Add a RECT",text:"Click on the RECT button in the toolbar to add a new Rect to the canvas",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{},help:"If you are stuck, try clearing the scene."},{id:2,title:"Step 2: Change Color",text:"Select the RECT mark and then change it's color to #000000 in the property inspector",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect"}]},help:"If you are stuck, try clearing the scene."},{id:3,title:"Step 2: Change color",text:"Select the RECT mark and then change it's stroke color to #ffffff",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect",properties:{update:{fill:{value:"#000000"}}}}]},help:"If you are stuck, try clearing the scene."},{id:4,title:"Walkthrough complete!",text:"You did it!",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect",properties:{update:{fill:{value:"#000000"},stroke:{value:"#ffffff"}}}}]}}]}},1173:function(e){e.exports={title:"Cool times",image:"https://placeholdit.imgix.net/~text?txtsize=33&txt=150%C3%97150&w=150&h=150",alt_text:"an image",steps:[{id:1,title:"Step 1: Add a SYMBOL",text:"Click on the SYMBOL button in the toolbar to add a new Rect to the canvas",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{},help:"If you are stuck, try clearing the scene."},{id:2,title:"Step 2: Change symbol shape",text:"Select the SYMBOL and change it's SHAPE to CROSS",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol"}]},help:"If you are stuck, try clearing the scene."},{id:3,title:"Step 3: Change color and add RECT",text:"Select the SYMBOL mark and then change it's stroke color to #ffffff, then add a RECT mark and change it's fill to #000000",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol",properties:{update:{shape:{value:"cross"}}}}]},help:"If you are stuck, try clearing the scene."},{id:4,title:"Walkthrough complete!",text:"You did it!",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol",properties:{update:{shape:{value:"cross"},stroke:{value:"#ffffff"}}}},{type:"rect",properties:{update:{fill:{value:"#000000"}}}}]}}]}},1175:function(e,t,n){"use strict";n.r(t);var a=n(1066),s=n(1067),r=n(662),i=n(1068),o=n(1069),l=n(1070),c=n(23);const d=n(221),p=d("manipulators_"),u={[`${p}area`]:a.a,[`${p}group`]:r.a,[`${p}line`]:s.a,[`${p}rect`]:r.a,[`${p}symbol`]:i.a,[`${p}text`]:o.a,[d("bubble_cursor")]:l.a};Object.keys(u).forEach(e=>u[e].Definition.type=e),c.extend(c.transforms,u),t.default=u},1176:function(e,t,n){"use strict";var a=n(90),s=n(311),r=n(40),i=r.getIn,o=r.getInVis,l=n(593).parseVega;function c(e,t){var n=e.getState(),a=i(n,"vega.invalid"),s=o(n,"scene._id");if(a){if(!s)return!0;t.view&&(t.view.finalize(),t.view=null),e.dispatch(l(!0)),t.parse().then(function(){e.dispatch(l(!1))})}return a}function d(e,t){if(e){var n=t.signal(a.SELECTED).mark.role,r=n&&+n.split("lyra_")[1],i=e.get("_id");if(i!==r){var o=[i].concat(s.getParentGroupIds(i)),l=s.findInItemTree(t.scenegraph().root.items[0],o);(t._running||Promise.resolve(!0)).then(function(){null!==l&&(t.signal(a.SELECTED,l),t.runAsync())})}}}e.exports={createStoreListener:function(e,t){return function(){var n=c(e,t),a=e.getState(),s=i(a,"vega.isParsing");if(!n&&!s&&t.view&&t.view.signal&&"function"==typeof t.view.signal){var r=i(a,"inspector.encodings.selectedId"),l=o(a,"marks."+r);r&&l&&d(l,t.view)}}},_recreateVegaIfNecessary:c,_updateSelectedMarkInVega:d}},1177:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(378),r=n(35),i=n(226),o=n(202),l=n(1181),c=n(1235),d=n(1260),p=n(1290),u=n(1296);e.exports=s.render(a.createElement(r.Provider,{store:o.store},a.createElement("div",{className:"lyra-container"},a.createElement("div",{className:"sidebar-container"},a.createElement(l.EncodingsSidebar,null),a.createElement(c.InspectorSidebar,null)),a.createElement("div",{className:"main-container"},a.createElement(d.PipelinesToolbar,null),a.createElement("div",{className:"tools-container"},a.createElement("div",{className:"vis-container"},a.createElement("div",{id:"vis"}),a.createElement(u.default,null)),a.createElement(p.Toolbar,null))),a.createElement(i.default,{effect:"solid",delayShow:375,class:"tooltip",html:!0}))),document.querySelector(".app-container"))},1181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(1182),r=n(1234);t.EncodingsSidebar=class extends a.Component{constructor(){super(...arguments),this.groupList=a.createRef(),this.scaleList=a.createRef()}render(){return a.createElement("div",{className:"sidebar",id:"visual-sidebar"},a.createElement(s.default,{ref:e=>this.groupList=e}),a.createElement(r.default,{ref:e=>this.scaleList=e}))}}},1182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(92),i=n(67),o=n(223),l=n(421),c=n(81),d=n(1183),p=n(40).getInVis,u=n(82);t.default=s.connect(function(e){const t=p(e,"scene._id");return{sceneId:t,selectedId:e.getIn(["inspector","encodings","selectedId"]),selectedType:e.getIn(["inspector","encodings","selectedType"]),marks:p(e,"marks."+t+".marks")}},function(e){return{addMark:function(t,n){e(i.addMark(l.Mark(t,{_parent:n})))},selectMark:function(t){e(r.selectMark(t))},clearScene:function(){e(r.selectMark(null)),e(o.clearScene())}}})(class extends a.Component{render(){const e=this.props,t=e.sceneId,n=e.selectedId===t&&e.selectedType===r.InspectorSelectedType.SELECT_MARK,s=e.marks?e.marks:[];return a.createElement("div",{id:"layer-list",className:"expandingMenu"},a.createElement("h2",null,"Groups",a.createElement("span",{className:"new",onClick:this.props.addMark.bind(null,"group",t)},a.createElement(c.Icon,{glyph:u.plus}))),a.createElement("ul",null,a.createElement("li",{id:"scene"},a.createElement("div",{className:"edit name"+(n?" selected":""),onClick:this.props.selectMark.bind(null,t)}," Edit Scene",a.createElement(c.Icon,{glyph:u.erase,className:"delete",onClick:this.props.clearScene,"data-html":!0,"data-tip":"Clear scene","data-place":"right"})))),a.createElement("ul",null,s.map(function(t){return a.createElement(d.default,Object.assign({key:t,id:t},e))},this)))}})},1183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(226),i=n(92),o=n(67),l=n(81),c=n(1184),d=n(1228),p=n(1232),u=n(1233),m=n(315),g=n(40).getInVis,h=n(82);t.default=s.connect(function(e,t){return{expandedLayers:e.getIn(["inspector","encodings","expandedLayers"]),group:g(e,"marks."+t.id)}},function(e,t){return{selectGroup:function(){e(i.selectMark(t.id))},deleteGroup:function(n){const a=t.id;t.selectedId===a&&e(i.selectMark(t.sceneId)),e(o.deleteMark(a)),n.preventDefault(),n.stopPropagation(),r.default.hide()},updateName:function(n){e(o.updateMarkProperty({property:"name",value:n},t.id))},toggleGroup:function(){e(i.toggleLayers([t.id]))}}})(class extends a.Component{componentDidUpdate(){r.default.rebuild()}render(){const e=this.props,t=e.id,n=e.group,s=n.name,r=e.expandedLayers[t],o=r?"expanded":"contracted";return a.createElement("li",{className:o},a.createElement("div",{className:"name"+(e.selectedId===t&&e.selectedType===i.InspectorSelectedType.SELECT_MARK?" selected":""),onClick:e.selectGroup},a.createElement(l.Icon,{glyph:h["group-"+o],onClick:e.toggleGroup}),a.createElement(m,{value:s,save:e.updateName,onClick:e.selectGroup}),a.createElement(l.Icon,{glyph:h.trash,className:"delete",onClick:e.deleteGroup,"data-html":!0,"data-place":"right","data-tip":"Delete "+s+" and <br> everything inside it"})),r&&n.get("marks")?a.createElement("ul",{className:"group"},a.createElement(c.default,Object.assign({groupId:t},e)),a.createElement(d.default,Object.assign({groupId:t},e)),a.createElement(p.default,Object.assign({groupId:t},e)),a.createElement(u.default,Object.assign({groupId:t},e))):null)}})},1184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(226),i=n(201),o=n(92),l=n(308),c=n(81),d=n(371),p=n(40).getInVis,u=n(82);t.default=s.connect(function(e,t){const n=t.groupId,a=p(e,"marks."+n+".axes"),s=p(e,"marks."+n+".legends");return{scales:p(e,"scales"),guides:a.concat(s).map(function(t){return p(e,"guides."+t)}).filter(function(e){return!!e})}},function(e,t){return{selectGuide:function(t){e(o.selectGuide(t))},deleteGuide:function(n,a,s){const l=t.groupId;n===a&&e(o.selectMark(l)),e(i.deleteGuide({groupId:l},a)),s.preventDefault(),s.stopPropagation(),r.default.hide()}}})(class extends a.Component{componentDidUpdate(){r.default.rebuild()}render(){const e=this.props,t=e.selectedId,n=e.selectedType;return a.createElement("div",null,a.createElement("li",{className:"header"},"Guides "),e.guides.map(function(s){const r=s._id;let i;s._gtype===l.GuideType.Axis?i=(s=s).scale:s._gtype===l.GuideType.Legend&&(i=(s=s)[s._type]);const p=d(e.scales.getIn([i,"name"])),m=d(s._gtype);return a.createElement("li",{key:r},a.createElement("div",{style:{paddingLeft:"26px"},className:"name"+(t===r&&n===o.InspectorSelectedType.SELECT_GUIDE?" selected":""),onClick:e.selectGuide.bind(null,r)},p+" "+m,a.createElement(c.Icon,{glyph:u.trash,className:"delete",onClick:e.deleteGuide.bind(null,t,r),"data-tip":"Delete "+p+" "+m,"data-place":"right"})))}))}})},1185:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"mark-group-open",use:"mark-group-open-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="mark-group-open"><g transform="rotate(90 50 50)"><polygon points="14.019,14.02 85.981,50.004 14.019,85.98" /></g></symbol>'});s.add(r);e.exports=r},1186:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"mark-group-closed",use:"mark-group-closed-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="mark-group-closed"><g><polygon points="14.019,14.02 85.981,50.004 14.019,85.98" /></g></symbol>'});s.add(r);e.exports=r},1187:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"mark-rect",use:"mark-rect-usage",viewBox:"0 0 14 17.5",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 14 17.5" id="mark-rect"><path fill-rule="evenodd" clip-rule="evenodd" d="M10,6v7c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V6c0-0.55-0.45-1-1-1h-2  C10.45,5,10,5.45,10,6z M5,1v12c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V1c0-0.55-0.45-1-1-1H6C5.45,0,5,0.45,5,1z M0,9v4  c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V9c0-0.55-0.45-1-1-1H1C0.45,8,0,8.45,0,9z" />\n\x3c!-- <text x="0" y="29" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Dilon Choudhury</text><text x="0" y="34" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1188:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"mark-line",use:"mark-line-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" id="mark-line"><polygon stroke-width="2" points="8.744,100 0,97.362 17.2,35.373 60.077,52.269 91.799,0 99.607,4.739 63.892,63.589 23.08,47.506" /></symbol>'});s.add(r);e.exports=r},1189:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"mark-area",use:"mark-area-usage",viewBox:"0 0 111 122.5",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 111 122.5" id="mark-area"><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 86.0322264L29.5264445 51.6235581 45.3423478 59.340291 61.8834325 28.2855206 80.0690932 39.7393663 100 10 100 86.0322266 10 86.0322264ZM10 86.0322264" /></g>\n\x3c!-- <text x="0" y="113" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Pham Thi Dieu Linh</text><text x="0" y="118" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1190:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"mark-text",use:"mark-text-usage",viewBox:"0 0 24 30",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 30" id="mark-text"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.905 3.068c-1.076 0-1.903 0.364-2.47 1.091 -0.571 0.729-0.858 1.787-0.858 3.18v0.083H1.686V0h20.629v7.422h-2.863V7.339c0-1.383-0.288-2.438-0.861-3.17 -0.577-0.734-1.408-1.101-2.495-1.101h-0.852v16.47c0 0.75 0.098 1.224 0.298 1.407 0.198 0.186 0.647 0.278 1.338 0.278h1.637V24H5.629v-2.776h1.52c0.658 0 1.089-0.076 1.296-0.233 0.211-0.158 0.313-0.644 0.313-1.452V3.068H7.905z" />\n\x3c!-- <text x="0" y="39" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Plainicon</text><text x="0" y="44" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1191:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"mark-symbol",use:"mark-symbol-usage",viewBox:"0 0 100 125",content:'<symbol xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 125" id="mark-symbol"><title>Bars plot</title><g transform="translate(0,-952.36217)"><circle cx="39.75" cy="1028.3622" r="25" fill-opacity="1" stroke="none" /><circle cx="57.5" cy="982.86218" r="18" fill-opacity="1" stroke="none" /></g>\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Gonzalo Bravo</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1192:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"trash",use:"trash-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="trash"><path d="M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z" /></symbol>'});s.add(r);e.exports=r},1193:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"plus",use:"plus-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="plus"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z" /></symbol>'});s.add(r);e.exports=r},1194:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"undo",use:"undo-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="undo"><path d="M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z" /></symbol>'});s.add(r);e.exports=r},1195:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"redo",use:"redo-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="redo"><path d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5 163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0 225-52t179-147q7-10 23-12 14 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109 132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298 164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14 39 17 39 59z" /></symbol>'});s.add(r);e.exports=r},1196:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"type-nominal",use:"type-nominal-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-nominal"><path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z" /></symbol>'});s.add(r);e.exports=r},1197:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"type-ordinal",use:"type-ordinal-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-ordinal"><path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z" /></symbol>'});s.add(r);e.exports=r},1198:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"type-quantitative",use:"type-quantitative-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-quantitative"><path d="M991 1024l64-256h-254l-64 256h254zm768-504l-56 224q-7 24-31 24h-327l-64 256h311q15 0 25 12 10 14 6 28l-56 224q-5 24-31 24h-327l-81 328q-7 24-31 24h-224q-16 0-26-12-9-12-6-28l78-312h-254l-81 328q-7 24-31 24h-225q-15 0-25-12-9-12-6-28l78-312h-311q-15 0-25-12-9-12-6-28l56-224q7-24 31-24h327l64-256h-311q-15 0-25-12-10-14-6-28l56-224q5-24 31-24h327l81-328q7-24 32-24h224q15 0 25 12 9 12 6 28l-78 312h254l81-328q7-24 32-24h224q15 0 25 12 9 12 6 28l-78 312h311q15 0 25 12 9 12 6 28z" /></symbol>'});s.add(r);e.exports=r},1199:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"type-temporal",use:"type-temporal-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-temporal"><path d="M192 1664h288v-288h-288v288zm352 0h320v-288h-320v288zm-352-352h288v-320h-288v320zm352 0h320v-320h-320v320zm-352-384h288v-288h-288v288zm736 736h320v-288h-320v288zm-384-736h320v-288h-320v288zm768 736h288v-288h-288v288zm-384-352h320v-320h-320v320zm-352-864v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm736 864h288v-320h-288v320zm-384-384h320v-288h-320v288zm384 0h288v-288h-288v288zm32-480v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm384-64v1280q0 52-38 90t-90 38h-1408q-52 0-90-38t-38-90v-1280q0-52 38-90t90-38h128v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h384v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h128q52 0 90 38t38 90z" /></symbol>'});s.add(r);e.exports=r},1200:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"prev",use:"prev-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="prev"><path d="M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z" /></symbol>'});s.add(r);e.exports=r},1201:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"next",use:"next-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="next"><path d="M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z" /></symbol>'});s.add(r);e.exports=r},1202:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"close",use:"close-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="close"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z" /></symbol>'});s.add(r);e.exports=r},1203:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"hamburger",use:"hamburger-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="hamburger"><path d="M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z" /></symbol>'});s.add(r);e.exports=r},1204:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"erase",use:"erase-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="erase"><path d="M13.2,3.5L8,8.7l7.2,7.2l5.2-5.2c0.7-0.7,0.7-1.9,0-2.6l-4.6-4.6C15.1,2.8,13.9,2.8,13.2,3.5z" /><path fill="none" stroke="#000000" stroke-width="2" stroke-linejoin="round" stroke-miterlimit="10" d="M11.3,20l9.2-9.2  c0.7-0.7,0.7-1.9,0-2.6l-4.6-4.6c-0.7-0.7-1.9-0.7-2.6,0l-9.7,9.7c-0.7,0.7-0.7,1.9,0,2.6L7.7,20l0,0H22" /></symbol>'});s.add(r);e.exports=r},1205:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"export",use:"export-usage",viewBox:"0 0 16 20",content:'<symbol xmlns:x="http://ns.adobe.com/Extensibility/1.0/" xmlns:i="http://ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="http://ns.adobe.com/Graphs/1.0/" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" viewBox="0 0 16 20" overflow="visible" id="export"><switch><foreignObject requiredExtensions="http://ns.adobe.com/AdobeIllustrator/10.0/" x="0" y="0" width="1" height="1"></foreignObject><g i:extraneous="self"><g i:layer="yes" i:dimmedPercent="50" i:rgbTrio="#4F008000FFFF"><path i:knockout="Off" d="M9,0v2h3L7,7l2,2l5-5v3h2V0H9z M14,14H2V2h4V0H0v16h16v-6h-2V14z" /></g></g></switch>\n\x3c!-- <text x="0" y="31" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Tahsin Tahil</text><text x="0" y="36" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1206:function(e,t){e.exports='<html>\n  <head>\n    <title>Vega Scaffold</title>\n    <script src="https://vega.github.io/vega-editor/vendor/d3.min.js"><\/script>\n    <script src="https://vega.github.io/vega/vega.min.js"><\/script>\n  </head>\n  <body>\n    <div id="vis"></div>\n  </body>\n  <script type="text/javascript">\n  // parse a spec and create a visualization view\n  function parse(spec) {\n    vg.parse.spec(spec, function(error, chart) {\n      chart({el:"#vis"}).update();\n    });\n  }\n  parse(INJECT_SPEC);\n  <\/script>\n</html>'},1207:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"select",use:"select-usage",viewBox:"0 0 512 512",content:'<symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="select"><g><path d="m106 120c8.284 0 15-6.716 15-15 0-41.355 33.645-75 75-75s75 33.645 75 75c0 8.284 6.716 15 15 15s15-6.716 15-15c0-57.897-47.103-105-105-105s-105 47.103-105 105c0 8.284 6.716 15 15 15z" /><path d="m159.292 510.417c2.083 1.041 4.379 1.583 6.708 1.583h210c3.979 0 7.793-1.58 10.607-4.394 22.179-22.179 34.393-51.667 34.393-83.032v-137.574c0-24.813-20.187-45-45-45-5.857 0-11.449 1.137-16.586 3.181-5.205-19.096-22.691-33.181-43.414-33.181-5.857 0-11.449 1.137-16.586 3.181-5.205-19.096-22.691-33.181-43.414-33.181-5.258 0-10.305.915-15 2.58v-79.58c0-24.813-20.187-45-45-45s-45 20.187-45 45v167h-15c-24.813 0-45 20.187-45 45v82.918c0 22.96 6.38 45.419 18.451 64.949 12.07 19.531 29.305 35.281 49.841 45.55zm-38.292-193.417c0-8.271 6.729-15 15-15h15v64.486c0 8.284 6.716 15 15 15s15-6.716 15-15v-261.486c0-8.271 6.729-15 15-15s15 6.729 15 15v212c0 8.284 6.716 15 15 15s15-6.716 15-15v-90c0-8.271 6.729-15 15-15s15 6.729 15 15v90c0 8.284 6.716 15 15 15s15-6.716 15-15v-60c0-8.271 6.729-15 15-15s15 6.729 15 15v60c0 8.284 6.716 15 15 15s15-6.716 15-15v-30c0-8.271 6.729-15 15-15s15 6.729 15 15v137.574c0 21.337-7.593 41.508-21.499 57.426h-199.824c-30.115-16.423-48.677-47.565-48.677-82.082z" /></g></symbol>'});s.add(r);e.exports=r},1208:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"sort",use:"sort-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort"><path d="M1408 1088q0 26-19 45l-448 448q-19 19-45 19t-45-19l-448-448q-19-19-19-45t19-45 45-19h896q26 0 45 19t19 45zm0-384q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45 19-45l448-448q19-19 45-19t45 19l448 448q19 19 19 45z" /></symbol>'});s.add(r);e.exports=r},1209:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"sort-alpha-asc",use:"sort-alpha-asc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-alpha-asc"><path d="M1255 408h177l-72-218-12-47q-2-16-2-20h-4l-3 20q0 1-3.5 18t-7.5 29zm-455 1032q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm836 119v233h-584v-90l369-529q12-18 21-27l11-9v-3q-2 0-6.5.5t-7.5.5q-12 3-30 3h-232v115h-120v-229h567v89l-369 530q-6 8-21 26l-11 11v2l14-2q9-2 30-2h248v-119h121zm89-897v106h-288v-106h75l-47-144h-243l-47 144h75v106h-287v-106h70l230-662h162l230 662h70z" /></symbol>'});s.add(r);e.exports=r},1210:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"sort-alpha-desc",use:"sort-alpha-desc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-alpha-desc"><path d="M1255 1432h177l-72-218-12-47q-2-16-2-20h-4l-3 20q0 1-3.5 18t-7.5 29zm-455 8q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm925 246v106h-288v-106h75l-47-144h-243l-47 144h75v106h-287v-106h70l230-662h162l230 662h70zm-89-1151v233h-584v-90l369-529q12-18 21-27l11-9v-3q-2 0-6.5.5t-7.5.5q-12 3-30 3h-232v115h-120v-229h567v89l-369 530q-6 8-21 26l-11 10v3l14-3q9-1 30-1h248v-119h121z" /></symbol>'});s.add(r);e.exports=r},1211:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"sort-numeric-asc",use:"sort-numeric-asc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-numeric-asc"><path d="M1474 1313q0-63-44-116t-103-53q-52 0-83 37t-31 94 36.5 95 104.5 38q50 0 85-27t35-68zm-610 127q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm750-69q0 62-13 121.5t-41 114-68 95.5-98.5 65.5-127.5 24.5q-62 0-108-16-24-8-42-15l39-113q15 7 31 11 37 13 75 13 84 0 134.5-58.5t66.5-145.5h-2q-21 23-61.5 37t-84.5 14q-106 0-173-71.5t-67-172.5q0-105 72-178t181-73q123 0 205 94.5t82 252.5zm-30-717v114h-469v-114h167v-432q0-7 .5-19t.5-17v-16h-2l-7 12q-8 13-26 31l-62 58-82-86 192-185h123v654h165z" /></symbol>'});s.add(r);e.exports=r},1212:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"sort-numeric-desc",use:"sort-numeric-desc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-numeric-desc"><path d="M1474 289q0-63-44-116t-103-53q-52 0-83 37t-31 94 36.5 95 104.5 38q50 0 85-27t35-68zm-610 1151q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm720 238v114h-469v-114h167v-432q0-7 .5-19t.5-17v-16h-2l-7 12q-8 13-26 31l-62 58-82-86 192-185h123v654h165zm30-1331q0 62-13 121.5t-41 114-68 95.5-98.5 65.5-127.5 24.5q-62 0-108-16-24-8-42-15l39-113q15 7 31 11 37 13 75 13 84 0 134.5-58.5t66.5-145.5h-2q-21 23-61.5 37t-84.5 14q-106 0-173-71.5t-67-172.5q0-105 72-178t181-73q123 0 205 94.5t82 252.5z" /></symbol>'});s.add(r);e.exports=r},1213:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"filter",use:"filter-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="filter"><path d="M1595 295q17 41-14 70l-493 493v742q0 42-39 59-13 5-25 5-27 0-45-19l-256-256q-19-19-19-45v-486l-493-493q-31-29-14-70 17-39 59-39h1280q42 0 59 39z" /></symbol>'});s.add(r);e.exports=r},1214:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"lookup",use:"lookup-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="lookup">\n  <path d="M98.079,85.956l-2.587-2.587c1.271-1.913,1.963-4.161,1.963-6.503v-64.64C97.456,5.705,92.15,0.4,85.629,0.4H11.981  C5.46,0.4,0.154,5.705,0.154,12.226v64.64c0,6.521,5.305,11.827,11.827,11.827h65.08l9.141,9.141  c1.138,1.139,2.653,1.766,4.263,1.766s3.124-0.627,4.262-1.766l3.352-3.351c1.139-1.139,1.766-2.653,1.766-4.263  C99.846,88.609,99.219,87.094,98.079,85.956z M4.167,12.226c0-4.309,3.505-7.814,7.814-7.814h73.648  c4.309,0,7.814,3.505,7.814,7.814v6.82H4.167V12.226z M32.597,84.681V73.214c0-1.108-0.898-2.006-2.006-2.006  s-2.006,0.898-2.006,2.006V84.68H11.981c-4.309,0-7.814-3.505-7.814-7.814v-8.328H24.73c1.108,0,2.006-0.898,2.006-2.006  s-0.898-2.006-2.006-2.006H4.167V43.461H24.73c1.108,0,2.006-0.898,2.006-2.006s-0.898-2.006-2.006-2.006H4.167v-16.39h24.418  v12.465c0,1.108,0.898,2.006,2.006,2.006s2.006-0.898,2.006-2.006V23.059h60.846v14.383h-8.526c-1.108,0-2.006,0.898-2.006,2.006  s0.898,2.006,2.006,2.006h8.526v21.065h-8.526c-1.108,0-2.006,0.898-2.006,2.006c0,1.108,0.898,2.006,2.006,2.006h8.526v10.335  c0,1.264-0.305,2.487-0.873,3.581L79.347,67.224c4.6-9.527,2.96-21.336-4.932-29.229c-9.972-9.973-26.201-9.973-36.174,0  s-9.973,26.201,0,36.174c4.987,4.986,11.537,7.479,18.087,7.479c3.818,0,7.634-0.853,11.142-2.547l5.579,5.579L32.597,84.681  L32.597,84.681z M71.578,71.333c-8.409,8.408-22.091,8.408-30.501,0c-8.408-8.409-8.408-22.092,0-30.501  c4.204-4.204,9.727-6.306,15.25-6.306s11.046,2.102,15.25,6.306C79.986,49.241,79.986,62.924,71.578,71.333z M95.243,91.645  l-3.353,3.352c-0.761,0.763-2.089,0.761-2.851,0L71.042,77c1.184-0.833,2.316-1.772,3.374-2.83s1.997-2.19,2.83-3.374l17.997,17.997  c0.381,0.381,0.591,0.888,0.591,1.426C95.833,90.757,95.624,91.263,95.243,91.645z" />\n  \x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by akash k</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1215:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"formula",use:"formula-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="formula"><path d="M384 1536q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm384 0q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm768 384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm768 384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm768 768v-384q0-52-38-90t-90-38-90 38-38 90v384q0 52 38 90t90 38 90-38 38-90zm-384-768q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm384-320v-256q0-26-19-45t-45-19h-1280q-26 0-45 19t-19 45v256q0 26 19 45t45 19h1280q26 0 45-19t19-45zm0 320q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm128-640v1536q0 52-38 90t-90 38h-1408q-52 0-90-38t-38-90v-1536q0-52 38-90t90-38h1408q52 0 90 38t38 90z" /></symbol>'});s.add(r);e.exports=r},1216:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"aggregate",use:"aggregate-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="aggregate"><path d="M576 736v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm512 0v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm512 0v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68z" /></symbol>'});s.add(r);e.exports=r},1217:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"download",use:"download-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="download"><path d="M1344 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm256 0q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128-224v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h465l135 136q58 56 136 56t136-56l136-136h464q40 0 68 28t28 68zm-325-569q17 41-14 70l-448 448q-18 19-45 19t-45-19l-448-448q-31-29-14-70 17-39 59-39h256v-448q0-26 19-45t45-19h256q26 0 45 19t19 45v448h256q42 0 59 39z" /></symbol>'});s.add(r);e.exports=r},1218:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"bold",use:"bold-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="bold"><path d="M747 1521q74 32 140 32 376 0 376-335 0-114-41-180-27-44-61.5-74t-67.5-46.5-80.5-25-84-10.5-94.5-2q-73 0-101 10 0 53-.5 159t-.5 158q0 8-1 67.5t-.5 96.5 4.5 83.5 12 66.5zm-14-746q42 7 109 7 82 0 143-13t110-44.5 74.5-89.5 25.5-142q0-70-29-122.5t-79-82-108-43.5-124-14q-50 0-130 13 0 50 4 151t4 152q0 27-.5 80t-.5 79q0 46 1 69zm-541 889l2-94q15-4 85-16t106-27q7-12 12.5-27t8.5-33.5 5.5-32.5 3-37.5.5-34v-65.5q0-982-22-1025-4-8-22-14.5t-44.5-11-49.5-7-48.5-4.5-30.5-3l-4-83q98-2 340-11.5t373-9.5q23 0 68.5.5t67.5.5q70 0 136.5 13t128.5 42 108 71 74 104.5 28 137.5q0 52-16.5 95.5t-39 72-64.5 57.5-73 45-84 40q154 35 256.5 134t102.5 248q0 100-35 179.5t-93.5 130.5-138 85.5-163.5 48.5-176 14q-44 0-132-3t-132-3q-106 0-307 11t-231 12z" /></symbol>'});s.add(r);e.exports=r},1219:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"italic",use:"italic-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="italic"><path d="M384 1662l17-85q6-2 81.5-21.5t111.5-37.5q28-35 41-101 1-7 62-289t114-543.5 52-296.5v-25q-24-13-54.5-18.5t-69.5-8-58-5.5l19-103q33 2 120 6.5t149.5 7 120.5 2.5q48 0 98.5-2.5t121-7 98.5-6.5q-5 39-19 89-30 10-101.5 28.5t-108.5 33.5q-8 19-14 42.5t-9 40-7.5 45.5-6.5 42q-27 148-87.5 419.5t-77.5 355.5q-2 9-13 58t-20 90-16 83.5-6 57.5l1 18q17 4 185 31-3 44-16 99-11 0-32.5 1.5t-32.5 1.5q-29 0-87-10t-86-10q-138-2-206-2-51 0-143 9t-121 11z" /></symbol>'});s.add(r);e.exports=r},1220:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"open",use:"open-usage",viewBox:"10 25 80 50",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="10 25 80 50" id="open"><title>12.5</title><desc>Created with Sketch.</desc><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><path d="M84.3765045,45.2316481 L77.2336539,75.2316205 L77.2336539,75.2316205 C77.1263996,75.6820886 76.7239081,76 76.2608477,76 L17.8061496,76 C17.2538649,76 16.8061496,75.5522847 16.8061496,75 C16.8061496,74.9118841 16.817796,74.8241548 16.8407862,74.739091 L24.7487983,45.4794461 C24.9845522,44.607157 25.7758952,44.0012839 26.6794815,44.0012642 L83.4036764,44.0000276 L83.4036764,44.0000276 C83.9559612,44.0000156 84.4036862,44.4477211 84.4036982,45.0000058 C84.4036999,45.0780163 84.3945733,45.155759 84.3765045,45.2316481 L84.3765045,45.2316481 Z M15,24 L26.8277004,24 L26.8277004,24 C27.0616369,24 27.2881698,24.0820162 27.4678848,24.2317787 L31.799078,27.8411064 L31.799078,27.8411064 C32.697653,28.5899189 33.8303175,29 35,29 L75,29 C75.5522847,29 76,29.4477153 76,30 L76,38 L76,38 C76,38.5522847 75.5522847,39 75,39 L25.3280454,39 L25.3280454,39 C23.0690391,39 21.0906235,40.5146929 20.5012284,42.6954549 L14.7844016,63.8477139 L14.7844016,63.8477139 C14.7267632,64.0609761 14.5071549,64.1871341 14.2938927,64.1294957 C14.1194254,64.0823423 13.9982484,63.9240598 13.9982563,63.7433327 L13.9999561,25 L14,25 C14.0000242,24.4477324 14.4477324,24.0000439 15,24.0000439 L15,24 Z" /></g></g>\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Landan Lloyd</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1221:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"save",use:"save-usage",viewBox:"0 0 362 372.5",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 362 372.5" fill-rule="evenodd" id="save"><g><path class="fil0" d="M24 0l54 0 0 114 206 0 0 -114 27 0 51 55 0 284c0,13 -10,23 -23,23l-315 0c-13,0 -24,-10 -24,-23l0 -315c0,-13 11,-24 24,-24zm24 152l266 0 0 189 -266 0 0 -189z" /><rect class="fil0" x="208" y="1" width="50.8754" height="78.352" /><rect class="fil0" x="79" y="181" width="204.238" height="22.2849" /><rect class="fil0" x="79" y="238" width="204.238" height="22.2849" /><rect class="fil0" x="79" y="294" width="204.238" height="22.2849" /></g>\n\x3c!-- <text x="0" y="377" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Ghiyats Mujtaba</text><text x="0" y="382" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1222:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"align-left",use:"align-left-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="align-left"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z" /></symbol>'});s.add(r);e.exports=r},1223:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"align-center",use:"align-center-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="align-center"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h896q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-640q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h640q26 0 45 19t19 45z" /></symbol>'});s.add(r);e.exports=r},1224:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"align-right",use:"align-right-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="align-right"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z" /></symbol>'});s.add(r);e.exports=r},1225:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"vertical-align-bottom",use:"vertical-align-bottom-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="vertical-align-bottom"><path d="M100,95.833V4.167C100,0,100,0,95.833,0H4.167C0,0,0,0,0,4.167v91.667C0,100,0,100,4.167,100h91.667  C100,100,100,100,100,95.833z M70.833,58.333L50,83.333l-20.833-25H70.833z M43.75,0h12.5v58.333h-12.5V0z" />\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Thomas Helbig</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1226:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"vertical-align-center",use:"vertical-align-center-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="vertical-align-center"><path d="M100,95.833V4.167C100,0,100,0,95.833,0H4.167C0,0,0,0,0,4.167v91.667C0,100,0,100,4.167,100h91.667  C100,100,100,100,100,95.833z M70.833,20.833L50,45.833l-20.833-25H70.833z M70.833,79.167H29.167l20.833-25L70.833,79.167z   M43.75,0h12.5v20.833h-12.5V0z M56.25,100h-12.5V79.167h12.5V100z" />\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Thomas Helbig</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1227:function(e,t,n){var a=n(37),s=n(38),r=new a({id:"vertical-align-top",use:"vertical-align-top-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="vertical-align-top"><path d="M100,95.833V4.167C100,0,100,0,95.833,0H4.167C0,0,0,0,0,4.167v91.667C0,100,0,100,4.167,100h91.667  C100,100,100,100,100,95.833z M56.25,100h-12.5V41.667h12.5V100z M70.833,41.667H29.167l20.833-25L70.833,41.667z" />\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Thomas Helbig</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\n</symbol>'});s.add(r);e.exports=r},1228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(226),i=n(92),o=n(67),l=n(81),c=n(40).getInVis,d=n(315),p=n(82);t.default=s.connect(function(e,t){return{marks:c(e,"marks."+t.groupId+".marks").map(function(t){return c(e,"marks."+t)})}},function(e,t){return{selectMark:function(t){e(i.selectMark(t))},deleteMark:function(n,a,s){n===a&&e(i.selectMark(t.groupId)),e(o.deleteMark(a)),s.preventDefault(),s.stopPropagation(),r.default.hide()},updateName:function(t,n){e(o.updateMarkProperty({property:"name",value:n},t))}}})(class extends a.Component{componentDidUpdate(){r.default.rebuild()}render(){const e=this.props,t=e.selectedId,n=e.selectedType;return a.createElement("div",null,a.createElement("li",{className:"header"},"Marks "),e.marks.map(function(s){if(!s)return;const r=s._id,o=s.name;return a.createElement("li",{key:r},a.createElement("div",{className:"name"+(t===r&&n===i.InspectorSelectedType.SELECT_MARK?" selected":""),onClick:e.selectMark.bind(null,r)},a.createElement(l.Icon,{glyph:p[s.type]}),a.createElement(d,{value:o,save:e.updateName.bind(null,r),onClick:e.selectMark.bind(null,r)}),a.createElement(l.Icon,{glyph:p.trash,className:"delete",onClick:e.deleteMark.bind(null,t,r),"data-tip":"Delete "+o,"data-place":"right"})))},this))}})},1232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(226),i=n(92),o=n(81),l=n(373),c=n(158),d=n(157),p=n(315),u=n(82),m=n(72);t.default=s.connect(function(e,t){const n=d.getScaleInfoForGroup(e,t.groupId),a=e.getIn(["vega","isParsing"]),s=Boolean(!a&&m.view&&(n.xScaleName&&n.xFieldName||n.yScaleName&&n.yFieldName)),r=e.getIn(["vis","present","marks",String(t.groupId),"_interactions"]);return{interactions:r?r.map(function(t){return e.getIn(["vis","present","interactions",String(t)])}):[],canDemonstrate:s}},function(e){return{addInteraction:t=>{const n=l.Interaction({groupId:t});e(c.addInteraction(n))},selectInteraction:function(t){e(i.selectInteraction(t))},deleteInteraction:function(t,n,a,s){t===a&&e(i.selectMark(n)),e(c.deleteInteraction({groupId:n},a)),s.preventDefault(),s.stopPropagation(),r.default.hide()},updateName:function(t,n){e(c.updateInteractionName(n,t))}}})(class extends a.Component{componentDidUpdate(){r.default.rebuild()}render(){const e=this.props,t=e.selectedId,n=e.selectedType;return a.createElement("div",{className:"interaction-list"},a.createElement("li",{className:"header"},"Interactions ",this.props.canDemonstrate?a.createElement(o.Icon,{glyph:u.plus,onClick:()=>this.props.addInteraction(this.props.groupId)}):null),e.interactions.map(function(s){const r=s.id,l=s.name;return a.createElement("li",{key:r},a.createElement("div",{className:"name"+(t===r&&n===i.InspectorSelectedType.SELECT_INTERACTION?" selected":""),onClick:e.selectInteraction.bind(null,r)},a.createElement(o.Icon,{glyph:u.select}),a.createElement(p,{value:l,save:e.updateName.bind(null,r),onClick:e.selectInteraction.bind(null,r)}),a.createElement(o.Icon,{glyph:u.trash,className:"delete",onClick:e.deleteInteraction.bind(null,t,this.props.groupId,r),"data-tip":"Delete "+l,"data-place":"right"})))},this))}})},1233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(226),i=n(92),o=n(81),l=n(225),c=n(157),d=n(315),p=n(82),u=n(72);t.default=s.connect(function(e,t){const n=c.getScaleInfoForGroup(e,t.groupId),a=e.getIn(["vega","isParsing"]),s=Boolean(!a&&u.view&&(n.xScaleName&&n.xFieldName||n.yScaleName&&n.yFieldName)),r=e.getIn(["vis","present","marks",String(t.groupId),"_widgets"]);return{widgets:r?r.map(function(t){return e.getIn(["vis","present","widgets",String(t)])}):[],canDemonstrate:s}},function(e){return{selectWidget:function(t){e(i.selectWidget(t))},deleteWidget:function(t,n,a,s){t===a&&e(i.selectMark(n)),e(l.deleteWidget({groupId:n},a)),s.preventDefault(),s.stopPropagation(),r.default.hide()},updateName:function(t,n){e(l.updateWidgetName(n,t))}}})(class extends a.Component{componentDidUpdate(){r.default.rebuild()}render(){const e=this.props,t=e.selectedId,n=e.selectedType;return a.createElement("div",{className:"interaction-list"},a.createElement("li",{className:"header"},"Widgets"),e.widgets.map(function(s){const r=s.id,l=s.name;return a.createElement("li",{key:r},a.createElement("div",{className:"name"+(t===r&&n===i.InspectorSelectedType.SELECT_WIDGET?" selected":""),onClick:e.selectWidget.bind(null,r)},a.createElement(o.Icon,{glyph:p.select}),a.createElement(d,{value:l,save:e.updateName.bind(null,r),onClick:e.selectWidget.bind(null,r)}),a.createElement(o.Icon,{glyph:p.trash,className:"delete",onClick:e.deleteWidget.bind(null,t,this.props.groupId,r),"data-tip":"Delete "+l,"data-place":"right"})))},this))}})},1234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(92),i=n(267),o=n(376),l=n(90),c=n(268),d=n(92),p=n(67),u=n(23),m=n(72),g=n(40).getInVis;const h={startDragging:d.startDragging,stopDragging:d.stopDragging,selectScale:r.selectScale,setMarkVisual:p.setMarkVisual};t.default=s.connect(function(e,t){const n=e.getIn(["inspector","dragging"]),a=n&&n.scaleId?n:null;return{selectedId:e.getIn(["inspector","encodings","selectedId"]),scales:g(e,"scales"),dragging:a}},h)(class extends a.Component{constructor(){super(...arguments),this.handleDragStart=(e=>{const t=e.target.dataset.scale,n=e.target.dataset.field;this.props.startDragging(c.ScaleDraggingState({scaleId:t,fieldName:n})),i.default.set(l.MODE,"channels"),m.update()}),this.handleDragEnd=(()=>{const e=i.default.get(l.SELECTED),t=i.default.get(l.CELL),n=u.tupleid(e)&&u.tupleid(t);try{if(n){const n=+e.mark.role.split("lyra_")[1],a=o.channelName(t.key);this.props.setMarkVisual({property:a,def:{scale:this.props.dragging.scaleId,field:this.props.dragging.fieldName}},n)}}catch(e){console.error("Unable to bind primitive"),console.error(e)}this.props.stopDragging(),i.default.set(l.MODE,"handles"),i.default.set(l.CELL,{}),n||m.update()})}render(){const e=this.props,t=[...e.scales.values()];return a.createElement("div",{id:"scale-list"},a.createElement("h2",null,"Scales"),a.createElement("ul",null,t.map(t=>{const n=t.get("_id"),s=t.get("name"),r=t.get("_domain")&&t.get("_domain").length?t.get("_domain")[0].field:null;return a.createElement("li",{key:n,onClick:e.selectScale.bind(null,n)},a.createElement("div",{draggable:!0,className:e.selectedId===n?"selected scale name":"scale name",onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,"data-scale":t.get("_id"),"data-field":r},s))},this)))}})},1235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(47),i=n(92),o=n(880),l=n(1236),c=n(1241),d=n(1244),p=n(1245),u=n(1248),m=n(1249),g=n(1254),h=n(1258),f=n(1259),y={AreaInspector:l.AreaInspector,GuideInspector:c.GuideInspector,LineInspector:d.LineInspector,RectInspector:p.RectInspector,ScaleInspector:u.ScaleInspector,SymbolInspector:h.SymbolInspector,TextInspector:f.TextInspector,InteractionInspector:m.InteractionInspector,WidgetInspector:g.WidgetInspector,GroupInspector:p.RectInspector},v=n(371),_=n(40).getInVis;t.InspectorSidebar=s.connect(function(e,t){const n=e.getIn(["inspector","encodings"]),a=n.get("selectedId"),s=n.get("selectedType"),o=s===r.getType(i.baseSelectMark),l=s===r.getType(i.selectGuide),c=s===r.getType(i.selectScale),d=s===r.getType(i.selectInteraction),p=s===r.getType(i.selectWidget),u=o?_(e,`marks.${a}`):l?_(e,`guides.${a}`):c?_(e,`scales.${a}`):d?_(e,`interactions.${a}`):p?_(e,`widgets.${a}`):null;let m,g=[];return o&&(g=(g=[...(g=_(e,"interactions")).values()]).filter(e=>u._parent==e.get("groupId")).map(e=>e.get("name"))),u&&u.from&&u.from.data&&(m=_(e,"pipelines."+_(e,"datasets."+u.from.data).get("_parent")).get("name")),{selectedId:a,isMark:o,isGuide:l,isScale:c,isInteraction:d,isWidget:p,name:u&&u.get("name"),from:m,markType:u&&u.get("type"),guideType:u&&u.get("_gtype"),interactionList:g}})(class extends a.Component{render(){const e=this.props,t=e.selectedId,n=e.from;let s,r,i;t&&(e.isMark&&e.markType?(s=v(e.markType),r=o.PrimType.MARKS):e.isGuide?(s="Guide",r=o.PrimType.GUIDES):e.isScale?(s="Scale",r=o.PrimType.SCALES):e.isInteraction?(s="Interaction",r=o.PrimType.INTERACTIONS):e.isWidget&&(s="Widget",r=o.PrimType.WIDGETS),i=y[s+"Inspector"]);const l=e.isMark?a.createElement("div",{className:"property-group property"},a.createElement("h3",{className:"label-long"},"Pipeline"),a.createElement("div",{className:"control"},n||"None")):null,c=this.props.interactionList.length&&e.isMark?a.createElement("div",{className:"property-group"},a.createElement("h3",{className:"label-long"},"Interactions"),a.createElement("div",{className:"property"},this.props.interactionList.length?this.props.interactionList.map(e=>a.createElement("span",{key:e,className:"interaction name"},e)):null)):null,d=i?a.createElement("div",{className:"inner"},l,a.createElement(i,{primId:t,primType:r,guideType:e.guideType}),c):null,p=e.name||"Properties";return a.createElement("div",{className:"sidebar",id:"inspector"},a.createElement("h2",null,p),d)}})},1236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(881),s=n(15),r=n(35),i=n(134);t.AreaInspector=r.connect()(class extends s.Component{render(){const e=this.props;return s.createElement("div",null,s.createElement(i.Property,Object.assign({name:"x",type:"number",droppable:!0},e),s.createElement("h3",{className:"label"},"X Position")),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Y Position"),s.createElement(i.Property,Object.assign({name:"y",label:"Start",type:"number",droppable:!0},e)),s.createElement(i.Property,Object.assign({name:"y2",label:"End",type:"number",droppable:!0},e))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Fill"),s.createElement(i.Property,Object.assign({name:"fill",label:"Color",type:"color",droppable:!0},e)),s.createElement(i.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",droppable:!0},e))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Stroke"),s.createElement(i.Property,Object.assign({name:"stroke",label:"Color",type:"color",droppable:!0},e)),s.createElement(i.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",droppable:!0},e))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Line Strength"),s.createElement(i.Property,Object.assign({name:"interpolate",label:"Interpolate",type:"select",opts:a,droppable:!0},e)),s.createElement(i.Property,Object.assign({name:"tension",label:"Tension",type:"number",droppable:!0},e))))}})},1237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40).getInVis,s='<span class="',r='<span class="field source" contenteditable="false">',i='<span class="signal" contenteditable="false">',o="</span>",l="datum.",c="#",d="{{",p="}}",u=new RegExp(d+".*"+p),m=new RegExp("("+r+"|"+i+").*"+o),g=n(15),h=n(1238),f=n(378),y=n(35),v=n(67),_=n(158);t.AutoComplete=y.connect(function(e,t){const n=a(e,"datasets."+t.dsId+"._schema"),s=e.getIn(["vis","present","interactions"]).valueSeq().toArray(),r=[].concat.apply([],s.filter(e=>e.signals.length).map(e=>e.signals.map(e=>e.signal))),i=e.getIn(["vis","present","widgets"]).valueSeq().toArray(),o=[].concat.apply([],i.filter(e=>e.signals.length).map(e=>e.signals.map(e=>e.signal)));return{fields:n?n.keySeq().toJS():[],signals:r.concat(o),dragging:e.getIn(["inspector","dragging"])}},function(e,t){return{setDsId(n){e(v.updateMarkProperty({property:"from",value:{data:n}},t.primId))},setSignalPush(t,n,a){e(_.setSignalPush({[t]:n},a))}}})(class extends g.Component{constructor(e){super(e),this.handleChange=(e=>{const t=e.target.value||e.target.innerHTML||"";this.props.updateFn(this.fromHtml(t)),this.setState({html:t})}),this.handleDragOver=(e=>(e.preventDefault&&e.preventDefault(),!1)),this.handleDrop=(e=>{const t=this.props;let n=t.dragging;if(n.dsId){const e=(n=n).fieldDef.name,a="Text"===this.state.html?"":this.state.html,s=this.htmlDecode(a);let i=s.indexOf(window.getSelection().anchorNode.textContent);i=(i=i>-1?i+window.getSelection().anchorOffset:s.length)>s.length?s.length:i;const l=s.substring(0,i)+r+e+o+s.substring(i);!t.dsId&&n.dsId&&"marks"===t.primType&&t.setDsId(n.dsId),t.updateFn(this.fromHtml(l)),this.setState({html:l})}else if(n.signal){(n=n).interactionId&&this.props.setSignalPush(n.signal,!0,n.interactionId);const e=n.signal,a="Text"===this.state.html?"":this.state.html,s=this.htmlDecode(a);let r=s.indexOf(window.getSelection().anchorNode.textContent);r=(r=r>-1?r+window.getSelection().anchorOffset:s.length)>s.length?s.length:r;const l=s.substring(0,r)+i+e+o+s.substring(r);t.updateFn(this.fromHtml(l)),this.setState({html:l})}}),this.state={html:this.toHtml(e.value||"")}}componentDidUpdate(e){this.props.dsId!==e.dsId&&this.props.updateFn(this.fromHtml(this.state.html)),this.props.value!==e.value&&this.setState({html:this.toHtml(this.props.value||"")})}componentDidMount(){f.findDOMNode(this),this.handleChange,this.props.fields}toHtml(e){return"expr"===this.props.type?this.exprToHtml(e):this.tmplToHtml(e)}fromHtml(e){return"expr"===this.props.type?this.htmlToExpr(e):this.htmlToTmpl(e)}exprToHtml(e){const t=this.props.fields,n=this.props.signals,a=new RegExp(t.map(e=>l+e).join("|"),"g"),s=new RegExp(n.join("|"),"g");return e=(e=e.replace(a,e=>e?r+e.substring(l.length)+o:e)).replace(s,e=>e?i+e+o:e)}htmlToExpr(e){return this.htmlDecode(this.wrapTokensExpr(this.htmlToTokens(e)))}tmplToHtml(e){const t=[];let n=e,a=n.search(u);for(;-1!==a;){t.push({type:"literal",str:n.substring(0,a)});const e=a+d.length,s=n.substring(e),r=s.search(p);s.startsWith(c)?t.push({type:"signal",str:s.substring(c.length,r)}):s.startsWith(l)&&t.push({type:"field",str:s.substring(l.length,r)}),a=(n=s.substring(r+p.length)).search(u)}return t.push({type:"literal",str:n}),this.wrapTokensHtml(t)}htmlToTokens(e){const t=[];let n=e,a=n.search(m);for(;-1!==a;){t.push({type:"literal",str:n.substring(0,a)});const e=a+s.length,l=n.substring(e),c=l.search(o);l.startsWith("signal")?t.push({type:"signal",str:l.substring(i.length-s.length,c)}):l.startsWith("field")&&t.push({type:"field",str:l.substring(r.length-s.length,c)}),a=(n=l.substring(c+o.length)).search(m)}return t.push({type:"literal",str:n}),t}htmlToTmpl(e){return this.htmlDecode(this.wrapTokensTmpl(this.htmlToTokens(e)))}wrapTokensHtml(e){return e.map(e=>"field"===e.type?r+e.str+o:"signal"===e.type?i+e.str+o:e.str).join("")}wrapTokensExpr(e){return e.map(e=>"field"===e.type?l+e.str:e.str).join("")}wrapTokensTmpl(e){return e.map(e=>"field"===e.type?d+l+e.str+p:"signal"===e.type?d+c+e.str+p:e.str).join("")}htmlDecode(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}render(){return g.createElement("div",{onDragOver:this.handleDragOver,onDrop:this.handleDrop},g.createElement(h.default,{className:"autocomplete",html:this.state.html,disabled:!1,onChange:this.handleChange}))}})},1240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(315),s=n(40).getInVis,r=n(72),i=n(15),o=n(35),l=n(266),c=n(310),d=n(267),p=n(81);t.FormInputProperty=o.connect(function(e,t){const n=t.signal;return n?{value:s(e,"signals."+n+".value")}:{value:t.value}},function(e,t){const n=t.signal;return{setSignal:function(t){n&&e(l.setSignal(t,n))}}})(class extends i.Component{constructor(e){super(e),this.signal=((e,t)=>{this.props.setSignal(t),this.setState({value:t})}),this.state={value:e.value}}componentWillMount(){this.onSignal(!1)}componentWillReceiveProps(e){const t=this.props,n=t.signal,a=e.signal;n!==a&&(this.offSignal(n),a&&this.onSignal(a)),(a||e.value!==t.value)&&this.setState({value:a&&a.startsWith("lyra")?d.default.get(a):e.value})}componentWillUnmount(){this.offSignal(!1)}onSignal(e){(e=e||this.props.signal)&&c.onSignal(e,this.signal)}offSignal(e){(e=e||this.props.signal)&&c.offSignal(e,this.signal)}handleChange(e){const t=this.props,n=t.type,a=t.signal;let s=e.target?e.target.value:e;"number"!==n&&"range"!==n||(s=+s),a&&(d.default.set(a,s,!1),r.update()),this.setState({value:s})}colorSupport(){const e=document.createElement("input");return e.setAttribute("type","color"),"text"!==e.type}render(){const e=this.props,t=e.name,n=e.id,s=e.min,r=e.max,o=e.disabled||e.group,l=o?"":this.state.value,c=e.onChange||this.handleChange.bind(this),d=e.onBlur,u=this.colorSupport();switch(e.type){case"checkbox":return i.createElement("input",{id:n,name:t,type:"checkbox",checked:l,disabled:o,onChange:c,onBlur:d});case"text":return i.createElement("input",{id:n,name:t,type:"text",value:l,disabled:o,onChange:c,onBlur:d});case"number":return i.createElement("input",{id:n,name:t,type:"number",value:l,min:s,max:r,disabled:o,onChange:c,onBlur:d});case"range":return i.createElement("div",null,i.createElement("input",{id:n,name:t,type:"range",value:l,min:s,max:r,step:e.step,disabled:o,onChange:c,onBlur:d}),i.createElement(a,{value:l,save:c}));case"color":return i.createElement("div",null,i.createElement("input",{id:n,name:t,type:u?"color":"text",value:l,disabled:o,onChange:c,onBlur:d}),u?i.createElement(a,{value:l,save:c}):null);case"select":return i.createElement("select",{id:n,name:t,value:l,disabled:o,onChange:c,onBlur:d},e.opts.map(function(e){return i.createElement("option",{key:e,value:e},e)},this));case"toggle":const m=e.opts.find(function(e){return e!==l});return i.createElement("div",null,i.createElement("button",{type:"button",id:n,className:(l===e.opts[0]?"":"button-secondary ")+"button",onClick:c.bind(this,m)},i.createElement(p.Icon,{glyph:e.glyph})));case"selection":return i.createElement("div",null,e.opts.map(function(t,a){return i.createElement("button",{key:t,type:"button",id:n,className:(l===t?"button-secondary ":"")+"button",onClick:c.bind(this,t)},i.createElement(p.Icon,{glyph:e.glyphs[a]}))},this));default:return null}}})},1241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(1242),i=n(1243),o=n(308),l=n(201);t.GuideInspector=s.connect(function(e,t){return{}},function(e){return{updateGuideProperty:function(t,n,a){e(l.updateGuideProperty({property:n,value:a},t))}}})(class extends a.Component{handleChange(e){const t=this.props.primId,n=e.target,a=n.name;let s="checkbox"===n.type?n.checked:n.value;s=""===s||isNaN(+s)?s:+s,this.props.updateGuideProperty(t,a,s)}render(){const e=this.props,t=e.guideType;return t===o.GuideType.Axis?a.createElement(r.AxisInspector,Object.assign({},e,{handleChange:e=>this.handleChange(e)})):t===o.GuideType.Legend?a.createElement(i.LegendInspector,Object.assign({},e,{handleChange:e=>this.handleChange(e)})):null}})},1242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(882),i=n(134);t.AxisInspector=s.connect()(class extends a.Component{render(){const e=this.props,t=e.handleChange,n="properties.axis.",s="properties.title.",o="properties.labels.",l="properties.grid.",c="properties.ticks.";return a.createElement("div",null,a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Axis"),a.createElement(i.Property,Object.assign({name:"orient",label:"Orient",type:"select",opts:["top","bottom","left","right"],onChange:t},e)),a.createElement(r.MoreProperties,{label:"Axis"},a.createElement(i.Property,Object.assign({name:n+"stroke",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:n+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Title"),a.createElement(i.Property,Object.assign({name:"title",label:"Text",type:"text",onChange:t},e)),a.createElement(i.Property,Object.assign({name:s+"fontSize",label:"Font Size",type:"number"},e)),a.createElement(r.MoreProperties,{label:"Title"},a.createElement(i.Property,Object.assign({name:s+"fill",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:"titleOffset",label:"Offset",type:"number",onChange:t},e)))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Labels"),a.createElement(i.Property,Object.assign({name:o+"fontSize",label:"Font Size",type:"number"},e)),a.createElement(i.Property,Object.assign({name:o+"angle",label:"Angle",type:"number",min:"0",max:"360"},e)),a.createElement(r.MoreProperties,{label:"Label"},a.createElement(i.Property,Object.assign({name:o+"fill",label:"Fill",type:"color"},e)))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Grid"),a.createElement(i.Property,Object.assign({name:"grid",label:"Grid",type:"checkbox",onChange:t},e)),a.createElement(i.Property,Object.assign({name:"layer",label:"Layer",type:"select",opts:["back","front"],onChange:t},e)),a.createElement(r.MoreProperties,{label:"Grid"},a.createElement(i.Property,Object.assign({name:l+"stroke",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:l+"strokeOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05"},e)),a.createElement(i.Property,Object.assign({name:l+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),a.createElement("div",{className:"property-group last"},a.createElement(r.MoreProperties,{label:"Ticks",header:"true"},a.createElement(i.Property,Object.assign({name:"ticks",label:"Number of Ticks",type:"number",onChange:t},e)),a.createElement(i.Property,Object.assign({name:c+"stroke",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:c+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)),a.createElement(i.Property,Object.assign({name:"tickPadding",label:"Padding",type:"range",onChange:t},e)),a.createElement(i.Property,Object.assign({name:"tickSize",label:"Size",type:"number",onChange:t},e)))))}})},1243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40).getInVis,s=n(15),r=n(35),i=n(882),o=n(134),l=n(422);t.LegendInspector=r.connect(function(e,t){const n=a(e,"guides."+t.primId),s=n.get("_type");return{legendType:s,scaleType:a(e,"scales."+n.get(s)).get("type")}})(class extends s.Component{render(){const e=this.props,t=e.handleChange,n=e.legendType,a=e.scaleType,r="properties.title.",c="properties.gradient.",d="properties.symbols.",p=s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Labels"),s.createElement(o.Property,Object.assign({name:"properties.labels.fontSize",label:"Font Size",type:"number"},e)),s.createElement(i.MoreProperties,{label:"Label"},s.createElement(o.Property,Object.assign({name:"properties.labels.fill",label:"Fill",type:"color"},e))));return s.createElement("div",null,s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Legend"),s.createElement(o.Property,Object.assign({name:"orient",label:"Orient",type:"select",opts:["left","right"],onChange:t},e)),s.createElement(i.MoreProperties,{label:"Legend"},s.createElement(o.Property,Object.assign({name:"properties.legend.stroke",label:"Color",type:"color"},e)),s.createElement(o.Property,Object.assign({name:"properties.legend.strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Title"),s.createElement(o.Property,Object.assign({name:"title",label:"Text",type:"text",onChange:t},e)),s.createElement(o.Property,Object.assign({name:r+"fontSize",label:"Font Size",type:"number"},e)),s.createElement(i.MoreProperties,{label:"Title"},s.createElement(o.Property,Object.assign({name:r+"fill",label:"Color",type:"color"},e)))),"fill"!==n&&"stroke"!==n||"ordinal"===a?s.createElement("div",null,s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Symbols"),"shape"!==n?s.createElement(o.Property,Object.assign({name:d+"shape",label:"Shape",type:"select",opts:l.SymbolShapes},e)):null,"size"!==n?s.createElement(o.Property,Object.assign({name:d+"size",label:"Size",type:"number"},e)):null,"fill"!==n?s.createElement(o.Property,Object.assign({name:d+"fill",label:"Fill",type:"color"},e)):null,"stroke"!==n?s.createElement(o.Property,Object.assign({name:d+"stroke",label:"Stroke",type:"color"},e)):null,s.createElement(i.MoreProperties,{label:"Symbol"},s.createElement(o.Property,Object.assign({name:d+"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05"},e)),s.createElement(o.Property,Object.assign({name:d+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),p):s.createElement("div",null,p,s.createElement("div",{className:"property-group"},s.createElement(i.MoreProperties,{label:"Gradient",header:"true"},s.createElement(o.Property,Object.assign({name:c+"stroke",label:"Color",type:"color"},e)),s.createElement(o.Property,Object.assign({name:c+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e))))))}})},1244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(881),s=n(15),r=n(134);t.LineInspector=class extends s.Component{render(){const e=this.props;return s.createElement("div",null,s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Position"),s.createElement(r.Property,Object.assign({name:"x",label:"X",type:"number",droppable:!0},e)),s.createElement(r.Property,Object.assign({name:"y",label:"Y",type:"number",droppable:!0},e))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Stroke"),s.createElement(r.Property,Object.assign({name:"stroke",label:"Color",type:"color",droppable:!0},e)),s.createElement(r.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",droppable:!0},e))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Line Strength"),s.createElement(r.Property,Object.assign({name:"interpolate",label:"Interpolate",type:"select",opts:a,droppable:!0},e)),s.createElement(r.Property,Object.assign({name:"tension",label:"Tension",type:"number",droppable:!0},e))))}}},1245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(1246),r=n(134);t.RectInspector=class extends a.Component{render(){const e=this.props;return a.createElement("div",null,a.createElement("div",{className:"property-group"},a.createElement("h3",null,"X Position"),a.createElement(s.ExtentProperty,Object.assign({exType:"x"},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Y Position"),a.createElement(s.ExtentProperty,Object.assign({exType:"y"},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Fill"),a.createElement(r.Property,Object.assign({name:"fill",label:"Color",type:"color",droppable:!0},e)),a.createElement(r.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",droppable:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Stroke"),a.createElement(r.Property,Object.assign({name:"stroke",label:"Color",type:"color",droppable:!0},e)),a.createElement(r.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",droppable:!0},e))))}}},1246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40),s=(a.getIn,a.getInVis),r=n(15),i=n(35),o=n(67),l=n(591),c=n(134),d=n(1247);t.ExtentProperty=i.connect(function(e,t){const n=t.exType,a=t.primId,r=s(e,"marks."+a+".encode.update");let i,o;return Object.values(l.default[n]).forEach(function(e){const t=e.name;r[t]._disabled||(i?i!==t&&(o=t):i=t)}),{start:i,end:o,startDisabled:r[i].band||r[i].group,endDisabled:r[o].band||r[o].group}},function(e,t){return{setExtent:function(n,a){const s=t.primId;e(o.setMarkExtent({oldExtent:n,newExtent:a},s)),e(o.resetMarkVisual(a,s))}}})(class extends r.Component{handleChange(e){const t=this.props,n=t.exType,a=e.target,s=a.name,r=a.value,i=t[s],o=l.default[n],c=o.CENTER.name,d=o.SPAN.name,p=t.end;t.setExtent(i,r),r===c&&p!==d&&t.setExtent(p,d)}render(){const e=this.props,t=e.exType,n=l.default[t],a=n.CENTER.name,s=n.SPAN.label,i=Object.values(n),o=e.start,p=e.end;return r.createElement("div",null,r.createElement(c.Property,Object.assign({name:o,type:"number",droppable:!0,firstChild:!0,disabled:e.startDisabled},e),r.createElement("div",{className:"label-long label"},r.createElement("select",{name:"start",value:o,onChange:e=>this.handleChange(e)},i.filter(function(e){return e.name!==p}).map(function(e){return r.createElement("option",{key:e.name,value:e.name},e.label)}))),r.createElement(d.SpatialPreset,Object.assign({className:"extra",name:o},e))),r.createElement(c.Property,Object.assign({name:p,type:"number",droppable:!0,firstChild:!0,disabled:e.endDisabled},e),r.createElement("br",null),r.createElement("div",{className:"label-long label"},o===a?r.createElement("label",{htmlFor:"end"},s):r.createElement("select",{name:"end",value:p,onChange:e=>this.handleChange(e)},i.filter(function(e){return e.name!==o&&e.name!==a}).map(function(e){return r.createElement("option",{key:e.name,value:e.name},e.label)}))),r.createElement(d.SpatialPreset,Object.assign({className:"extra",name:p},e))))}})},1247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40).getInVis,s=n(15),r=n(35),i=n(67);t.SpatialPreset=r.connect(function(e,t){const n=t.primId,s=t.name,r=a(e,"marks."+n+".encode.update."+s);return{field:r.field,band:r.band,group:r.group,scale:a(e,"scales."+r.scale)}},function(e,t){const n=t.primId;return{setPreset:function(t,a){e(i.setMarkVisual({property:t,def:a},n))},reset:function(t){e(i.resetMarkVisual(t,n))}}})(class extends s.Component{handleChange(e){const t=this.props,n=t.name,a=t.scale,s=n.indexOf("x")>=0?"width":"height";e.target.checked?t.setPreset(n,"width"===n||"height"===n?{scale:a.get("_id"),band:!0}:{group:s}):t.reset(n)}render(){const e=this.props,t=e.name,n=e.scale,a=t.indexOf("x")>=0?"width":"height";return e.field?null:"width"===t||"height"===t?n&&"ordinal"===n.get("type")&&!n.get("points")?s.createElement("label",null,s.createElement("input",{type:"checkbox",name:t,checked:e.band,onChange:e=>this.handleChange(e)})," Automatic"):null:s.createElement("label",null,s.createElement("input",{type:"checkbox",name:t,checked:e.group,onChange:e=>this.handleChange(e)})," Set to group ",a)}})},1248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40).getInVis,s=n(15),r=n(35);t.ScaleInspector=r.connect(function(e,t){return{scale:a(e,"scales."+t.primId)}})(class extends s.Component{render(){const e=this.props.scale;return s.createElement("div",null,s.createElement("div",{className:"property-group"},s.createElement("h3",{className:"label"},"Placeholder"),s.createElement("ul",null,s.createElement("li",null,"name: ",e.get("name")),s.createElement("li",null,"type: ",e.get("type")))))}})},1249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(373),i=n(158),o=n(157),l=n(1250),c=n(222),d=n(1251),p=n(23),u=n(1252),m=n(1253),g=n(870),h=n(72),f=n(310);const y={setInput:i.setInput,setSelection:i.setSelection,setApplication:i.setApplication,removeApplication:i.removeApplication,setSignals:i.setSignals};function v(e,t,n){if(n){const t=[],n=r.IntervalSelection({id:"brush",label:"Brush"}),a=r.IntervalSelection({id:"brush_y",label:"Brush (y-axis)",encoding:"y"}),s=r.IntervalSelection({id:"brush_x",label:"Brush (x-axis)",encoding:"x"});return e.forEach(e=>{var r,i;const{mark:l,xScaleType:c,yScaleType:d}=e;switch(l.type){case"rect":c===o.ScaleSimpleType.DISCRETE||d===o.ScaleSimpleType.DISCRETE?(c===o.ScaleSimpleType.DISCRETE&&t.push(s),d===o.ScaleSimpleType.DISCRETE&&t.push(a)):(c===o.ScaleSimpleType.CONTINUOUS&&d===o.ScaleSimpleType.CONTINUOUS&&t.push(n),d===o.ScaleSimpleType.CONTINUOUS&&t.push(a),c===o.ScaleSimpleType.CONTINUOUS&&t.push(s));break;case"symbol":case"text":c===o.ScaleSimpleType.CONTINUOUS&&d===o.ScaleSimpleType.CONTINUOUS&&t.push(n),d===o.ScaleSimpleType.CONTINUOUS&&t.push(a),c===o.ScaleSimpleType.CONTINUOUS&&t.push(s);break;case"line":d===o.ScaleSimpleType.CONTINUOUS&&t.push(a),c===o.ScaleSimpleType.CONTINUOUS&&t.push(s);break;case"area":const e=null===(i=null===(r=l.toJS().encode)||void 0===r?void 0:r.update)||void 0===i?void 0:i.orient,p=e?e.value||g.signalLookup(e.signal):null;p&&("vertical"===p&&c?t.push(s):"horizontal"===p&&d&&t.push(a))}}),[...new Set(t)]}{let n="_vgsid_";if(t&&t.selection){const e=t.selection;e.field&&"_vgsid_"!==e.field&&(n=e.field)}if("_vgsid_"===n){const t=new Set;e.forEach(e=>{e.scaleFields.forEach(e=>{t.add(e)})}),t.size&&(n=t.values().next().value)}return[r.PointSelection({ptype:"single",id:"single",label:"Single point",field:"_vgsid_"}),r.PointSelection({ptype:"multi",id:"multi",label:"Multi point",field:"_vgsid_"}),r.PointSelection({ptype:"single",id:"single_project",label:"Single point (projected)",field:n,encoding:null}),r.PointSelection({ptype:"multi",id:"multi_project",label:"Multi point (projected)",field:n,encoding:null})]}}function _(e,t,n,a,s,i,o,l){const d=[];if(n.length){const e=n[0],a=n.find(e=>"symbol"===e.type);d.push(r.MarkApplication({id:"color_"+l,label:"Color",targetGroupName:t,targetMarkName:c.default(e.name),propertyName:"line"===e.type?"stroke":"fill",unselectedValue:"#797979"})),d.push(r.MarkApplication({id:"opacity_"+l,label:"Opacity",targetGroupName:t,targetMarkName:c.default(e.name),propertyName:"opacity",unselectedValue:"0.2"})),a&&d.push(r.MarkApplication({id:"size_"+l,label:"Size",targetGroupName:t,targetMarkName:c.default(a.name),propertyName:"size",unselectedValue:30}))}return l&&d.push(r.ScaleApplication({id:"panzoom",label:"Pan and zoom",scaleInfo:a})),s.filter(t=>t._id!==e).forEach(e=>{const t=e._id,n=i.get(t).find(e=>e.from&&e.from.data);if(n){const t=c.default(e.name),a=c.default(n.name),s=o.get(String(n.from.data)).name;d.push(r.TransformApplication({id:"filter_"+t+"_"+l,label:"Filter "+e.name,targetGroupName:t,datasetName:s,targetMarkName:a}))}}),d}t.InteractionInspector=s.connect(function(e,t){const n=e.getIn(["vis","present","interactions",String(t.primId)]),a=n.get("groupId"),s=o.getScaleInfoForGroup(e,a),r=e.getIn(["vis","present","marks",String(a)]),i=c.default(r.name),l=e.getIn(["vis","present","marks"]).filter(e=>"group"===e.type).mapEntries(([e,t])=>[Number(e),t]),d=l.map(t=>o.getNestedMarksOfGroup(e,t)),p=d.get(a),u=e.getIn(["vis","present","datasets"]),m=o.getFieldsOfGroup(e,r._id),g=e.getIn(["vega","isParsing"]),f=Boolean(!g&&h.view&&(s.xScaleName&&s.xFieldName||s.yScaleName&&s.yFieldName)),y=n.input?"drag"===n.input.mouse:null,b=p.map(t=>{let n,a=null;if(t.encode&&t.encode.update&&t.encode.update.x&&t.encode.update.x.scale){const a=t.encode.update.x.scale,s=e.getIn(["vis","present","scales",String(a)]);n=o.scaleTypeSimple(s.get("type"))}if(t.encode&&t.encode.update&&t.encode.update.y&&t.encode.update.y.scale){const n=t.encode.update.y.scale,s=e.getIn(["vis","present","scales",String(n)]);a=o.scaleTypeSimple(s.get("type"))}const s=[];if(t.encode&&t.encode.update&&t.encode.update)for(const[e,n]of Object.entries(t.encode.update)){if("x"===e||"y"===e||!n)continue;const t=n.field;t&&s.push(t)}return{mark:t,xScaleType:n,yScaleType:a,scaleFields:s}}),{selectionPreviews:x,applicationPreviews:S}=function(e,t,n,a,s,r,i,o,l){if(null===l)return{selectionPreviews:[],applicationPreviews:[]};const c=s.get(e);return{selectionPreviews:v(r,o,l),applicationPreviews:_(e,t,c,n,a,s,i,l)}}(a,i,s,l,d,b,u,n,y);return{interaction:n,groups:l,scaleInfo:s,group:r,groupName:i,datasets:u,marksOfGroups:d,fieldsOfGroup:m,markScalesOfGroup:b,canDemonstrate:f,selectionPreviews:x,applicationPreviews:S,isDemonstratingInterval:y}},y)(class extends a.Component{constructor(){super(...arguments),this.previewRefs={},this.mainViewSignalValues={},this.updateIsDemonstrating=p.debounce(250,()=>{const e=this.mainViewSignalValues[this.scopedSignalName("brush_x")]&&this.mainViewSignalValues[this.scopedSignalName("brush_y")]&&Math.abs(this.mainViewSignalValues[this.scopedSignalName("brush_x")][0]-this.mainViewSignalValues[this.scopedSignalName("brush_x")][1])>10&&Math.abs(this.mainViewSignalValues[this.scopedSignalName("brush_y")][0]-this.mainViewSignalValues[this.scopedSignalName("brush_y")][1])>10,t=this.mainViewSignalValues[this.scopedSignalName("points_tuple")]||this.mainViewSignalValues[this.scopedSignalName("points_tuple_projected")],n=e||!t;if(this.props.isDemonstratingInterval!==n)if(this.props.interaction.input)this.props.interaction.selection&&(!this.props.selectionPreviews.length||this.props.interaction.selection.id!==this.props.selectionPreviews[0].id)||this.props.interaction.applications.length||this.props.setInput(Object.assign(Object.assign({},this.props.interaction.input),{mouse:n?"drag":"click"}),this.props.primId);else{const e=window._inputKeyboard;this.props.setInput({mouse:n?"drag":"click",keycode:e?e.keycode:void 0,_key:e?e._key:void 0},this.props.primId)}})}componentDidUpdate(e,t){if(!e.canDemonstrate&&this.props.canDemonstrate&&(this.restoreMainViewSignals(this.props.groupName),this.restorePreviewSignals(),this.onSignal(this.props.groupName,this.scopedSignalName("points_tuple"),(e,t)=>this.onMainViewPointSignal(e,t)),this.onSignal(this.props.groupName,this.scopedSignalName("points_tuple_projected"),(e,t)=>this.onMainViewPointSignal(e,t)),this.onSignal(this.props.groupName,this.scopedSignalName("points_toggle"),(e,t)=>this.onMainViewPointSignal(e,t)),this.onSignal(this.props.groupName,this.scopedSignalName("brush_x"),(e,t)=>this.onMainViewIntervalSignal(e,t)),this.onSignal(this.props.groupName,this.scopedSignalName("brush_y"),(e,t)=>this.onMainViewIntervalSignal(e,t)),this.onSignal(this.props.groupName,this.scopedSignalName("grid_translate_anchor"),(e,t)=>this.onMainViewGridSignal(e,t)),this.onSignal(this.props.groupName,this.scopedSignalName("grid_translate_delta"),(e,t)=>this.onMainViewGridSignal(e,t))),e.selectionPreviews!==this.props.selectionPreviews&&this.props.selectionPreviews.length){const e=this.props.selectionPreviews.map(e=>e.id);this.props.interaction.selection&&!e.every(e=>e!==this.props.interaction.selection.id)||this.props.setSelection(this.props.selectionPreviews[0],this.props.interaction.id)}if(this.props.interaction.input&&(!e.interaction.input||e.interaction.input.mouse!==this.props.interaction.input.mouse||e.scaleInfo.xScaleName!==this.props.scaleInfo.xScaleName||e.scaleInfo.yScaleName!==this.props.scaleInfo.yScaleName)){const e=this.getInteractionSignals(this.props.interaction,this.props.scaleInfo);this.props.setSignals(e,this.props.interaction.id)}}scopedSignalName(e){return`${e}_${this.props.interaction.id}`}restoreMainViewSignals(e){for(let t of["brush_x","brush_y","points_tuple","points_tuple_projected"].map(e=>this.scopedSignalName(e)))this.mainViewSignalValues[t]&&f.setSignalInGroup(h.view,e,t,this.mainViewSignalValues[t])}restorePreviewSignals(){for(let e of["brush_x","brush_y","points_tuple","points_tuple_projected"].map(e=>this.scopedSignalName(e)))this.mainViewSignalValues[e]&&(setTimeout(()=>{this.updatePreviewSignals(e,this.mainViewSignalValues[e])},50),this.updatePreviewSignals(e,this.mainViewSignalValues[e]))}updatePreviewSignals(e,t){this.props.selectionPreviews.forEach(n=>{this.previewRefs[n.id]&&this.previewRefs[n.id].setPreviewSignal(e,t)}),this.props.applicationPreviews.forEach(n=>{this.previewRefs[n.id]&&this.previewRefs[n.id].setPreviewSignal(e,t)})}onMainViewPointSignal(e,t){this.mainViewSignalValues[e]!==t&&(this.mainViewSignalValues[e]=t,this.updateIsDemonstrating(),this.updatePreviewSignals(e,t))}onMainViewIntervalSignal(e,t){this.mainViewSignalValues[e]!==t&&(this.mainViewSignalValues[e]=t,this.updateIsDemonstrating(),this.updatePreviewSignals(e,t))}onMainViewGridSignal(e,t){this.mainViewSignalValues[e]=t,this.updatePreviewSignals(e,t)}onSignal(e,t,n){f.onSignalInGroup(h.view,e,t,n)}onClickInteractionPreview(e){switch(e.type){case"point":case"interval":this.props.interaction&&this.props.setSelection(e,this.props.interaction.id);break;case"mark":case"scale":case"transform":this.props.interaction&&(e=e,this.interactionHasApplication(e)?this.props.removeApplication(e,this.props.interaction.id):this.props.setApplication(e,this.props.interaction.id))}}interactionHasApplication(e){return this.props.interaction.applications.some(t=>t.id===e.id)}getProjectionOptions(e){const t=[a.createElement("option",{key:"_vgsid_",value:"_vgsid_"},"None"),...this.props.fieldsOfGroup.map(e=>a.createElement("option",{key:e,value:e},e))];return a.createElement("div",null,a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"project_fields"},"Field:"),a.createElement("div",{className:"control"},a.createElement("select",{name:"project_fields",value:e.field,onChange:t=>this.onSelectProjectionField(e,t.target.value)},t))),a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"project_encodings"},"Encoding:"),a.createElement("div",{className:"control"},a.createElement("select",{name:"project_encodings",value:e.encoding,onChange:t=>this.onSelectProjectionEncoding(e,t.target.value)},a.createElement("option",{key:"null",value:"null"},"None"),a.createElement("option",{key:"x",value:"x"},"x"),a.createElement("option",{key:"y",value:"y"},"y")))))}onSelectProjectionField(e,t){const n=e.set("field",t);this.props.setSelection(n,this.props.interaction.id)}onSelectProjectionEncoding(e,t){let n;switch(t){case"x":n=e.set("encoding","x");break;case"y":n=e.set("encoding","y");break;default:n=e.set("encoding",null)}this.props.setSelection(n,this.props.interaction.id)}getTargetMarkOptions(e){const t=this.props.marksOfGroups.get(this.props.group._id);if(1===t.length)return null;const n=t.map(t=>{if(e.id.startsWith("size")&&"symbol"!==t.type)return null;const n=c.default(t.name);return a.createElement("option",{key:n,value:n},n)});return a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"target_mark"},"Target Mark:"),a.createElement("div",{className:"control"},a.createElement("select",{name:"target_mark",value:e.targetMarkName,onChange:t=>this.onSelectTargetMarkName(e,t.target.value)},n)))}onSelectTargetMarkName(e,t){let n=e.set("targetMarkName",t);if(e.id.startsWith("color")){const e=this.props.marksOfGroups.get(this.props.group._id).find(e=>c.default(e.name)===t);n=n.set("propertyName","line"===e.type?"stroke":"fill")}this.props.setApplication(n,this.props.interaction.id)}getInteractionSignals(e,t){const n=e.input;if(!n)return[];const{xScaleName:a,yScaleName:s,xFieldName:r,yFieldName:i}=t,o=e.id,l=this.props.fieldsOfGroup,c=[];switch(n.mouse){case"drag":a&&(c.push({signal:`brush_x_start_${o}`,label:"brush_x (start)"}),c.push({signal:`brush_x_end_${o}`,label:"brush_x (end)"}),r&&(c.push({signal:`brush_${r}_${a}_start_${o}`,label:`brush_${r} (start)`}),c.push({signal:`brush_${r}_${a}_end_${o}`,label:`brush_${r} (end)`}))),s&&(c.push({signal:`brush_y_start_${o}`,label:"brush_y (start)"}),c.push({signal:`brush_y_end_${o}`,label:"brush_y (end)"}),i&&(c.push({signal:`brush_${i}_${s}_start_${o}`,label:`brush_${i} (start)`}),c.push({signal:`brush_${i}_${s}_end_${o}`,label:`brush_${i} (end)`})));break;case"click":l.forEach(e=>{c.push({signal:`point_${e}_${o}`,label:`point_${e}`})});break;case"mouseover":c.push({signal:`mouse_x_${o}`,label:"mouse_x"}),c.push({signal:`mouse_y_${o}`,label:"mouse_y"}),r&&c.push({signal:`mouse_${r}_${o}`,label:`mouse_${r}`}),i&&c.push({signal:`mouse_${i}_${o}`,label:`mouse_${i}`}),l.forEach(e=>{c.push({signal:`point_${e}_${o}`,label:`point_${e}`})})}return c}render(){const e=this.props.interaction,t=e.applications;return a.createElement("div",null,a.createElement(u.InteractionInputType,{interactionId:e.id,input:e.input}),e.input?a.createElement("div",null,a.createElement("div",{className:"preview-controller"},a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Selections"),a.createElement("div",{className:"preview-scroll"},this.props.selectionPreviews.map(t=>a.createElement("div",{key:t.id,className:e&&e.selection&&e.selection.id===t.id?"selected":"",onClick:()=>this.onClickInteractionPreview(t)},a.createElement("div",{className:"preview-label"},t.label),a.createElement(d.default,{ref:e=>this.previewRefs[t.id]=e,id:`preview-${t.id}`,interaction:this.props.interaction,groupName:this.props.groupName,applicationPreviews:this.props.applicationPreviews,preview:t})))),e&&e.selection&&e.selection.id.includes("project")?this.getProjectionOptions(e.selection):null),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Applications"),a.createElement("div",{className:"preview-scroll "+(this.props.applicationPreviews.length>4?"overflow":"")},this.props.applicationPreviews.map(t=>a.createElement("div",{key:t.id,className:e&&this.interactionHasApplication(t)?"selected":""},a.createElement("div",{onClick:()=>this.onClickInteractionPreview(t)},a.createElement("div",{className:"preview-label"},t.label),a.createElement(d.default,{ref:e=>this.previewRefs[t.id]=e,id:`preview-${t.id}`,interaction:this.props.interaction,groupName:this.props.groupName,applicationPreviews:this.props.applicationPreviews,preview:t}))))),t.map(t=>"mark"===t.type?a.createElement("div",null,this.getTargetMarkOptions(t),a.createElement(l.InteractionMarkApplicationProperty,{interactionId:e.id,groupId:e.groupId,markApplication:t})):null))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Signals"),a.createElement(m.InteractionSignals,{interactionId:this.props.interaction.id,signals:this.props.interaction.signals}))):null)}})},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(222),i=n(158),o=n(134),l=n(157);t.InteractionMarkApplicationProperty=s.connect(function(e,t){const n=e.getIn(["vis","present","marks"]);let a=t.markApplication.targetGroupName;if(!a){const s=e.getIn(["vis","present","interactions",String(t.interactionId)]).groupId,i=n.get(String(s));a=r.default(i.name)}const s=n.find(e=>r.default(e.name)===a);return{targetMark:l.getNestedMarksOfGroup(e,s).find(e=>r.default(e.name)===t.markApplication.targetMarkName)}},function(e){return{setApplication:(t,n)=>{e(i.setApplication(t,n))}}})(class extends a.Component{constructor(e){super(e)}onUnselectedValueChange(e){const t=e.target&&e.target.value;t&&this.props.setApplication(this.props.markApplication.set("unselectedValue",t),this.props.interactionId)}render(){const e=this.props.markApplication.propertyName,t=this.props.targetMark,n=this.props.markApplication.unselectedValue,s={primId:t._id,primType:"marks"};switch(e){case"size":s.type="number",s.min="0",s.max="500";break;case"stroke":case"fill":s.type="color";break;case"opacity":s.type="range",s.min="0",s.max="1",s.step="0.05"}return a.createElement("div",null,a.createElement(o.Property,Object.assign({name:e,label:"Selected "+e,droppable:!0},s)),a.createElement(o.Property,Object.assign({name:"unselected"+e,label:"Unselected "+e,onChange:e=>this.onUnselectedValueChange(e),value:n,disabled:!1},s)))}})},1251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(23),r=n(157),i=n(310),o=n(72);class l extends a.Component{constructor(e){super(e),this.width=75,this.height=75}previewToSpec(e){const t=e.targetGroupName||this.props.groupName;let n=r.cleanSpecForPreview(o.export(!1),this.width,this.height,t,this.props.interaction.id);switch(e.type){case"point":let t;this.props.interaction.applications.length&&(t=this.props.interaction.applications.find(e=>"mark"===e.type)),!t&&this.props.applicationPreviews.length&&(t=this.props.applicationPreviews.find(e=>"mark"===e.type)),t&&(n=r.addApplicationToScene(n,this.props.groupName,this.props.interaction.id,this.props.interaction.input,t));case"interval":return r.addSelectionToScene(n,this.props.groupName,this.props.interaction.id,this.props.interaction.input,e);case"mark":case"scale":case"transform":return this.props.interaction.selection&&(n=r.addSelectionToScene(n,this.props.groupName,this.props.interaction.id,this.props.interaction.input,this.props.interaction.selection)),r.addApplicationToScene(n,this.props.groupName,this.props.interaction.id,this.props.interaction.input,e)}}componentDidMount(){const e=this.previewToSpec(this.props.preview);this.view=new s.View(s.parse(e),{renderer:"svg",container:`#${this.props.groupName}-${this.props.id}`}),this.view.width(this.width),this.view.height(this.height),this.view.runAsync()}componentDidUpdate(e){if(e.groupName!==this.props.groupName||e.interaction!==this.props.interaction){const e=this.previewToSpec(this.props.preview);this.view=new s.View(s.parse(e),{renderer:"svg",container:`#${this.props.groupName}-${this.props.id}`}),this.view.width(this.width),this.view.height(this.height),this.view.runAsync()}}scaleSignalValues(e,t){const n=this.width/640,a=this.height/360;return e.startsWith("brush_x")?t.map(e=>e*n):e.startsWith("brush_y")?t.map(e=>e*a):e.startsWith("grid_translate_delta")&&t?{x:t.x*n,y:t.y*a}:t}setPreviewSignal(e,t){if(this.view){const n=this.scaleSignalValues(e,t);i.setSignalInGroup(this.view,this.props.groupName,e,n),this.view.runAsync()}}getPreviewSignal(e){if(this.view)return i.getSignalInGroup(this.view,this.props.groupName,e)}render(){return a.createElement("div",{id:`${this.props.groupName}-${this.props.id}`,className:"interaction-preview"})}}t.InteractionPreview=l,t.default=l},1252:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r={setInput:n(158).setInput};t.InteractionInputType=s.connect(null,r)(class extends a.Component{onKeyboardKeydown(e){const t=e.which||e.keyCode,n=32===t?"Space":e.key;if(t!==this.props.input.keycode&&this.props.setInput(Object.assign(Object.assign({},this.props.input),{keycode:t,_key:n}),this.props.interactionId),13===t)return e.preventDefault(),!1}clearKeyboard(){this.props.setInput(Object.assign(Object.assign({},this.props.input),{keycode:void 0,_key:void 0}),this.props.interactionId)}onMouseValueChange(e){const t=e.target&&e.target.value;(!this.props.input||t&&t!==this.props.input.mouse)&&this.props.setInput(Object.assign(Object.assign({},this.props.input),{mouse:t}),this.props.interactionId)}mouseValueMap(){const e={drag:"Drag",click:"Click",mouseover:"Hover"};return this.props.input||(e.none="Select an event"),e}setHoverNearest(e){const t=e.target&&e.target.checked;this.props.setInput(Object.assign(Object.assign({},this.props.input),{nearest:t}),this.props.interactionId)}render(){const e=this.props.input;return a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Input Event"),a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"mouse-input"},"Mouse"),a.createElement("div",{className:"control"},a.createElement("div",null,a.createElement("select",{id:"mouse-input",name:"mouse-input",value:e?e.mouse:"none",onChange:e=>this.onMouseValueChange(e)},Object.entries(this.mouseValueMap()).map(([e,t])=>a.createElement("option",{key:e,value:e},t),this))))),e&&"mouseover"===e.mouse?a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"nearest-input"},"Nearest"),a.createElement("div",{className:"control"},a.createElement("div",null,a.createElement("input",{type:"checkbox",name:"nearest-input",checked:e.nearest,onClick:e=>this.setHoverNearest(e)})))):null,e?a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"key-input"},"Keyboard"),a.createElement("div",{className:"control"},a.createElement("div",null,a.createElement("input",{ref:e=>(e||{}).onsearch=(e=>this.clearKeyboard()),className:"key-input",name:"key-input",type:"search",onKeyDown:e=>this.onKeyboardKeydown(e),value:e&&e._key?e._key:"None"})))):null)}})},1253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(268),i=n(90),o=n(92),l=n(67),c=n(23),d=n(267),p=n(376),u=n(158),m=n(72);const g={startDragging:o.startDragging,stopDragging:o.stopDragging,setMarkVisual:l.setMarkVisual,setSignalPush:u.setSignalPush};t.InteractionSignals=s.connect(function(e){const t=e.getIn(["inspector","dragging"]);return{dragging:t&&t.signal?t:null,marks:e.getIn(["vis","present","marks"])}},g)(class extends a.Component{constructor(e){super(e),this.handleDragStart=(e=>{const t=this.props.interactionId,n=e.target.dataset.signal;this.props.startDragging(r.SignalDraggingState({interactionId:t,signal:n})),d.default.set(i.MODE,"channels"),m.update()}),this.handleDragEnd=(()=>{var e,t;const n=d.default.get(i.SELECTED),a=d.default.get(i.CELL),s=c.tupleid(n)&&c.tupleid(a);try{if(s){this.props.setSignalPush({[this.props.dragging.signal]:!0},this.props.dragging.interactionId);const s=+n.mark.role.split("lyra_")[1],r=p.channelName(a.key);let i=this.props.dragging.signal;if("text"===r){i=`{{#${this.props.dragging.signal}}}`;const n=null===(t=null===(e=this.props.marks.get(String(s)).encode)||void 0===e?void 0:e.update)||void 0===t?void 0:t.text;if(n){let e=n.signal||n.value||"";i=(e="Text"===e?"":e)+i}}this.props.setMarkVisual({property:r,def:{signal:i}},s)}}catch(e){console.error("Unable to bind primitive"),console.error(e)}this.props.stopDragging(),d.default.set(i.MODE,"handles"),d.default.set(i.CELL,{}),s||m.update()})}render(){return a.createElement("div",{className:"signals-container"},this.props.signals.map(e=>a.createElement("div",{draggable:!0,className:"signal",onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,"data-signal":e.signal},e.label)))}})},1254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(373),i=n(225),o=n(157),l=n(222),c=n(598),d=n(1255),p=n(1256),u=n(1257),m=n(72),g=n(310);const h={setSelection:i.setSelection,setApplication:i.setApplication,removeApplication:i.removeApplication,setSignals:i.setSignals};function f(e){return"nominal"===e.field.mtype||"ordinal"===e.field.mtype?[c.WidgetSelection({type:"radio",id:"radio",label:"Radio",comparator:"=="}),c.WidgetSelection({type:"select",id:"select",label:"Select",comparator:"=="})]:"temporal"===e.field.mtype||"quantitative"===e.field.mtype?[c.WidgetSelection({type:"range",id:"range",label:"Range",step:1,comparator:"=="})]:void 0}function y(e){const t=[];if(e.length){const n=e[0];t.push(r.MarkApplication({id:"color",label:"Color",targetMarkName:l.default(n.name),propertyName:"line"===n.type?"stroke":"fill",unselectedValue:"#797979"})),t.push(r.MarkApplication({id:"opacity",label:"Opacity",targetMarkName:l.default(n.name),propertyName:"opacity",unselectedValue:"0.2"})),"symbol"===n.type&&t.push(r.MarkApplication({id:"size",label:"Size",targetMarkName:l.default(n.name),propertyName:"size",unselectedValue:30}))}return t}t.WidgetInspector=s.connect(function(e,t){const n=e.getIn(["vis","present","widgets",String(t.primId)]),a=n.get("groupId"),s=o.getScaleInfoForGroup(e,a),r=e.getIn(["vis","present","marks",String(a)]),i=l.default(r.name),c=e.getIn(["vis","present","marks"]).filter(e=>"group"===e.type).mapEntries(([e,t])=>[Number(e),t]),d=c.map(t=>o.getNestedMarksOfGroup(e,t)),p=d.get(a),u=e.getIn(["vis","present","datasets"]);let g=[];if(p.length&&p[0].from&&p[0].from.data){const e=String(p[0].from.data);g=u.get(e).get("_schema").keySeq().toArray()}const h=e.getIn(["vega","isParsing"]),v=Boolean(!h&&m.view&&(s.xScaleName&&s.xFieldName||s.yScaleName&&s.yFieldName)),{selectionPreviews:_,applicationPreviews:b}=function(e,t,n){const a=t.get(e);return{selectionPreviews:f(n),applicationPreviews:y(a)}}(a,d,n);return{widget:n,groups:c,scaleInfo:s,group:r,groupName:i,datasets:u,marksOfGroups:d,fieldsOfGroup:g,canDemonstrate:v,selectionPreviews:_,applicationPreviews:b}},h)(class extends a.Component{constructor(){super(...arguments),this.previewRefs={},this.mainViewSignalValues={}}componentDidMount(){if(this.props.selectionPreviews&&this.props.selectionPreviews.length){const e=this.props.selectionPreviews.map(e=>e.id);this.props.widget.selection&&!e.every(e=>e!==this.props.widget.selection.id)||this.props.setSelection(this.props.selectionPreviews[0],this.props.widget.id)}if(this.props.applicationPreviews&&this.props.applicationPreviews.length){const e=this.props.applicationPreviews.map(e=>e.id);this.props.widget.applications.length&&!e.every(e=>this.props.widget.applications.map(e=>e.id).includes(e))||this.props.setApplication(this.props.applicationPreviews[0],this.props.widget.id)}this.props.setSignals(this.getInteractionSignals(this.props.widget),this.props.widget.id),this.restoreMainViewSignals(),this.restorePreviewSignals(),g.onSignal(`widget_${this.props.widget.id}`,(e,t)=>this.onMainViewWidgetSignal(e,t))}componentDidUpdate(e,t){!e.canDemonstrate&&this.props.canDemonstrate&&(this.restoreMainViewSignals(),this.restorePreviewSignals(),g.onSignal(`widget_${this.props.widget.id}`,(e,t)=>this.onMainViewWidgetSignal(e,t)))}restoreMainViewSignals(){const e=`widget_${this.props.widget.id}`;this.mainViewSignalValues[e]&&(m.view.signal(e,this.mainViewSignalValues[e]),m.view.runAsync())}restorePreviewSignals(){const e=`widget_${this.props.widget.id}`;this.mainViewSignalValues[e]&&(setTimeout(()=>{this.updatePreviewSignals(e,this.mainViewSignalValues[e])},50),this.updatePreviewSignals(e,this.mainViewSignalValues[e]))}updatePreviewSignals(e,t){this.props.applicationPreviews.forEach(n=>{this.previewRefs[n.id]&&this.previewRefs[n.id].setPreviewSignal(e,t)})}onMainViewWidgetSignal(e,t){this.mainViewSignalValues[e]!==t&&(this.mainViewSignalValues[e]=t,this.updatePreviewSignals(e,t))}onClickWidgetPreview(e){this.props.widget&&this.props.setSelection(e,this.props.widget.id)}onClickApplicationPreview(e){this.props.widget&&(this.widgetHasApplication(e)?this.props.removeApplication(e,this.props.widget.id):this.props.setApplication(e,this.props.widget.id))}widgetHasApplication(e){return this.props.widget.applications.some(t=>t.id===e.id)}getComparatorOptions(e){const t=["==","<",">","<=",">="].map(e=>a.createElement("option",{key:e,value:e},e));return a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"widget_comparator"},"Comparator:"),a.createElement("div",{className:"control"},a.createElement("select",{name:"widget_comparator",value:e.comparator,onChange:t=>this.onSelectComparator(e,t.target.value)},t)))}onSelectComparator(e,t){const n=e.set("comparator",t);this.props.setSelection(n,this.props.widget.id)}getTargetMarkOptions(e){const t=this.props.marksOfGroups.get(this.props.group._id);if(1===t.length)return null;const n=t.map(e=>{const t=l.default(e.name);return a.createElement("option",{key:t,value:t},t)});return a.createElement("div",{className:"property"},a.createElement("label",{htmlFor:"target_mark"},"Target Mark:"),a.createElement("div",{className:"control"},a.createElement("select",{name:"target_mark",value:e.targetMarkName,onChange:t=>this.onSelectTargetMarkName(e,t.target.value)},n)))}onSelectTargetMarkName(e,t){let n=e.set("targetMarkName",t);if(e.id.startsWith("color")){const e=this.props.marksOfGroups.get(this.props.group._id).find(e=>l.default(e.name)===t);n=n.set("propertyName","line"===e.type?"stroke":"fill")}this.props.setApplication(n,this.props.widget.id)}getInteractionSignals(e){return[{signal:`widget_${e.id}`,label:`widget_${e.field.name}`}]}render(){const e=this.props.widget,t=e.applications;return a.createElement("div",null,a.createElement("div",null,a.createElement("div",{className:"preview-controller"},a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Selections"),a.createElement("div",{className:"preview-scroll"},this.props.selectionPreviews.map(t=>a.createElement("div",{key:t.id,className:e&&e.selection&&e.selection.id===t.id?"selected":"",onClick:()=>this.onClickWidgetPreview(t)},a.createElement("div",{className:"preview-label"},t.label),a.createElement(d.default,{id:`preview-${t.id}`,groupName:this.props.groupName,widget:this.props.widget,preview:t})))),e&&e.selection?this.getComparatorOptions(e.selection):null),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Applications"),a.createElement("div",{className:"preview-scroll"},this.props.applicationPreviews.map(t=>a.createElement("div",{key:t.id,className:e&&this.widgetHasApplication(t)?"selected":""},a.createElement("div",{onClick:()=>this.onClickApplicationPreview(t)},a.createElement("div",{className:"preview-label"},t.label),a.createElement(d.default,{ref:e=>this.previewRefs[t.id]=e,id:`preview-${t.id}`,groupName:this.props.groupName,widget:this.props.widget,preview:t}))))),t.map(t=>"mark"===t.type?a.createElement("div",null,this.getTargetMarkOptions(t),a.createElement(p.WidgetMarkApplicationProperty,{widgetId:e.id,groupId:e.groupId,markApplication:t})):null))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Signals"),a.createElement(u.WidgetSignals,{widgetId:this.props.widget.id,signals:this.props.widget.signals}))))}})},1255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(23),r=n(157),i=n(72);n(310);class o extends a.Component{constructor(){super(...arguments),this.width=75,this.height=75}previewToSpec(e){const t=this.props.groupName;let n=r.cleanSpecForPreview(i.export(!1),this.width,this.height,t,this.props.widget.id);return this.props.widget.selection&&(n=r.addWidgetSelectionToScene(n,this.props.widget,this.props.widget.selection)),r.addWidgetApplicationToScene(n,this.props.groupName,this.props.widget,e)}componentDidMount(){if(this.props.preview.targetMarkName){const e=this.previewToSpec(this.props.preview);this.view=new s.View(s.parse(e),{renderer:"svg",container:`#${this.props.groupName}-${this.props.id}`}),this.view.width(this.width),this.view.height(this.height),this.view.runAsync()}}componentDidUpdate(e){if(this.props.preview.targetMarkName&&(e.groupName!==this.props.groupName||e.widget!==this.props.widget||e.widget.selection!==this.props.widget.selection)){const e=this.previewToSpec(this.props.preview);this.view=new s.View(s.parse(e),{renderer:"svg",container:`#${this.props.groupName}-${this.props.id}`}),this.view.width(this.width),this.view.height(this.height),this.view.runAsync()}}widgetPreview(){const e=r.widgetParams(this.props.widget.field,this.props.widget.dsId);switch(this.props.preview.type){case"radio":return e.options?e.options.map((e,t)=>a.createElement("div",{key:e},a.createElement("input",{type:"radio",name:this.props.preview.id,value:e,checked:0===t||null}),a.createElement("label",{htmlFor:this.props.preview.id},e))):null;case"range":return a.createElement("div",null,a.createElement("input",Object.assign({type:"range"},e)),a.createElement("label",{htmlFor:this.props.preview.id},this.props.widget.field.name));case"select":return a.createElement("select",{value:e.options&&e.options.length?e.options[0]:null},e.options?e.options.map(e=>a.createElement("option",{value:e},e)):null)}}setPreviewSignal(e,t){this.view&&(this.view.signal(e,t),this.view.runAsync())}render(){const e=this.props.preview.targetMarkName;return a.createElement("div",{id:`${this.props.groupName}-${this.props.id}`,className:"interaction-preview"},e?null:this.widgetPreview())}}t.WidgetPreview=o,t.default=o},1256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(44),r=n(35),i=n(222),o=n(225),l=n(134),c=n(157);t.WidgetMarkApplicationProperty=r.connect(function(e,t){const n=e.getIn(["vis","present","marks",String(t.groupId)]);return{marks:s.Map(c.getNestedMarksOfGroup(e,n).map(e=>[i.default(e.name),e]))}},function(e){return{setApplication:(t,n)=>{e(o.setApplication(t,n))}}})(class extends a.Component{constructor(e){super(e)}onUnselectedValueChange(e){const t=e.target&&e.target.value;t&&this.props.setApplication(this.props.markApplication.set("unselectedValue",t),this.props.widgetId)}render(){const e=this.props.markApplication.propertyName,t=this.props.markApplication.targetMarkName,n=this.props.marks.filter((e,n)=>n===t).valueSeq().first(),s=this.props.markApplication.unselectedValue,r={primId:n._id,primType:"marks"};switch(e){case"size":r.type="number",r.min="0",r.max="500";break;case"stroke":case"fill":r.type="color";break;case"opacity":r.type="range",r.min="0",r.max="1",r.step="0.05"}return a.createElement("div",null,a.createElement(l.Property,Object.assign({name:e,label:"Selected "+e,droppable:!0},r)),a.createElement(l.Property,Object.assign({name:"unselected"+e,label:"Unselected "+e,onChange:e=>this.onUnselectedValueChange(e),value:s,disabled:!1},r)))}})},1257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(268),i=n(90),o=n(92),l=n(67),c=n(23),d=n(267),p=n(376),u=n(72);const m={startDragging:o.startDragging,stopDragging:o.stopDragging,setMarkVisual:l.setMarkVisual};t.WidgetSignals=s.connect(function(e){const t=e.getIn(["inspector","dragging"]);return{dragging:t&&t.signal?t:null}},m)(class extends a.Component{constructor(e){super(e),this.handleDragStart=(e=>{const t=e.target.dataset.signal;this.props.startDragging(r.SignalDraggingState({signal:t})),d.default.set(i.MODE,"channels"),u.update()}),this.handleDragEnd=(()=>{const e=d.default.get(i.SELECTED),t=d.default.get(i.CELL),n=c.tupleid(e)&&c.tupleid(t);try{if(n){const n=+e.mark.role.split("lyra_")[1],a=p.channelName(t.key);this.props.setMarkVisual({property:a,def:{signal:"text"===a?`{{#${this.props.dragging.signal}}}`:this.props.dragging.signal}},n)}}catch(e){console.error("Unable to bind primitive"),console.error(e)}this.props.stopDragging(),d.default.set(i.MODE,"handles"),d.default.set(i.CELL,{}),n||u.update()})}render(){return a.createElement("div",{className:"signals-container"},this.props.signals.map(e=>a.createElement("div",{draggable:!0,className:"signal",onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,"data-signal":e.signal},e.label)))}})},1258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(134),r=n(422);t.SymbolInspector=class extends a.Component{render(){const e=this.props;return a.createElement("div",null,a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Position"),a.createElement(s.Property,Object.assign({name:"x",label:"X",type:"number",droppable:!0},e)),a.createElement(s.Property,Object.assign({name:"y",label:"Y",type:"number",droppable:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Geometry"),a.createElement(s.Property,Object.assign({name:"shape",label:"Shape",type:"select",opts:r.SymbolShapes,droppable:!0},e)),a.createElement(s.Property,Object.assign({name:"size",label:"Size",type:"number",droppable:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Fill"),a.createElement(s.Property,Object.assign({name:"fill",label:"Color",type:"color",droppable:!0},e)),a.createElement(s.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",droppable:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Stroke"),a.createElement(s.Property,Object.assign({name:"stroke",label:"Color",type:"color",droppable:!0},e)),a.createElement(s.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",droppable:!0},e))))}}},1259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(82),s=n(40).getInVis,r=n(15),i=n(35),o=n(67),l=n(580),c=n(134);t.TextInspector=i.connect(function(e,t){const n=t.primId;return{dsId:s(e,`marks.${n}.from.data`),text:s(e,`marks.${n}.encode.update.text.signal`)}},function(e,t){return{updateTextAttributes:function(n,a){e(o.setMarkVisual({property:n,def:{signal:a}},t.primId))},updateText:function(n){e(o.setMarkVisual({property:"text",def:{signal:n}},t.primId))}}})(class extends r.Component{constructor(e){super(e)}render(){const e=this.props,t=e.dsId;return r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement(c.Property,Object.assign({name:"text.signal",value:e.text,type:"autocomplete",autoType:"tmpl",droppable:!0,dsId:t,onChange:e.updateText},e),r.createElement("h3",{className:"label"},"Text"))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Font"),r.createElement(c.Property,Object.assign({name:"font",label:"Face",type:"select",opts:l.TextFonts,droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"fontSize",label:"Size",type:"number",droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"fontWeight",label:"Weight",type:"toggle",glyph:a.bold,opts:l.TextFontWeights.map(e=>String(e)),droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"fontStyle",label:"Style",type:"toggle",glyph:a.italic,opts:l.TextFontStyles,droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"fill",label:"Color",type:"color",droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",droppable:!0},e))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Offset"),r.createElement(c.Property,Object.assign({name:"dx",label:"X",type:"number",droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"dy",label:"Y",type:"number",droppable:!0},e))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Align"),r.createElement(c.Property,Object.assign({name:"align",label:"Horizontal",type:"selection",glyphs:[a["align-left"],a["align-center"],a["align-right"]],opts:l.TextAlignments,droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"baseline",label:"Vertical",type:"selection",glyphs:[a["vertical-align-top"],a["vertical-align-center"],a["vertical-align-bottom"]],opts:l.TextBaselines,droppable:!0},e)),r.createElement(c.Property,Object.assign({name:"angle",label:"Rotation",type:"number",droppable:!0},e))))}})},1260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(1261),r=n(1278);t.PipelinesToolbar=class extends a.PureComponent{constructor(e){super(e),this.openModal=(()=>this.setState({modalIsOpen:!0})),this.closeModal=(()=>this.setState({modalIsOpen:!1})),this.state={modalIsOpen:!1}}render(){return a.createElement("div",{id:"pipeline-toolbar"},a.createElement("h2",null,"Data Pipelines"),a.createElement(s.PipelineList,{openModal:this.openModal}),a.createElement(r.default,{modalIsOpen:this.state.modalIsOpen,closeModal:this.closeModal}))}}},1261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(92),i=n(312),o=n(81),l=n(1262),c=n(40).getInVis,d=n(315),p=n(82);const u={selectPipeline:r.selectPipeline,updatePipeline:i.updatePipelineProperty};t.PipelineList=s.connect(function(e){return{pipelines:c(e,"pipelines"),selectedId:e.getIn(["inspector","pipelines","selectedId"])}},u)(class extends a.Component{render(){const e=this.props.pipelines.keySeq().toArray(),t=this.props.pipelines.valueSeq().toArray(),n=this.props.selectedId?this.props.selectedId:e.length?e[0]:this.props.selectedId;return a.createElement("div",{id:"pipeline-list",style:{marginTop:t.length?-20:-15}},a.createElement("div",{className:"pipeline-tabs"},t.length?t.map(e=>{const t=e._id,s=e.name;return a.createElement(d,{key:t,className:"header "+(n===t?"selected":""),value:s,save:this.props.updatePipeline.bind(this,t,"name"),onClick:()=>this.props.selectPipeline(t)})}):null,a.createElement("span",{className:"new",onClick:this.props.openModal},a.createElement(o.Icon,{glyph:p.plus})," New")),e.length?e.map(e=>a.createElement(l.PipelineInspector,{key:e,id:e,selectedId:n})):a.createElement("div",{id:"pipeline-hint",onClick:this.props.openModal},"Add a new data pipeline to get started."))}})},1262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(1263),i=n(40).getInVis;t.PipelineInspector=s.connect(function(e,t){const n=t.id;return{pipeline:i(e,"pipelines."+n)}})(class extends a.Component{render(){const e=this.props,t=e.pipeline,n=e.id;let s;const i=+e.selectedId==+n;return i&&(s=a.createElement("div",null,a.createElement(r.default,{id:t._source,fieldsCount:6}),t._aggregates.entrySeq().map(function(e,t){return a.createElement("div",{key:t,className:"aggregate"},a.createElement("p",{className:"source"},"Group By: ",e[0].split("|").join(", ")),a.createElement(r.default,{id:e[1],fieldsCount:6}))}))),a.createElement("div",{className:"pipeline"+(i?" selected":"")},s)}})},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1264),s=n(15),r=n(35),i=n(1269),o=n(883),l=n(40).getInVis;t.default=r.connect(function(e,t){const n=t.id;return{dataset:l(e,"datasets."+n)}})(class extends s.Component{constructor(e){super(e),this.onPage=this.onPage.bind(this),this.state={page:0,scroll:0}}onPage(e){this.setState({page:e})}onScroll(e){e!==this.state.scroll&&this.setState({scroll:e})}render(){const e=this.props,t=e.id,n=e.dataset.get("_schema").keySeq().toArray(),r=~~(n.length/e.fieldsCount),l=Math.ceil(n.length/(r+1)),c=[];for(let e=0;e<=r;e++)c.push(s.createElement(o.default,{key:e,id:this.props.id,first:0===e,last:e===r,fieldsIndex:e,fieldsCount:l,limit:20,page:this.state.page,onPage:this.onPage,scroll:this.state.scroll,onScroll:i.throttle(250,e=>this.onScroll(e))}));return c.push(s.createElement("div",{key:"TransformList",className:"datatable-container"},s.createElement(a.default,{dsId:t}))),s.createElement("div",{className:"datatable-multi"},c)}})},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(1265),i=n(40).getInVis;t.default=s.connect(function(e,t){return{transforms:i(e,"datasets."+t.dsId+".transform")}})(class extends a.Component{constructor(e){super(e),this.state={expandedIndex:null}}setExpandedIndex(e){this.setState({expandedIndex:e})}render(){const e=this.props,t=e.transforms.filter(e=>"aggregate"!==e.type),n=!!t&&1===t.length&&"aggregate"===t[0].type,s=e.dsId;return t&&t.length&&!n?a.createElement("div",{className:"transform-list"},t.map(function(e,t){return"identifier"===e.type?null:a.createElement(r.default,{key:t,index:t,dsId:s,def:e,expanded:this.state.expandedIndex===t,setExpandedIndex:e=>this.setExpandedIndex(e)})},this)):null}})},1265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(141),i=n(1266),o=n(1267),l=n(1268),c=n(371);class d extends a.Component{constructor(){super(...arguments),this.Filter=i.Filter,this.Formula=o.Formula,this.Lookup=l.default,this.timer=null,this.resetTimer=(()=>{window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{},1e4)}),this.expand=(()=>{this.props.setExpandedIndex(this.props.index),this.resetTimer()}),this.updateTransform=(e=>{this.props.updateTransform(e),this.resetTimer()})}componentDidMount(){this.resetTimer()}componentWillUnmount(){window.clearTimeout(this.timer)}render(){const e=this.props,t=c(e.def.type),n=this[t];return this.props.expanded?a.createElement("div",{className:"transform-inspector"},a.createElement(n,Object.assign({update:this.updateTransform},e))):a.createElement("div",{className:"transform-button",onClick:this.expand},t)}}t.TransformInspector=d,t.default=s.connect(null,function(e,t){return{updateTransform:function(n){e(r.updateTransform({index:t.index,transform:n},t.dsId))}}})(d)},1266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(85),r=n(134),i=n(72);t.Filter=class extends a.Component{constructor(){super(...arguments),this.updateFilter=(e=>{let t=e.target?e.target.value:e;if(i.view)try{s.default(t,{getSignal:e=>i.view.signal(e),signalRef:()=>null}),this.props.update({type:"filter",expr:t})}catch(e){console.warn(e)}else setTimeout(()=>{this.updateFilter(e)},100)})}render(){const e=this.props,t=e.dsId;return a.createElement(r.Property,{type:"autocomplete",autoType:"expr",label:"Filter",primType:"datasets",primId:t,name:"transform."+e.index+".expr",dsId:t,onChange:this.updateFilter})}}},1267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(85),r=n(134),i=n(72);t.Formula=class extends a.Component{constructor(){super(...arguments),this.updateFormula=(e=>{const t=this.props,n=t.def,a=e.target?e.target.value:n.as,r=e.target?n.expr:e;if(i.view)try{s.default(r,{getSignal:e=>i.view.signal(e),signalRef:()=>null}),t.update({type:"formula",as:a,expr:r})}catch(e){}else setTimeout(()=>{this.updateFormula(e)},100)})}render(){const e=this.props,t=this.updateFormula,n=e.dsId;return a.createElement("div",null,a.createElement(r.Property,{type:"autocomplete",label:"Calculate",autoType:"expr",primType:"datasets",primId:n,name:"transform."+e.index+".expr",dsId:n,onChange:t}),a.createElement(r.Property,{type:"text",label:"As",primType:"datasets",primId:n,name:"transform."+e.index+".as",onChange:t}))}}},1268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(134);class i extends a.Component{constructor(e){super(e),this.state={from:+e.def.from,values:e.def.fields},this.handleFromChange=this.handleFromChange.bind(this),this.handleValuesChange=this.handleValuesChange.bind(this),this.updateLookupTransform=this.updateLookupTransform.bind(this)}handleFromChange(e){const t=+e.target.value;this.setState({from:t}),this.updateLookupTransform(t)}handleValuesChange(e){const t=[];for(const n of e.target.options)n.selected&&t.push(n.value);this.setState({values:t}),this.updateLookupTransform(null,t)}updateLookupTransform(e,t){const n=this.state,a=this.props,s=a.def;e=e||n.from,t=t||n.values;const r=a.pipelines.find(t=>t.id===e).name,i=t.map(e=>`${r}_${e}`);a.update({type:"lookup",fields:s.fields,from:""+e,key:s.key,values:t,as:i})}render(){const e=this.props,t=e.pipelines.find(e=>e.id===this.state.from).fields;return a.createElement("div",null,a.createElement(r.Property,{type:"select",label:"Lookup",primType:"datasets",primId:e.dsId,name:"transform."+e.index+".fields.0",opts:e.fields,onChange:this.updateLookupTransform}),a.createElement(r.Property,{type:"select",label:"Pipeline"},a.createElement("div",{className:"control"},a.createElement("select",{value:this.state.from,onChange:this.handleFromChange},e.pipelines.map(e=>a.createElement("option",{value:e.id},e.name))))),a.createElement(r.Property,{type:"select",label:"Key",primType:"datasets",primId:e.dsId,name:"transform."+e.index+".key",opts:t,onChange:this.updateLookupTransform}),a.createElement(r.Property,{type:"select",label:"Fields"},a.createElement("div",{className:"control"},a.createElement("select",{value:this.state.values,multiple:!0,onChange:this.handleValuesChange},t.map(e=>a.createElement("option",null,e))))))}}t.Lookup=i,t.default=s.connect(function(e,t){return{pipelines:e.getIn(["vis","present","pipelines"]).valueSeq().toJS().map(t=>({id:t._source,name:t.name,fields:e.getIn(["vis","present","datasets",String(t._source),"_schema"]).keySeq().toJS()})),fields:e.getIn(["vis","present","datasets",String(t.dsId),"_schema"]).keySeq().toJS()}})(i)},1270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(226),i=n(23),o=n(376),l=n(92),c=n(267),d=n(268),p=n(90),u=n(309),m=n(81),g=n(1271),h=n(1273),f=n(1274),y=n(1275),v=n(1276),_=n(72),b=n(40).getInVis,x=n(82),S=n(884).QUANTITATIVE;const E={bindChannel:o.default,startDragging:l.startDragging,stopDragging:l.stopDragging};t.default=s.connect(function(e,t){return{srcId:b(e,"pipelines."+b(e,"datasets."+t.dsId+"._parent")+"._source")}},E)(class extends a.Component{constructor(e){super(e),this.handleDragStart=(e=>{const t=e.target.classList;this.setState(e=>Object.assign(Object.assign({},e),{bindField:u.default(this.state.fieldDef),showAggregates:t.contains("aggregate-field")}));const n=this.props.dsId,a=this.state.fieldDef;this.props.startDragging(d.FieldDraggingState({dsId:n,fieldDef:a})),c.default.set(p.MODE,"channels"),_.update()}),this.handleDragEnd=((e,t)=>{const n=this.props,a=c.default.get(p.SELECTED),s=c.default.get(p.CELL),r=this.state.bindField,o=i.tupleid(a)&&i.tupleid(s),l=r.source?n.srcId:n.dsId;try{if(o){const e=+a.mark.role.split("lyra_")[1];i.extend(r,t),n.bindChannel(l,r,e,s.key)}}catch(e){console.error("Unable to bind primitive"),console.error(e)}n.stopDragging(),c.default.set(p.MODE,"handles"),c.default.set(p.CELL,{}),this.setState({bindField:null}),o||_.update()}),this.toggleTransforms=(e=>{this.setState({showAggregates:!this.state.showAggregates})}),this.state={fieldDef:null,offsetTop:null,bindField:null,showAggregates:!1}}componentWillReceiveProps(e){const t=e.def,n=e.schema;this.setState(e=>t?Object.assign(Object.assign({},e),{fieldDef:n.get(t.name),offsetTop:t.offsetTop,showAggregates:!1}):Object.assign(Object.assign({},e),{fieldDef:null,showAggregates:!1}))}componentDidUpdate(){r.default.rebuild()}render(){const e=this.props.dsId,t=this.state,n=document.querySelector(".field.source"),s=n?n.getBoundingClientRect():{height:1,width:1},r=t.fieldDef,i={top:t.offsetTop,display:r?"block":"none"},o={top:t.offsetTop,display:r&&t.showAggregates?"block":"none"},l={display:i.display,top:t.offsetTop-18,height:s.height+26,width:2*s.width},c={onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},d=r?a.createElement("div",null,a.createElement(h.default,{dsId:e,field:r}),r.mtype===S?a.createElement(m.Icon,{onClick:this.toggleTransforms,glyph:x.aggregate,width:"10",height:"10","data-tip":"Show aggregations"}):null,a.createElement("span",{className:"fieldName"},r.name),a.createElement(f.default,{dsId:e,field:r}),a.createElement(y.default,{dsId:e,field:r}),a.createElement(v.default,{dsId:e,field:r})):null;return a.createElement("div",{onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},a.createElement("div",{className:"buffer full",style:l}),a.createElement("div",{style:i,draggable:!0,className:"full field "+(r&&r.source?"source":"derived")},d),a.createElement(g.AggregateList,Object.assign({handlers:c,style:o,field:r},this.props)))}})},1271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(1272),r=n(595),i=5;t.AggregateList=class extends a.Component{constructor(e){super(e),this.expand=(()=>{this.setState({fullList:!0})}),this.state={fullList:!1}}componentWillReceiveProps(e){e.field!==this.props.field&&this.setState({fullList:!1})}render(){const e=this.props,t=this.state.fullList,n=r.slice(0,t?void 0:i);return a.createElement("div",{className:"aggregates-list",style:e.style},n.map(function(t,n){return a.createElement(s.default,Object.assign({op:t,key:n,field:e.field},e.handlers))}),t?null:a.createElement("div",{className:"more full field derived",onClick:this.expand},"+ More"))}}},1272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15);n(595);t.default=class extends a.Component{constructor(){super(...arguments),this.onDragEnd=(e=>{const t=this.props;t.onDragEnd(e,{aggregate:t.op})})}render(){const e=this.props,t=e.field,n=t?t.name:null;return a.createElement("div",{className:"full field derived aggregate-field",draggable:!0,onDragStart:e.onDragStart,onDragEnd:this.onDragEnd},a.createElement("strong",null,e.op),"_",n)}}},1273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(226),i=n(141),o=n(81),l=n(371),c=n(884),d=n(82);t.default=s.connect(null,function(e,t){return{changeType:function(){const n=t.field;let a=c.indexOf(n.mtype);a=(a+1)%c.length,e(i.changeFieldMType({field:n.name,mtype:c[a]},t.dsId))}}})(class extends a.Component{componentDidUpdate(){r.default.rebuild()}render(){const e=this.props,t=e.field.mtype;return a.createElement(o.Icon,{onClick:e.changeType,glyph:d[t],width:"10",height:"10","data-tip":l(t)+" field"})}})},1274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(141),i=n(81),o=n(82);class l extends a.Component{render(){return a.createElement(i.Icon,{onClick:this.props.filter,glyph:o.filter,width:"10",height:"10","data-tip":"Filter"})}}t.FilterIcon=l,t.default=s.connect(null,function(e,t){return{filter:function(){e(r.addTransform({type:"filter",expr:"datum."+t.field.name},t.dsId))}}})(l)},1275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(141),i=n(81),o=n(82);class l extends a.Component{render(){return a.createElement(i.Icon,{onClick:this.props.formula,glyph:o.formula,width:"10",height:"10","data-tip":"Calculate a new field"})}}t.FormulaIcon=l,t.default=s.connect(null,function(e,t){return{formula:function(){const n=t.field.name;e(r.addTransform({type:"formula",as:"calc_"+n,expr:"datum."+n},t.dsId))}}})(l)},1276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(141),i=n(81),o=n(82);class l extends a.Component{render(){const e=this.props;return e.size>1?a.createElement(i.Icon,{onClick:()=>e.lookup(e.from),glyph:o.lookup,height:"10","data-tip":"Lookup record on another pipeline"}):null}}t.LookupIcon=l,t.default=s.connect(function(e,t){const n=e.getIn(["vis","present","pipelines"]),a=n.first();return{size:n.size,from:a._source}},function(e,t){return{lookup:function(n){const a=t.field.name;e(r.addTransform({type:"lookup",from:""+n,key:a,fields:[a],values:[],as:[]},t.dsId))}}})(l)},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(592);t.default=class extends a.Component{render(){const e=this.props,t=e.event;if(!t)return null;const n=s.select(t.target),r=n.node(),i=r.parentNode.firstChild,o=i.getBoundingClientRect(),l=i.offsetLeft+o.width,c=n.classed("odd")?"odd":"even",d={display:"block",left:r.offsetLeft-e.scrollLeft+l,top:i.offsetTop};return a.createElement("div",{className:"full value "+c,style:d},n.text())}}},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(1279),r=n(35),i=n(312),o=n(372),l=n(581),c=n(224),d=n(603),p=n(883),u=n(1288),m=n(1289),g=/([\w\d_-]*)\.?[^\\\/]*$/i;const h={addPipeline:i.addPipeline,derivePipeline:i.derivePipeline};class f extends a.Component{constructor(e){super(e),this.initialState={error:null,success:null,showPreview:!1,selectedExample:null,name:null,pipeline:null,dataset:null,values:null,isDerived:!1},this.state=this.initialState,this.loadURL=this.loadURL.bind(this),this.fopen=this.fopen.bind(this)}createPipeline(e){const t=e.match(g)[1];this.setState({name:t,pipeline:l.Pipeline({name:t})})}createDataset(e){const t=c.parseRaw(e),n=t.values;this.setState({values:n,dataset:o.Dataset({name:this.state.name,format:t.format,_schema:c.schema(n)})})}success(e,t){this.setState({error:null,success:e||null,showPreview:!0,selectedExample:t,isDerived:!1})}error(e){this.setState({error:e.statusText||e.message||"An error occured!",success:null,selectedExample:null,isDerived:!1})}done(e){const t=this.state;e&&null===t.error&&(this.state.isDerived?this.props.derivePipeline(t.pipeline._id):this.props.addPipeline(t.pipeline,t.dataset,t.values)),this.setState(this.initialState),this.props.closeModal()}loadURL(e,t){this.createPipeline(e),d.get(e,(n,a)=>{a?this.error(a):(this.createDataset(n),this.success(t?null:`Succesfully imported ${e}`),this.setState({selectedExample:e}))})}selectPipelineToDerive(e){const t=this.props.datasets.get(String(e._source));this.setState({name:e.name,pipeline:e,dataset:t,values:c.output(t._id),isDerived:!0,showPreview:!0,selectedExample:String(e._id)})}fopen(e){d.read(e.target.files,(e,t)=>{this.createPipeline(t.name),this.createDataset(e),this.success(`Successfully imported ${t.name}`)})}render(){const e=this.props,t=this.state,n=t.error,r=t.success,i=t.showPreview,o=this.done.bind(this,!1),l=e.canDerive,c={overlay:{display:"flex",alignItems:"center",justifyContent:"center"},content:{overflow:"hidden",top:null,bottom:null,left:null,right:null,width:"550px",height:r||n||i||l?"auto":"300px",padding:null}};return a.createElement(s,{isOpen:e.modalIsOpen,onRequestClose:o,contentLabel:"Pipeline Modal",style:c},a.createElement("div",{className:"pipelineModal"},a.createElement("span",{className:"closeModal",onClick:o},"close"),a.createElement("div",{className:"row"},a.createElement("div",{className:"examples"},a.createElement("h2",null,"Example Datasets"),a.createElement("ul",null,m.map(function(e){const n=e.name,s=e.description,r=e.url,i=t.selectedExample===r?"selected":null;return a.createElement("li",{key:n,onClick:this.loadURL.bind(this,r,!0),className:i},a.createElement("p",{className:"example-name"},n),a.createElement("p",null,s))},this))),a.createElement("div",{className:"load"},a.createElement("h2",null,"Import a Dataset"),a.createElement("p",null,"Data must be in a tabular form. Supported import formats include ",a.createElement("abbr",{title:"JavaScript Object Notation"},"json"),", ",a.createElement("abbr",{title:"Comma-Separated Values"},"csv")," and ",a.createElement("abbr",{title:"Tab-Separated Values"},"tsv")),a.createElement("p",null,a.createElement("input",{type:"file",accept:".json,.tsv,.csv",onChange:this.fopen})),a.createElement("p",null,"or"),a.createElement(u.default,{loadURL:this.loadURL}))),this.props.pipelines.length?a.createElement("div",{className:"row"},a.createElement("div",{className:"derive"},a.createElement("h2",null,"Derive from Existing Dataset"),a.createElement("ul",null,this.props.pipelines.map(function(e){const n=e.name,s=t.selectedExample===String(e._id)?"selected":null;return a.createElement("li",{key:n,onClick:()=>this.selectPipelineToDerive(e),className:s},a.createElement("p",{className:"pipeline-name"},n))},this)))):null,n?a.createElement("div",{className:"error-message"},n):null,r?a.createElement("div",{className:"success-message"},r):null,!i||n?null:a.createElement("div",{className:"preview"},a.createElement("h2",null,"Preview"),a.createElement(p.default,{className:"source",values:t.values,schema:t.dataset._schema,limit:20}),a.createElement("button",{className:"button button-success",onClick:this.done.bind(this,!0)},"Import"))))}}t.PipelineModal=f,t.default=r.connect(function(e){const t=e.getIn(["vis","present","pipelines"]).valueSeq().toArray();return{pipelines:t,datasets:e.getIn(["vis","present","datasets"]),canDerive:t.length}},h)(f)},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15);t.default=class extends a.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(e){this.props.loadURL(e.target.url.value),e.preventDefault()}render(){return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("input",{type:"text",name:"url",placeholder:"Enter url"}),a.createElement("button",{type:"submit",value:"Submit",className:"button"},"Load"))}}},1289:function(e,t,n){"use strict";e.exports=[{name:"Cars",description:"Vehicular data which consists of names, cylinders and displacement",url:"./data/cars.json"},{name:"Jobs",description:"Job demographics such as job type, sex and count",url:"./data/jobs.json"},{name:"Gapminder",description:"Year, country, population, fertility",url:"./data/gapminder.json"},{name:"Climate",description:"Climate attributes such as temperature by lat-long",url:"./data/climate.json"}]},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(81),r=n(1291),i=n(1292),o=n(1293),l=n(1294),c=n(1295),d=n(82);t.Toolbar=class extends a.PureComponent{render(){return a.createElement("div",{className:"toolbar"},a.createElement("div",{className:"toolbar-menu"},a.createElement("input",{type:"checkbox",id:"nav-trigger",className:"nav-trigger"}),a.createElement("label",{htmlFor:"nav-trigger"},a.createElement(s.Icon,{glyph:d.hamburger})),a.createElement("div",{className:"menu"},a.createElement(r.AddMarks,null),a.createElement(i.AddInteractions,null),a.createElement(c.UndoRedo,null),a.createElement(l.Persist,null),a.createElement(o.Export,null))))}}},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(67),i=n(421),o=n(81),l=n(311),c=n(82),d=["rect","symbol","text","line","area"];t.AddMarks=s.connect(null,function(e,t){return{addMark:t=>{const n=i.Mark(t,{_parent:l.getClosestGroupId()});e(r.addMark(n))}}})(class extends a.Component{render(){return a.createElement("ul",{className:"add-marks"},d.map(function(e,t){return a.createElement("li",{key:e,onClick:this.props.addMark.bind(null,e)},a.createElement(o.Icon,{glyph:c[e]})," ",e)},this))}})},1292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(158),i=n(81),o=n(373),l=n(311),c=n(157),d=n(82),p=n(72);t.AddInteractions=s.connect(function(e){const t=l.getClosestGroupId(),n=c.getScaleInfoForGroup(e,t),a=e.getIn(["vega","isParsing"]);return{groupId:t,canDemonstrate:Boolean(!a&&p.view&&(n.xScaleName&&n.xFieldName||n.yScaleName&&n.yFieldName))}},function(e){return{addInteraction:t=>{const n=o.Interaction({groupId:t});e(r.addInteraction(n))}}})(class extends a.Component{render(){return this.props.canDemonstrate&&1!==this.props.groupId?a.createElement("ul",{className:"add-interactions"},a.createElement("li",{onClick:()=>this.props.addInteraction(this.props.groupId)},a.createElement(i.Icon,{glyph:d.select})," Interaction")):null}})},1293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(23),r=n(590),i=n(603),o=n(81),l=n(82),c={png:"canvas",svg:"svg"};t.Export=class extends a.Component{toImageURL(e){const t=r.exporter(),n=new s.View(s.parse(t),{renderer:c[e]});n.runAsync().then(()=>n.toImageURL(e).then(t=>i.download(t,e)))}toJSONURL(){const e=JSON.stringify(r.exporter(),null,2);return i.toBlob(e,"json")}toHTMLURL(){const e=JSON.stringify(r.exporter(),null,2),t=l.scaffold.replace("INJECT_SPEC",e);return i.toBlob(t,"html")}render(){return a.createElement("ul",null,a.createElement("li",null,a.createElement(o.Icon,{glyph:l.export})," Export",a.createElement("ul",null,a.createElement("li",{onClick:this.toImageURL.bind(null,"png")},"As PNG"),a.createElement("li",{onClick:this.toImageURL.bind(null,"svg")},"As SVG"),a.createElement("li",{onClick:this.toJSONURL},"As JSON"),a.createElement("li",{onClick:this.toHTMLURL},"As HTML"))))}}},1294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(423),i=n(603),o=n(81),l=n(82);t.Persist=s.connect(null,{hydrate:r.hydrate})(class extends a.Component{constructor(e){super(e),this.open=this.open.bind(this)}open(){return i.fopen("json",this.props.hydrate)}save(){const e=r.persist();return i.toBlob(JSON.stringify(e),"json")}render(){return a.createElement("ul",{className:"persist"},a.createElement("li",{onClick:this.open},a.createElement(o.Icon,{glyph:l.open,className:"open",width:"15"})),a.createElement("li",{onClick:this.save},a.createElement(o.Icon,{glyph:l.save,className:"save"})))}})},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(82),s=n(15),r=n(35),i=n(303),o=n(81);class l extends s.PureComponent{render(){const e=this.props;return s.createElement("ul",{className:"undo-redo"},s.createElement("li",{onClick:e.undo,className:e.canUndo?"":"grey"},s.createElement(o.Icon,{glyph:a.undo,className:"undo",width:"12",height:"12"})),s.createElement("li",{onClick:e.redo,className:e.canRedo?"":"grey"},s.createElement(o.Icon,{glyph:a.redo,className:"redo",width:"12",height:"12"})))}}t.BaseUndoRedo=l,t.UndoRedo=r.connect(function(e){const t=e.vis;return{canUndo:t.past.length>0,canRedo:t.future.length>0}},i.ActionCreators)(l)},1296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15),s=n(35),r=n(225),i=n(157),o=n(311),l=n(598),c=n(72);const d={addWidget:r.addWidget};t.default=s.connect(function(e){const t=o.getClosestGroupId(),n=i.getScaleInfoForGroup(e,t),a=e.getIn(["vega","isParsing"]),s=Boolean(!a&&c.view&&(n.xScaleName&&n.xFieldName||n.yScaleName&&n.yFieldName)),r=e.getIn(["inspector","dragging"]);return{dragging:r&&r.dsId?r:null,groupId:t,canDemonstrate:s}},d)(class extends a.Component{constructor(){super(...arguments),this.handleDragOver=(e=>(e.preventDefault&&e.preventDefault(),!1)),this.handleDrop=(()=>{this.props.addWidget(l.Widget({groupId:this.props.groupId,field:this.props.dragging.fieldDef,dsId:this.props.dragging.dsId}))})}render(){return this.props.dragging&&this.props.canDemonstrate?a.createElement("div",{className:"interaction-widget",onDragOver:e=>this.handleDragOver(e),onDrop:()=>this.handleDrop()},a.createElement("div",null,a.createElement("i",null,"Drop field to add query widget"))):null}})},1339:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const a=n(303),s=n(23),r=n(67),i=n(223),o=n(202),l=n(421),c=n(859);n(1535),n(1174),n(854),n(1175);const d=e.store=o.store,p=e.ctrl=n(72),u=n(1176);d.subscribe(u.createStoreListener(d,p)),d.dispatch(i.createScene(c.Scene())),d.dispatch(r.addMark(l.Mark("group",{_parent:1}))),n(1177),d.dispatch(a.ActionCreators.clearHistory()),e.vega=s}).call(this,n(121))},134:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40),s=a.getIn,r=a.getInVis,i=n(15),o=n(35),l=n(67),c=n(880),d=n(1237),p=n(1240);t.Property=o.connect(function(e,t){if(!t.primId)return{};const n=r(e,t.primType+"."+t.primId);let a,i;t.name&&(t.primType===c.PrimType.MARKS?(a="encode.update."+t.name,i=s(n,"from.data")):a=t.name);const o=s(n,a+".scale"),l=s(n,a+".field"),d=o&&r(e,"scales."+o+".name"),p=s(n,a);return{group:s(n,a+".group"),signal:s(n,a+".signal"),value:p||t.value,field:l,scale:o,srcField:!(!i||!l)&&r(e,"datasets."+i+"._schema."+l+".source"),scaleName:d,dragging:e.getIn(["inspector","dragging"])}},function(e,t){return{unbind:function(){e(l.resetMarkVisual(t.name,t.primId))}}})(class extends i.Component{constructor(e){super(e),this.state={dragOver:0}}render(){const e=this.props,t=e.name,n=e.label,a=e.type,s=e.scale,r=e.field,o=e.unbind;let l,c,u,m,g=this.state.dragOver;if(i.Children.forEach(e.children,function(e){const t=e&&e.props.className;"extra"===t?m=e:"control"===t?u=e:("label"===a||t&&-1!==t.indexOf("label"))&&(l=e)}),l=l||i.createElement("label",{htmlFor:t},n),c=s?i.createElement("div",{className:"scale",onClick:o},e.scaleName):null,!(u=r?i.createElement("div",{className:"field "+(e.srcField?"source":"derived"),onClick:o},r):u))switch(a){case"autocomplete":u=i.createElement(d.AutoComplete,{type:e.autoType,updateFn:e.onChange,value:e.value,dsId:e.dsId,primId:e.primId,primType:e.primType});break;default:u=i.createElement(p.FormInputProperty,Object.assign({},e))}m&&(m=i.createElement("div",{className:"extra"},m));const h="property"+(e.droppable&&e.dragging?" droppable":"")+(e.droppable&&g?" drag-over":"")+(e.firstChild?" first-child":"");return i.createElement("div",{className:h,onDragEnter:()=>this.setState({dragOver:++g}),onDragLeave:()=>this.setState({dragOver:--g})},l,i.createElement("div",{className:"control"},c,u),m)}})},141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(167);t.addDataset=function(e,n){return function(a,r){const i=e._id||s.assignId(a,r());e.transform.filter(e=>"identifier"===e.type).length>0||e.transform.push({type:"identifier",as:"_vgsid_"}),a(t.baseAddDataset(e.merge({_id:i}),n))}},t.baseAddDataset=a.createStandardAction("ADD_DATASET")(),t.deleteDataset=a.createStandardAction("DELETE_DATASET")(),t.changeFieldMType=a.createStandardAction("CHANGE_FIELD_MTYPE")(),t.sortDataset=a.createStandardAction("SORT_DATASET")(),t.summarizeAggregate=a.createStandardAction("SUMMARIZE_AGGREGATE")(),t.addTransform=a.createStandardAction("ADD_DATA_TRANSFORM")(),t.updateTransform=a.createStandardAction("UPDATE_DATA_TRANSFORM")()},1535:function(e,t){},157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(309),s=n(582),r=n(224);function i(e,t,n){const s=a.default(e);return s.marks=s.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.signals=p(e.signals,n)),e)),s}function o(e,t,n,s){return(e=a.default(e)).marks=e.marks.map(e=>e.name&&e.name===t&&"group"===e.type?h(e,e=>{if(e.name===n){for(let[t,n]of Object.entries(s))"encode"!==t&&(e[t]=n);if(s.encode&&s.encode.update)for(let[t,n]of Object.entries(s.encode.update)){const a=e.encode.update[t];a&&(Array.isArray(a)&&a.length?(a[0].test&&!n[0].test.includes(a[0].test)&&(n[0].test=n[0].test+" && "+a[0].test),n[0]=Object.assign(Object.assign({},a[0]),n[0])):n[0]=Object.assign(Object.assign({},n[0]),a)),e.encode.update[t]=n}}return e}):e),e}function l(e,t){return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.marks=e.marks.filter(e=>!(e.name&&e.name.startsWith("lyra_brush")))),e)),e}function c(e){const{xScaleName:t,yScaleName:n,xFieldName:a,yFieldName:s}=e;return{ifXElse:(e,n)=>t&&a?e:n,ifYElse:(e,t)=>n&&s?e:t,ifXY:e=>t&&a&&n&&s?e:""}}var d;function p(e,t){return e.filter(e=>t.every(t=>t.name!==e.name)).concat(t)}t.addDatasetsToScene=function(e,t,n){const s=a.default(e),r=s.data||(s.data=[]);return s.data=[...r,{name:`brush_store_${t}_${n}`},{name:`grid_store_${t}_${n}`},{name:`points_store_${t}_${n}`}],s},t.addInputsToScene=function(e,t,n,s,r,o,l){const{xScaleName:d,yScaleName:p,xFieldName:u,yFieldName:m}=r,{ifXElse:g,ifYElse:h,ifXY:f}=c(r);return e=i(e,t,[{name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]},{name:`key_modifier_${n}`,value:!s||!s.keycode,on:[{events:[{source:"window",type:"keydown"}],update:s&&s.keycode?`event.keyCode === ${s.keycode}`:l?"false":"true"},{events:[{source:"window",type:"keyup"}],update:s&&s.keycode?"false":"true"}]},{name:`mouse_x_${n}`,on:[{events:"mousemove",update:`key_modifier_${n} ? x(unit) : mouse_x_${n}`}]},{name:`mouse_y_${n}`,on:[{events:"mousemove",update:`key_modifier_${n} ? y(unit) : mouse_y_${n}`}]}]),d&&u&&(e=i(e,t,[{name:`mouse_${u}_${n}`,on:[{events:"mousemove",update:`key_modifier_${n} ? invert("${d}", mouse_x_${n}) : mouse_${u}_${n}`}]}])),p&&m&&(e=i(e,t,[{name:`mouse_${m}_${n}`,on:[{events:"mousemove",update:`key_modifier_${n} ? invert("${p}", mouse_x_${n}) : mouse_${m}_${n}`}]}])),e=i(e,t,[{name:`points_${n}`,update:`vlSelectionResolve("points_store_${t}_${n}")`},{name:`lyra_is_point_projecting_${n}`,init:"false"},{name:`lyra_points_tuple_${n}`,update:`lyra_is_point_projecting_${n} ? points_tuple_projected_${n} : points_tuple_${n}`},{name:`points_tuple_${n}`,on:[{events:[Object.assign({source:"scope",type:s&&"drag"!==s.mouse?s.mouse:"click"},s&&s.mouse&&"mouseover"===s.mouse&&s.nearest?{markname:`voronoi_${n}`}:{})],update:`datum && !datum.manipulator && item().mark.marktype !== 'group' ? (key_modifier_${n} ? {unit: "layer_0", fields: points_tuple_fields_${n}, values: [(item().isVoronoi ? datum.datum : datum)['_vgsid_']], datum: (item().isVoronoi ? datum.datum : datum)} : points_tuple_${n} ) : null`,force:!0},{events:[{source:"scope",type:"dblclick"}],update:"null"}]},{name:`points_tuple_projected_${n}`,on:[{events:[Object.assign({source:"scope",type:s&&"drag"!==s.mouse?s.mouse:"click"},s&&s.mouse&&"mouseover"===s.mouse&&s.nearest?{markname:`voronoi_${n}`}:{})],update:`datum && !datum.manipulator && item().mark.marktype !== 'group' ? (key_modifier_${n} ? {unit: "layer_0", fields: points_tuple_fields_${n}, values: [(item().isVoronoi ? datum.datum : datum)['_vgsid_']], datum: (item().isVoronoi ? datum.datum : datum)} : points_tuple_projected_${n} ) : null`,force:!0},{events:[{source:"scope",type:"dblclick"}],update:"null"}]},{name:`points_tuple_fields_${n}`,value:[{type:"E",field:"_vgsid_"}]},{name:`points_modify_${n}`,update:`modify("points_store_${t}_${n}", lyra_points_tuple_${n}, true, null)`}]),e=i(e,t,o.map(e=>({name:`point_${e}_${n}`,on:[{events:{signal:`lyra_points_tuple_${n}`},update:`lyra_points_tuple_${n} && lyra_points_tuple_${n}.datum ? lyra_points_tuple_${n}.datum["${e}"] : null`}]}))),e=i(e=function(e,t,n,s){const{ifXElse:r,ifYElse:i,ifXY:o}=c(s);return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.marks=[...e.marks,{name:`lyra_brush_brush_bg_${n}`,type:"rect",clip:!0,encode:{enter:{fill:{value:"#333"},fillOpacity:{value:.125}},update:{x:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},r({signal:`lyra_brush_x_${n}[0]`},{value:"0"})),{value:0}],y:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},i({signal:`lyra_brush_y_${n}[0]`},{value:"0"})),{value:0}],x2:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},r({signal:`lyra_brush_x_${n}[1]`},{signal:"width"})),{value:0}],y2:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},i({signal:`lyra_brush_y_${n}[1]`},{signal:"height"})),{value:0}]}}},{name:`lyra_brush_brush_${n}`,type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:{x:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},r({signal:`lyra_brush_x_${n}[0]`},{value:"0"})),{value:0}],y:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},i({signal:`lyra_brush_y_${n}[0]`},{value:"0"})),{value:0}],x2:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},r({signal:`lyra_brush_x_${n}[1]`},{signal:"width"})),{value:0}],y2:[Object.assign({test:`data("brush_store_${t}_${n}").length && data("brush_store_${t}_${n}")[0].unit === ""`},i({signal:`lyra_brush_y_${n}[1]`},{signal:"height"})),{value:0}],stroke:[{test:r(`lyra_brush_x_${n}[0] !== lyra_brush_x_${n}[1]`,"")+o(" && ")+i(`lyra_brush_y_${n}[0] !== lyra_brush_y_${n}[1]`,""),value:"white"},{value:null}]}}}]),e)),e}(e,t,n,r),t,[{name:`brush_x_start_${n}`,on:[{events:{signal:`lyra_brush_x_${n}`},update:`lyra_brush_x_${n}[0]`}]},{name:`brush_x_end_${n}`,on:[{events:{signal:`lyra_brush_x_${n}`},update:`lyra_brush_x_${n}[1]`}]},{name:`brush_y_start_${n}`,on:[{events:{signal:`lyra_brush_y_${n}`},update:`lyra_brush_y_${n}[0]`}]},{name:`brush_y_end_${n}`,on:[{events:{signal:`lyra_brush_y_${n}`},update:`lyra_brush_y_${n}[1]`}]},{name:g(`brush_${u}_${d}_start_${n}`,`brush_x_field_undefined_start_${n}`),on:[{events:{signal:g(`brush_${u}_${d}_${n}`,`brush_x_field_undefined_${n}`)},update:g(`brush_${u}_${d}_${n} && brush_${u}_${d}_${n}.length ? brush_${u}_${d}_${n}[0] : null`,"null")}]},{name:g(`brush_${u}_${d}_end_${n}`,`brush_x_field_undefined_end_${n}`),on:[{events:{signal:g(`brush_${u}_${d}_${n}`,`brush_x_field_undefined_${n}`)},update:g(`brush_${u}_${d}_${n} && brush_${u}_${d}_${n}.length ? brush_${u}_${d}_${n}[1] : null`,"null")}]},{name:h(`brush_${m}_${p}_start_${n}`,`brush_y_field_undefined_start_${n}`),on:[{events:{signal:h(`brush_${m}_${p}_${n}`,`brush_y_field_undefined_${n}`)},update:g(`brush_${m}_${p}_${n} && brush_${m}_${p}_${n}.length ? brush_${m}_${p}_${n}[0] : null`,"null")}]},{name:h(`brush_${m}_${p}_end_${n}`,`brush_y_field_undefined_end_${n}`),on:[{events:{signal:h(`brush_${m}_${p}_${n}`,`brush_y_field_undefined_${n}`)},update:g(`brush_${m}_${p}_${n} && brush_${m}_${p}_${n}.length ? brush_${m}_${p}_${n}[1] : null`,"null")}]},{name:`lyra_brush_is_x_encoding_${n}`,init:"false"},{name:`lyra_brush_is_y_encoding_${n}`,init:"false"},{name:`lyra_brush_x_${n}`,update:`lyra_brush_is_y_encoding_${n} ? [width, 0] : brush_x_${n}`},{name:`lyra_brush_y_${n}`,update:`lyra_brush_is_x_encoding_${n} ? [0, height] : brush_y_${n}`},{name:`brush_${n}`,update:`vlSelectionResolve("brush_store_${t}_${n}")`},{name:`grid_${n}`,update:`vlSelectionResolve("grid_store_${t}_${n}")`},{name:`brush_x_${n}`,value:[],on:[{events:{source:"scope",type:"mousedown",filter:[`!event.item || event.item.mark.name !== "lyra_brush_brush_${n}"`]},update:`key_modifier_${n} ? [x(unit), x(unit)] : brush_x_${n}`},{events:{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown",filter:[`!event.item || event.item.mark.name !== "lyra_brush_brush_${n}"`]},{source:"window",type:"mouseup"}]},update:`key_modifier_${n} ? [brush_x_${n}[0], clamp(x(unit), 0, width)] : brush_x_${n}`},{events:{signal:`brush_scale_trigger_${n}`},update:g(`isArray(brush_${u}_${d}_${n}) && length(brush_${u}_${d}_${n}) == 2 ? [scale("${d}", brush_${u}_${d}_${n}[0]), scale("${d}", brush_${u}_${d}_${n}[1])] : [0, 0]`,"[width, 0]")},{events:{signal:`brush_translate_delta_${n}`},update:`clampRange(panLinear(brush_translate_anchor_${n}.extent_x, brush_translate_delta_${n}.x / span(brush_translate_anchor_${n}.extent_x)), 0, width)`},{events:{signal:`brush_zoom_delta_${n}`},update:`clampRange(zoomLinear(brush_x_${n}, brush_zoom_anchor_${n}.x, brush_zoom_delta_${n}), 0, width)`},{events:[{source:"scope",type:"dblclick"}],update:"[0, 0]"}]},{name:g(`brush_${u}_${d}_${n}`,`brush_x_field_undefined_${n}`),on:g([{events:{signal:`lyra_brush_x_${n}`},update:`lyra_brush_x_${n}[0] === lyra_brush_x_${n}[1] ? null : invert("${d}", lyra_brush_x_${n})`}],[])},{name:`brush_y_${n}`,value:[],on:[{events:{source:"scope",type:"mousedown",filter:[`!event.item || event.item.mark.name !== "lyra_brush_brush_${n}"`]},update:`key_modifier_${n} ? [y(unit), y(unit)] : brush_y_${n}`},{events:{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown",filter:[`!event.item || event.item.mark.name !== "lyra_brush_brush_${n}"`]},{source:"window",type:"mouseup"}]},update:`key_modifier_${n} ? [brush_y_${n}[0], clamp(y(unit), 0, height)] : brush_y_${n}`},{events:{signal:`brush_scale_trigger_${n}`},update:h(`isArray(brush_${m}_${p}_${n}) && length(brush_${m}_${p}_${n}) == 2 ? [scale("${p}", brush_${m}_${p}_${n}[0]), scale("${p}", brush_${m}_${p}_${n}[1])] : [0, 0]`,"[0, height]")},{events:{signal:`brush_translate_delta_${n}`},update:`clampRange(panLinear(brush_translate_anchor_${n}.extent_y, brush_translate_delta_${n}.y / span(brush_translate_anchor_${n}.extent_y)), 0, height)`},{events:{signal:`brush_zoom_delta_${n}`},update:`clampRange(zoomLinear(brush_y_${n}, brush_zoom_anchor_${n}.y, brush_zoom_delta_${n}), 0, height)`},{events:[{source:"scope",type:"dblclick"}],update:"[0, 0]"}]},{name:h(`brush_${m}_${p}_${n}`,`brush_y_field_undefined_${n}`),on:h([{events:{signal:`lyra_brush_y_${n}`},update:`lyra_brush_y_${n}[0] === lyra_brush_y_${n}[1] ? null : invert("${p}", lyra_brush_y_${n})`}],[])},{name:`brush_scale_trigger_${n}`,value:{},on:[{events:[].concat(g([{scale:"x"}],[])).concat(h([{scale:"y"}],[])),update:g(`(!isArray(brush_${u}_${d}_${n}) || (+invert("${d}", lyra_brush_x_${n})[0] === +brush_${u}_${d}_${n}[0] && +invert("${d}", lyra_brush_x_${n})[1] === +brush_${u}_${d}_${n}[1]))`,"")+f(" && ")+h(`(!isArray(brush_${m}_${p}_${n}) || (+invert("${p}", lyra_brush_y_${n})[0] === +brush_${m}_${p}_${n}[0] && +invert("${p}", lyra_brush_y_${n})[1] === +brush_${m}_${p}_${n}[1]))`,"")+` ? brush_scale_trigger_${n} : {}`}]},{name:`brush_tuple_${n}`,on:[{events:[{signal:g(`brush_${u}_${d}_${n}`,"")+f(" || ")+h(`brush_${m}_${p}_${n}`,"")}],update:g(`brush_${u}_${d}_${n}`,"")+f(" && ")+h(`brush_${m}_${p}_${n}`,"")+` ? {unit: "", fields: brush_tuple_fields_${n}, values: [`+g(`brush_${u}_${d}_${n}`,"")+f(",")+h(`brush_${m}_${p}_${n}`,"")+"]} : null"}]},{name:`brush_tuple_fields_${n}`,value:[].concat(g([{field:u,channel:"x",type:"R"}],[])).concat(h([{field:m,channel:"y",type:"R"}],[]))},{name:`brush_translate_anchor_${n}`,value:{},on:[{events:[{source:"scope",type:"mousedown",markname:`lyra_brush_brush_${n}`}],update:`key_modifier_${n} ? {x: x(unit), y: y(unit), extent_x: slice(lyra_brush_x_${n}), extent_y: slice(lyra_brush_y_${n})} : brush_translate_anchor_${n}`}]},{name:`brush_translate_delta_${n}`,value:{},on:[{events:[{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown",markname:`lyra_brush_brush_${n}`},{source:"window",type:"mouseup"}]}],update:`key_modifier_${n} ? {x: brush_translate_anchor_${n}.x - x(unit), y: brush_translate_anchor_${n}.y - y(unit)} : brush_translate_delta_${n}`}]},{name:`brush_zoom_anchor_${n}`,on:[{events:[{source:"scope",type:"wheel",consume:!0,markname:`lyra_brush_brush_${n}`}],update:`key_modifier_${n} ? {x: x(unit), y: y(unit)} : brush_zoom_anchor_${n}`}]},{name:`brush_zoom_delta_${n}`,on:[{events:[{source:"scope",type:"wheel",consume:!0,markname:`lyra_brush_brush_${n}`}],force:!0,update:`key_modifier_${n} ? pow(1.001, event.deltaY * pow(16, event.deltaMode)) : brush_zoom_delta_${n}`}]},{name:`brush_modify_${n}`,update:`modify("brush_store_${t}_${n}", brush_tuple_${n}, true)`},{name:g(`grid_${u}_${d}_${n}`,`grid_x_field_undefined_${n}`),on:g([{events:{signal:`grid_translate_delta_${n}`},update:`panLinear(grid_translate_anchor_${n}.extent_x, -grid_translate_delta_${n}.x / width)`},{events:{signal:`grid_zoom_delta_${n}`},update:`zoomLinear(domain("${d}"), grid_zoom_anchor_${n}.x, grid_zoom_delta_${n})`},{events:[{source:"scope",type:"dblclick"}],update:"null"}],[])},{name:h(`grid_${m}_${p}_${n}`,`grid_y_field_undefined_${n}`),on:h([{events:{signal:`grid_translate_delta_${n}`},update:`panLinear(grid_translate_anchor_${n}.extent_y, grid_translate_delta_${n}.y / height)`},{events:{signal:`grid_zoom_delta_${n}`},update:`zoomLinear(domain("${p}"), grid_zoom_anchor_${n}.y, grid_zoom_delta_${n})`},{events:[{source:"scope",type:"dblclick"}],update:"null"}],[])},{name:`grid_tuple_${n}`,on:[{events:[{signal:g(`grid_${u}_${d}_${n}`,"")+f(" || ")+h(`grid_${m}_${p}_${n}`,"")}],update:g(`grid_${u}_${d}_${n}`,"")+f(" && ")+h(`grid_${m}_${p}_${n}`,"")+`? {unit: "", fields: brush_tuple_fields_${n}, values: [`+g(`grid_${u}_${d}_${n}`,"")+f(",")+h(`grid_${m}_${p}_${n}`,"")+"]} : null"}]},{name:`grid_translate_anchor_${n}`,value:{},on:[{events:[{source:"scope",type:"mousedown"}],update:`key_modifier_${n} ? {x: x(unit), y: y(unit)`+g(`, extent_x: domain("${d}")`,"")+h(`, extent_y: domain("${p}")`,"")+`} : grid_translate_anchor_${n}`}]},{name:`grid_translate_delta_${n}`,value:{},on:[{events:[{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown"},{source:"window",type:"mouseup"}]}],update:`key_modifier_${n} ? {x: grid_translate_anchor_${n}.x - x(unit), y: grid_translate_anchor_${n}.y - y(unit)} : grid_translate_delta_${n}`}]},{name:`grid_zoom_anchor_${n}`,on:[{events:[{source:"scope",type:"wheel",consume:!0}],update:`key_modifier_${n} ? {`+g(`x: invert("${d}", x(unit))`,"")+f(", ")+h(`y: invert("${p}", y(unit))`,"")+`} : grid_zoom_anchor_${n}`}]},{name:`grid_zoom_delta_${n}`,on:[{events:[{source:"scope",type:"wheel",consume:!0}],force:!0,update:`key_modifier_${n} ? pow(1.001, event.deltaY * pow(16, event.deltaMode)) : grid_zoom_delta_${n}`}]},{name:`grid_modify_${n}`,update:`modify("grid_store_${t}_${n}", grid_tuple_${n}, true)`}])},t.addSelectionToScene=function(e,t,n,a,s){switch(s.type){case"point":const r=(s=s).field;switch(e=i(e=l(e,t),t,[{name:`lyra_is_point_projecting_${n}`,init:r&&"_vgsid_"!==r?"true":"false"},{name:`points_tuple_projected_${n}`,on:[{events:[Object.assign({source:"scope",type:a&&"drag"!==a.mouse?a.mouse:"click"},a&&a.mouse&&"mouseover"===a.mouse&&a.nearest?{markname:`voronoi_${n}`}:{})],update:`datum && !datum.manipulator && item().mark.marktype !== 'group' ? (key_modifier_${n} ? {unit: "layer_0", fields: points_tuple_fields_${n}, values: [(item().isVoronoi ? datum.datum : datum)['${r||"_vgsid_"}']], datum: (item().isVoronoi ? datum.datum : datum)} : points_tuple_projected_${n} ) : null`,force:!0},{events:[{source:"scope",type:"dblclick"}],update:"null"}]},{name:`points_tuple_fields_${n}`,value:[Object.assign({type:"E",field:r||"_vgsid_"},s.encoding?{channel:s.encoding}:{})]}]),s.ptype){case"single":break;case"multi":e=i(e,t,[{name:`points_toggle_${n}`,value:!1,on:[{events:[Object.assign({source:"scope",type:a&&"drag"!==a.mouse?a.mouse:"click"},a&&a.mouse&&"mouseover"===a.mouse&&a.nearest?{markname:`voronoi_${n}`}:{})],update:"event.shiftKey"},{events:[{source:"scope",type:"dblclick"}],update:"false"}]}])}return e;case"interval":switch((s=s).encoding){case"x":return i(e,t,[{name:`lyra_brush_is_x_encoding_${n}`,init:"true"},{name:`lyra_brush_is_y_encoding_${n}`,init:"false"}]);case"y":return i(e,t,[{name:`lyra_brush_is_y_encoding_${n}`,init:"true"},{name:`lyra_brush_is_x_encoding_${n}`,init:"false"}]);default:return e}}},t.addApplicationToScene=function(e,t,n,s,r){const i="drag"===s.mouse;let c,d;switch(r.type){case"mark":c=(r=r).targetGroupName,d=r.targetMarkName;const s=r.unselectedValue;return e=o(e,c,d,{encode:{update:{[r.propertyName]:[{test:i?`!(length(data("brush_store_${t}_${n}"))) || (vlSelectionTest("brush_store_${t}_${n}", datum))`:`!(length(data("points_store_${t}_${n}"))) || (vlSelectionTest("points_store_${t}_${n}", datum))`},{value:s}]}}});case"scale":const p=(r=r).scaleInfo;return function(e,t,n){return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&e.scales.forEach(e=>{n.forEach(t=>{if(e.name===t.name)for(let[n,a]of Object.entries(t))"_axis"!==n&&(e[n]=a)})}),e)),e}(e=function(e,t){return(e=a.default(e)).marks=e.marks.map(e=>e.name&&e.name===t&&"group"===e.type?h(e,e=>(e.clip=!0,e)):e),e}(e=l(e,t),t),t,[{_axis:"x",name:p.xScaleName,domainRaw:{signal:`grid_${n}["${p.xFieldName}"]`},zero:!1},{_axis:"y",name:p.yScaleName,domainRaw:{signal:`grid_${n}["${p.yFieldName}"]`},zero:!1}]);case"transform":const u=(r=r).datasetName,m=u+"_filter_"+(c=r.targetGroupName);e=o(e,c,d=r.targetMarkName,{from:{data:m}});const{source:g,transform:f}=function e(t,n,a){const s=t.data.filter(e=>e.name===n)[0],r=a.concat(s.transform),i=r.map(e=>JSON.stringify(e)),o=r.filter((e,t)=>i.indexOf(JSON.stringify(e))===t);return s.source?e(t,s.source,o):{source:n,transform:o}}(e,u,[]);return e=function(e,t){const n=((e=a.default(e)).data||(e.data=[])).filter(e=>e.name!==t.name);return e.data=[...n,t],e}(e,{name:m,source:g,transform:[{type:"filter",expr:i?`!(length(data("brush_store_${t}_${n}"))) || (vlSelectionTest("brush_store_${t}_${n}", datum))`:`!(length(data("points_store_${t}_${n}"))) || (vlSelectionTest("points_store_${t}_${n}", datum))`},...f]})}},t.pushSignalsInScene=function(e,t,n){return e=a.default(e),n.forEach(n=>{n.push&&(e.signals=e.signals||[],e.signals=p(e.signals,[{name:n.signal}]),e.marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.signals=e.signals.map(e=>e.name===n.signal?Object.assign(Object.assign({},e),{push:"outer"}):e)),e)))}),e},t.addWidgetSelectionToScene=function(e,t,n){switch((e=a.default(e)).signals=e.signals||[],n.type){case"select":return e.signals=p(e.signals,[{name:`widget_${t.id}`,bind:Object.assign({name:t.field.name,input:"select"},m(t.field,t.dsId))}]),e;case"radio":return e.signals=p(e.signals,[{name:`widget_${t.id}`,bind:Object.assign({name:t.field.name,input:"radio"},m(t.field,t.dsId))}]),e;case"range":const s=m(t.field,t.dsId);return e.signals=p(e.signals,[{name:`widget_${t.id}`,bind:{name:t.field.name,input:"range",min:s.min,max:s.max,step:n.step||s.step}}]),e;default:return e}},t.addWidgetApplicationToScene=function(e,t,n,a){if(!n.selection)return e;const s=a.targetMarkName,r=a.unselectedValue;return o(e,t,s,{encode:{update:{[a.propertyName]:[{test:`datum.${n.field.name} ${n.selection.comparator} widget_${n.id}`},{value:r}]}}})},t.addVoronoiMark=function(e,t,n,s,r,i){return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&e.marks.find(e=>e.name===s)&&(e.marks=e.marks.filter(e=>e.name!==`voronoi_${r}`),e.marks=[...e.marks,{name:`voronoi_${r}`,type:"path",interactive:!0,from:{data:s},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:{expr:"y"===n?"0":"datum.datum.x || 0"},y:{expr:"x"===n?"0":"datum.datum.y || 0"},size:[{signal:"width"},{signal:"height"}]}]}]),e)),e},t.getFieldsOfGroup=function(e,t){const n=e.getIn(["vis","present","marks",String(t)]);let a=[];const s=g(e,n).find(e=>e.from&&e.from.data);if(s){const t=String(s.from.data);a=e.getIn(["vis","present","datasets",String(t)]).get("_schema").keySeq().toArray()}return a},t.getScaleInfoForGroup=function(e,t){const{scaleRecordX:n,scaleRecordY:a}=function(e,t){const n={scaleRecordX:null,scaleRecordY:null},a=e.getIn(["vis","present","marks",String(t)]).get("marks").map(t=>e.getIn(["vis","present","marks",String(t)]));if(!a.length)return n;const s=a[0];if(s.encode&&s.encode.update){if(s.encode.update.x){const{scale:t}=s.encode.update.x;n.scaleRecordX=e.getIn(["vis","present","scales",String(t)])}if(s.encode.update.y){const{scale:t}=s.encode.update.y;n.scaleRecordY=e.getIn(["vis","present","scales",String(t)])}}return n}(e,t);return{xScaleName:n?n.get("name"):null,xFieldName:n?n.get("_domain")[0].field:null,yScaleName:a?a.get("name"):null,yFieldName:a?a.get("_domain")[0].field:null}},function(e){e.CONTINUOUS="CONTINUOUS",e.DISCRETE="DISCRETE"}(d=t.ScaleSimpleType||(t.ScaleSimpleType={})),t.scaleTypeSimple=function(e){switch(e){case"linear":case"log":case"pow":case"sqrt":case"symlog":case"time":case"utc":case"sequential":return d.CONTINUOUS;case"ordinal":case"band":case"point":case"quantile":case"quantize":case"threshold":case"bin-ordinal":return d.DISCRETE}},t.cleanSpecForPreview=function(e,t,n,s,r){const i=a.default(e);return i.autosize="none",i.marks=i.marks.filter(()=>!0).map(e=>{var a,r,i,o,l,c;if(e.name&&"group"===e.type){const d=(null===(i=null===(r=null===(a=e.encode)||void 0===a?void 0:a.update)||void 0===r?void 0:r.width)||void 0===i?void 0:i.value)||640,p=(null===(c=null===(l=null===(o=e.encode)||void 0===o?void 0:o.update)||void 0===l?void 0:l.height)||void 0===c?void 0:c.value)||360,u=t/d,m=n/p;e.axes=e.axes.map(e=>Object.assign(Object.assign({},e),{title:"",labels:!1,ticks:!1,domain:!1})),e.legends=[],e.encode.update.x={value:0},e.encode.update.y={value:0},e.encode.update.width={signal:"width"},e.encode.update.height={signal:"height"},(e=h(e,e=>{var t,n,a,s,r,i,o,l,c,d,p,g,h,f,y,v,_,b,x,S,E;return"symbol"===e.type&&(null===(a=null===(n=null===(t=e.encode)||void 0===t?void 0:t.update)||void 0===n?void 0:n.size)||void 0===a?void 0:a.value)&&(e.encode.update.size.value*=(u+m)/2),"text"===e.type&&((null===(i=null===(r=null===(s=e.encode)||void 0===s?void 0:s.update)||void 0===r?void 0:r.fontSize)||void 0===i?void 0:i.value)&&(e.encode.update.fontSize.value/=2),(null===(c=null===(l=null===(o=e.encode)||void 0===o?void 0:o.update)||void 0===l?void 0:l.dx)||void 0===c?void 0:c.value)&&(e.encode.update.dx.value*=u),(null===(g=null===(p=null===(d=e.encode)||void 0===d?void 0:d.update)||void 0===p?void 0:p.dy)||void 0===g?void 0:g.value)&&(e.encode.update.dy.value*=m),(null===(y=null===(f=null===(h=e.encode)||void 0===h?void 0:h.update)||void 0===f?void 0:f.x)||void 0===y?void 0:y.value)&&(e.encode.update.x.value*=u),(null===(b=null===(_=null===(v=e.encode)||void 0===v?void 0:v.update)||void 0===_?void 0:_.y)||void 0===b?void 0:b.value)&&(e.encode.update.y.value*=m)),"line"===e.type&&(null===(E=null===(S=null===(x=e.encode)||void 0===x?void 0:x.update)||void 0===S?void 0:S.strokeWidth)||void 0===E?void 0:E.value)&&(e.encode.update.strokeWidth.value/=2),e})).name!==s&&(e.encode.update.x={value:-999},e.encode.update.y={value:-999}),e.scale=e.scales.map(e=>(e.range&&Array.isArray(e.range)&&2==e.range.length&&(e.range=e.range.map(e=>e/10)),e))}return e}),function(e,t,n){const s=a.default(e),r=u.map(e=>"width"===e.name||"height"===e.name?e:Object.assign(Object.assign({},e),{name:`${e.name}_${n}`}));return s.marks=s.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.signals=p(e.signals,r)),e)),s}(i,s,r)},t.editSignals=p;const u=[{name:"width",init:"75"},{name:"height",init:"75"},{name:"mouse_x",init:"null"},{name:"mouse_y",init:"null"},{name:"brush_x",init:"[0, 0]"},{name:"brush_y",init:"[0, 0]"},{name:"brush_zoom_anchor",init:"null"},{name:"brush_zoom_delta",init:"null"},{name:"grid_zoom_anchor",init:"null"},{name:"grid_zoom_delta",init:"null"},{name:"points_tuple",init:"null"},{name:"grid_translate_anchor",init:{}},{name:"grid_translate_delta",init:{}}];function m(e,t){const n=e.mtype;let a=r.output(t).map(t=>t[e.name]);if(n===s.NOMINAL||n===s.ORDINAL)return(a=[...new Set(a)]).length>50&&(a=a.slice(0,50)),{options:a};if(n===s.QUANTITATIVE||n===s.TEMPORAL){const e=(a=a.sort((e,t)=>e-t)).length,t=a.every(e=>Number.isInteger(e));return{max:a[e-1],min:a[0],step:t?1:.1}}}function g(e,t){return t?t.marks.map(n=>{const a=e.getIn(["vis","present","marks",String(n)]);return"group"===a.type?g(e,t):a}).filter(e=>!e.name.startsWith("lyra")):[]}function h(e,t){return(e=a.default(e)).marks=e.marks.map(e=>e.name&&e.name.startsWith("lyra")?e:"group"===e.type?h(e,t):t(e)),e}t.widgetParams=m,t.getNestedMarksOfGroup=g,t.mapNestedMarksOfGroup=h},158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(314),r=n(167),i=n(878);t.addInteraction=function(e){return function(n,a){const o=e.id||r.assignId(n,a());(e=e.set("id",o)).get("name")||(e=e.set("name",i.recordName(a(),"interactions","Interaction"))),n(t.baseAddInteraction(e,o)),n(s.addInteractionToGroup(o,e.groupId))}},t.baseAddInteraction=a.createStandardAction("ADD_INTERACTION")(),t.setInput=a.createStandardAction("SET_INPUT")(),t.setSelection=a.createStandardAction("SET_SELECTION")(),t.setApplication=a.createStandardAction("SET_APPLICATION")(),t.setSignals=a.createStandardAction("SET_INTERACTION_SIGNALS")(),t.setSignalPush=a.createStandardAction("SET_INTERACTION_SIGNAL_PUSH")(),t.removeApplication=a.createStandardAction("REMOVE_APPLICATION")(),t.deleteInteraction=a.createStandardAction("DELETE_INTERACTION")(),t.updateInteractionName=a.createStandardAction("UPDATE_INTERACTION_NAME")()},167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(852);t.assignId=function(e,t){const n=t.getIn(["lyra","idCounter"]);return e(a.incrementCounter()),n}},168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),s=n(221);t.propSg=function(e,t,n){return s(t+"_"+e+"_"+n)},t.convertValuesToSignals=function(e,n,s,r){return e?Object.keys(e).reduce(function(e,i){return void 0===e[i]||void 0===e[i].value?e:(e[i]=a.extend({},{signal:t.propSg(s,n,r?r+"_"+i:i)},e[i]._disabled?{_disabled:!0}:{}),e)},e):e}},201:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(167);t.addGuide=function(e){return function(n,a){const r=e._id||s.assignId(n,a());n(t.baseAddGuide(e.merge({_id:r}),r))}},t.baseAddGuide=a.createStandardAction("ADD_GUIDE")(),t.deleteGuide=a.createStandardAction("DELETE_GUIDE")(),t.updateGuideProperty=a.createStandardAction("UPDATE_GUIDE_PROPERTY")()},202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(612),r=n(1096),i=n(1097),o=n(877),l=n(268),c=n(90),d=n(599),p=n(879),u=n(597),m=a.Record({vis:{past:[],present:a.Map({pipelines:a.Map(),datasets:a.Map(),scene:a.Map(),scales:a.Map(),guides:a.Map(),marks:a.Map(),interactions:a.Map(),widgets:a.Map(),signals:c.defaultSignalState}),future:[]},vega:d.VegaReparse(),lyra:u.LyraGlobals(),inspector:l.Inspector(),walkthrough:p.Walkthrough(),hints:o.Hints()},"LyraState");var g;t.defaultState=m(),t.store=(g=t.defaultState,s.createStore(i.default,g,s.applyMiddleware(r.default)))},221:function(e,t,n){"use strict";n(854);e.exports=function(e){return e.startsWith("lyra_")?e:"lyra_"+e}},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/\s/g,"_")}},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(420),r=n(67),i=n(167),o=n(40).getInVis;t.createScene=function(e){return function(n,a){const s=e._id||i.assignId(n,a());n(t.baseCreateScene({props:e.merge({_id:s}),name:"Scene"},s))}},t.baseCreateScene=a.createStandardAction("CREATE_SCENE")(),t.clearScene=function(){return function(e,t){const n=t(),a=o(n,"scene._id"),i=o(n,"marks."+a+".marks");s.batchGroupBy.start(),i.forEach(function(t){e(r.deleteMark(t))}),s.batchGroupBy.end()}}},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(23),r=n(202),i=n(372),o=n(582),l={boolean:o.NOMINAL,number:o.QUANTITATIVE,integer:o.QUANTITATIVE,date:o.TEMPORAL,string:o.NOMINAL},c=n(424),d=(n(1124),n(40).getInVis);let p={};function u(e,t){const n=e._id;if(p[n])return p[n];t?p[n]=t:void 0!==e.source?p[n]=p[e.source]:p[n]=null}function m(){p={}}function g(e){return arguments.length?p=e:p}function h(e){return p[e]||[]}function f(e){const t=n(72),a=function(e){return d(r.store.getState(),"datasets."+e)}(e);return a&&t.view&&t.view.data(a.name)||h(e)||[]}function y(e){const t={parse:"auto",type:null};let n;try{return t.type="json",{format:t,values:c.read(e,t)}}catch(a){if(t.type="csv",n=c.read(e,t),Object.keys(n[0]).length>1)return{format:t,values:n};if(t.type="tsv",n=c.read(e,t),Object.keys(n[0]).length>1)return{format:t,values:n};throw Error("Raw data is in an unsupported format. Only JSON, CSV, or TSV may be imported.")}}function v(e){if(c.isNumber(e))throw Error("Dataset schemas are now available in the store.");if(c.isArray(e)){const t=c.type.inferAll(e);return c.keys(t).reduce(function(e,n){return e.set(n,i.Column({name:n,type:t[n],mtype:l[t[n]],source:!0}))},a.Map())}throw Error("Expected an array of raw values.")}function _(e,t){const n=t.groupby.reduce((t,n)=>t.set(n,e.get(n)),a.Map());return s.array(t.as).reduce((e,t)=>e.set(t,i.Column({name:t,type:"number",mtype:l.number,source:!1})),n)}t.init=u,t.reset=m,t.persist=g,t.input=h,t.output=f,t.parseRaw=y,t.schema=v,t.aggregateSchema=_,e.exports={init:u,reset:m,persist:g,input:h,output:f,parseRaw:y,schema:v,aggregateSchema:_}},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(314),r=n(167),i=n(878);t.addWidget=function(e){return function(n,a){const o=e.id||r.assignId(n,a());(e=e.merge({id:o})).get("name")||(e=e.set("name",i.recordName(a(),"widgets","Widget"))),n(t.baseAddWidget(e,o)),n(s.addWidgetToGroup(o,e.groupId))}},t.baseAddWidget=a.createStandardAction("ADD_WIDGET")(),t.setSelection=a.createStandardAction("SET_WIDGET_SELECTION")(),t.setApplication=a.createStandardAction("SET_WIDGET_APPLICATION")(),t.removeApplication=a.createStandardAction("REMOVE_WIDGET_APPLICATION")(),t.setSignals=a.createStandardAction("SET_WIDGET_SIGNALS")(),t.deleteWidget=a.createStandardAction("DELETE_WIDGET")(),t.updateWidgetName=a.createStandardAction("UPDATE_WIDGET_NAME")()},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47);t.initSignal=a.createStandardAction("INIT_SIGNAL")(),t.setSignal=a.createStandardAction("SET_SIGNAL")(),t.setSignalStreams=a.createStandardAction("SET_SIGNAL_STREAMS")(),t.unsetSignal=a.createStandardAction("UNSET_SIGNAL")()},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(266),s=n(202),r=n(90),i=n(221),o=n(40).getInVis;function l(){return o(s.store.getState(),"signals").toJS()}function c(e){return r.signalNames.includes(e)}t.api=l,l.init=function(e,t){s.store.dispatch(a.initSignal(t,e))},l.reference=function(e){return{signal:i(e)}},l.isDefault=c,l.get=function(e){let t,a=n(72).view,r=function(e){return o(s.store.getState(),"signals."+i(e))}(e);return a&&"function"==typeof a.signal&&(t=a.signal(i(e))),t||r.get("value")},l.set=function(e,t,r){void 0===r&&(r=!0);const o=n(72).view;c(e)||!1===r||s.store.dispatch(a.setSignal(t,e)),o&&"function"==typeof o.signal&&o.signal(i(e),t)},l.delete=function(e){s.store.dispatch(a.unsetSignal(null,e))},l.streams=function(e,t){s.store.dispatch(a.setSignalStreams(e,t))},t.default=l,window.sg=l},268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.EncodingState=a.Record({selectedId:null,selectedType:null,expandedLayers:{}},"LyraEncodingState"),t.FieldDraggingState=a.Record({dsId:null,fieldDef:null},"LyraFieldDraggingState"),t.SignalDraggingState=a.Record({interactionId:null,signal:null},"LyraSignalDraggingState"),t.ScaleDraggingState=a.Record({scaleId:null,fieldName:null},"LyraScaleDraggingState"),t.Inspector=a.Record({pipelines:{selectedId:null},encodings:t.EncodingState(),dragging:null},"LyraInspector")},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),s=n(90),r=n(309),i=n(222),o=n(221);t.default=function(e,t){const n=`${i.default(e.name)}_manipulators`,a=`peek(data("${n}"))`,r=Object.keys(e.encode.update).filter(e=>"text"!==e).map(t=>e.encode.update[t]).filter(e=>e&&!!e.signal).map(e=>({signal:e.signal}));return[t,{type:"group",data:[{name:n,transform:[{type:o("manipulators_"+e.type),lyra_id:e._id,lyra_selected:{signal:s.SELECTED},lyra_mode:{signal:s.MODE},signals:r},{type:"window",ops:["min","max","min","max"],fields:["x","x","y","y"]}]},{name:"voronoi",source:n,transform:[{type:"voronoi",x:"x",y:"y",as:"lyra_cell_path",extent:[{signal:`data("${n}")[0] ? [${a}.min_x - 100, ${a}.min_y - 50] : [0, 0]`},{signal:`data("${n}")[0] ? [${a}.max_x + 100, ${a}.max_y + 50] : [0, 0]`}]}]},d("handle",n),d("connector",n),d("arrow",n),d("span",n),d("border",n)],marks:[m,g,h("arrow"),h("span"),u(t),p]}]},t.LARGE=40,t.SMALL=20,t.PADDING=7,t.ARROWHEAD=7,t.coords=function(e,t){const n={topLeft:{x:e.x1,y:e.y1,cursor:"nw-resize"},topCenter:{x:e.x1+e.width()/2,y:e.y1,cursor:"n-resize"},topRight:{x:e.x2,y:e.y1,cursor:"ne-resize"},midLeft:{x:e.x1,y:e.y1+e.height()/2,cursor:"w-resize"},midCenter:{x:e.x1+e.width()/2,y:e.y1+e.height()/2,cursor:"move"},midRight:{x:e.x2,y:e.y1+e.height()/2,cursor:"e-resize"},bottomLeft:{x:e.x1,y:e.y2,cursor:"sw-resize"},bottomCenter:{x:e.x1+e.width()/2,y:e.y2,cursor:"s-resize"},bottomRight:{x:e.x2,y:e.y2,cursor:"se-resize"}};if(t)for(const[s,r]of Object.entries(n))n[s]=a.extend({},{size:l(e),key:s,manipulator:t},r);return n};const l=e=>e.width()<t.SMALL||e.height()<t.SMALL?t.SMALL:t.LARGE,c=(e,t)=>[Object.assign({test:`${s.CELL}.key === datum.key`},e),t],d=(e,t)=>({name:e,source:t,transform:[{type:"filter",expr:`datum.manipulator === "${e}"`}]}),p={type:"path",from:{data:"voronoi"},role:s.CELL,encode:{update:{path:{field:"lyra_cell_path"},key:{field:"key"},tooltip:{field:"tooltip"},strokeWidth:{value:.35},stroke:{value:"transparent"},fill:[{test:'datum.manipulator === "handle"',value:null},{value:"transparent"}]},hover:{cursor:[{test:'datum.manipulator === "handle"',field:"cursor"},{value:null}]}}};function u(e){const t=r.default(e.encode.update),n=e.type,a="line"===n||"area"===n;for(const e of Object.keys(t))t[e]={field:e};return delete t.fill,t.stroke=c({value:"lightsalmon"},{value:"cyan"}),t.strokeWidth={value:"text"===n?1:3},a&&(delete t.x,delete t.y,t.path={field:"path"}),{type:a?"path":n,role:"border",from:{data:"border"},encode:{update:t}}}const m={type:"symbol",from:{data:"handle"},role:"handle",encode:{update:{x:{field:"x"},y:{field:"y"},shape:{value:"square"},size:{field:"size"},fill:{value:"white"},stroke:{value:"black"},strokeWidth:{value:.5}},hover:{cursor:{field:"cursor"}}}},g={type:"symbol",from:{data:"connector"},role:"connector",encode:{update:{x:{field:"x"},y:{field:"y"},shape:{value:"diamond"},size:{field:"size"},fill:{value:"white"},stroke:c({value:"lightsalmon"},{value:"cyan"}),strokeWidth:{value:.5}}}},h=e=>({type:"group",role:e,from:{facet:{data:e,name:"facet",groupby:"key"}},marks:[{type:"line",from:{data:"facet"},encode:{update:{x:{field:"x"},y:{field:"y"},fill:c({value:"lightsalmon"},{value:"cyan"}),stroke:c({value:"lightsalmon"},{value:"cyan"}),strokeWidth:{value:3}}}}]});t.BUBBLE_CURSOR={type:"line",from:{data:"bubble_cursor"},interactive:!1,encode:{update:{x:{field:"x"},y:{field:"y"},fill:{value:"lightsalmon"},fillOpacity:{value:.2}}}},t.BUBBLE_CURSOR_TIP=[{type:"text",interactive:!1,encode:{update:{x:{signal:`${s.MOUSE}.x`},y:{signal:`${s.MOUSE}.y`},dy:{value:35},text:{signal:`${s.CELL}.tooltip`},align:{value:"center"},baseline:{value:"bottom"},stroke:{value:"white"},strokeWidth:{value:4},fontSize:{value:12},fontFamily:{value:"Lato"},fontWeight:{value:"bold"}}}},{type:"text",interactive:!1,encode:{update:{x:{signal:`${s.MOUSE}.x`},y:{signal:`${s.MOUSE}.y`},dy:{value:35},text:{signal:`${s.CELL}.tooltip`},align:{value:"center"},baseline:{value:"bottom"},fill:{value:"lightsalmon"},fontSize:{value:12},fontFamily:{value:"Lato"},fontWeight:{value:"bold"}}}}]},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s={x:"bottom",y:"left"};var r;!function(e){e.Axis="axis",e.Legend="legend"}(r=t.GuideType||(t.GuideType={})),function(e){e.fill="fill",e.opacity="opacity",e.shape="shape",e.size="size",e.stroke="stroke",e.strokeDash="strokeDash"}(t.LegendForType||(t.LegendForType={})),t.Axis=a.Record({_gtype:r.Axis,_id:null,orient:null,scale:null,tickCount:null,tickSize:null,grid:!1,title:null,zindex:0,encode:{}},"LyraAxis"),t.Legend=a.Record({_id:null,_type:null,_gtype:r.Legend,fill:null,opacity:null,shape:null,size:null,stroke:null,strokeWidth:null,strokeDash:null,symbolFillColor:"#ffffff",symbolOpacity:1,strokeColor:"#ffffff",encode:{}},"LyraLegend"),t.Guide=function(e,n,a){const i=a._id?String(a._id):String(a);return e===r.Axis?t.Axis({orient:s[n],scale:i}):e===r.Legend?t.Legend({_type:n,[n]:i,encode:{}}):void 0},t.isAxis=function(e){return e&&e._gtype===r.Axis},t.isLegend=function(e){return e&&e._gtype===r.Legend}},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return JSON.parse(JSON.stringify(e))}},310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(592),s=n(303),r=n(47),i=n(92),o=n(67),l=n(202),c=n(90),d=n(311),p=n(267),u=(n(1140),n(72));e.exports={onSignal:h,offSignal:f,onSignalInGroup:v,offSignalInGroup:_,setSignalInGroup:b,getSignalInGroup:x,register:S};const m={},g={};function h(e,t){return m[e]=m[e]||[],m[e].push(t),u.view&&u.view.addSignalListener(e,t),u}function f(e,t){m[e]=m[e]||[];const n=m[e];for(let e=n.length;--e>=0;)t&&n[e]!==t||n.splice(e,1);return u.view&&u.view.removeSignalListener(e,t),u}function y(e,t,n){const a=e._scenegraph.root.items[0];for(const e of a.items)if(e.name&&"group"===e.marktype&&e.name===t&&e.items&&e.items.length){const t=e.items[0].context.signals;for(const e of Object.keys(t))if(e===n)return t[e]}return null}function v(e,t,n,a){const s=y(e,t,n);if(s){const r=function(){a(n,s.value)};r.handler=a,g[t]=g[t]||{},g[t][n]=g[t][n]||[],g[t][n].push({operator:s,handler:r}),e.on(s,null,r)}}function _(e,t,n,a){if(y(e,t,n)){g[t]=g[t]||{},g[t][n]=g[t][n]||[];const e=g[t][n];for(let t=e.length;--t>=0;)a&&e[t].handler!==a||(e[t].operator._targets.remove(a),e.splice(t,1))}}function b(e,t,n,a){const s=y(e,t,n);e.update(s,a),e.runAsync()}function x(e,t,n){const a=y(e,t,n);return a?a.value:null}function S(){const e=a.select(window);e.on("dragover.altchan")||e.on("dragover.altchan",function(){const e=p.default.get(c.MODE),t=a.event.shiftKey,n="channels"===e,s="altchannels"===e;(n||s)&&(n&&t?(p.default.set(c.MODE,"altchannels"),u.update()):s&&!t&&(p.default.set(c.MODE,"channels"),u.update()))}),u.view&&(u.view.addSignalListener(c.SELECTED,function(e,t){const n=t.mark.role,a=n&&+n.split("lyra_")[1],s=l.store.getState(),r=s.getIn(["inspector","encodings","selectedId"]),o=s.getIn(["inspector","encodings","selectedType"]);if(r===a||o===i.InspectorSelectedType.SELECT_INTERACTION)return;const c=d.getParentGroupIds(a,s);a&&(l.store.dispatch(i.baseSelectMark(a,c)),l.store.dispatch(i.expandLayers(c)))}),Object.keys(m).forEach(function(e){u.view._signals[e]?m[e].forEach(function(t){u.view.addSignalListener(e,t)}):m[e]=[]}),Object.keys(g).forEach(function(e){Object.keys(g[e]).forEach(function(t){y(u.view,e,t)?g[e][t].forEach(function(e){u.view.on(e.operator,null,e.handler)}):g[e][t]=[]})}))}function E(e){const t=e.srcElement||e.target,n=t.tagName.toUpperCase();return("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable)&&(!t.readOnly&&!t.disabled)}a.select(window).on("keydown",function(){const e=a.event;window._inputKeyboard={keycode:e.keyCode,_key:e.key},function(e){const t=e.keyCode;if(!E(e)&&!0===e.metaKey||!0===e.ctrlKey){if(89===t)return l.store.dispatch(s.ActionCreators.redo()),e.preventDefault(),!1;if(90===t)l.store.dispatch(e.shiftKey?s.ActionCreators.redo():s.ActionCreators.undo()),e.preventDefault()}}(e),function(e){if(!E(e)&&8===e.keyCode){const t=l.store.getState(),n=t.getIn(["inspector","encodings"]),a=n.get("selectedType"),s=n.get("selectedId"),c=t.getIn(["vis","present","marks",String(s),"_parent"]);if(a===r.getType(i.baseSelectMark))e.preventDefault(),l.store.dispatch(i.selectMark(c)),l.store.dispatch(o.deleteMark(s))}}(e)}).on("keyup",function(){window._inputKeyboard=null}).on("beforeunload",function(){{const e="You have unsaved changed in Lyra.";return a.event.returnValue=e,e}}),t.onSignal=h,t.offSignal=f,t.onSignalInGroup=v,t.offSignalInGroup=_,t.setSignalInGroup=b,t.getSignalInGroup=x,t.registerSignalListeners=S},311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(202),s=n(30).Bounds,r=n(40).getInVis;function i(e,t){return t=t||a.store.getState(),r(t,"marks."+e._parent)||null}function o(e,t){if(!e)return[];let n=e.get("_parent")&&i(e,t);if(!n)return[];const a=[n];for(;n&&n._parent;)(n=i(n,t))&&a.push(n);return a}function l(e){return e.reduce(function(e,t){return"group"===t.get("type")&&e.push(t.get("_id")),e},[])}function c(e,t){return t=t||a.store.getState(),l(o(r(t,"marks."+e),t))}function d(e,t){t=t||a.store.getState();const n=e||t.getIn(["inspector","encodings","selectedId"]);let s=r(t,"marks."+n);if(!s){const e=t.getIn(["vis","present","interactions",String(n)]);if(e&&e.groupId)return e.groupId;const a=t.getIn(["vis","present","widgets",String(n)]);return a&&a.groupId?a.groupId:r(t,"scene._id")}return"group"===s.get("type")||"scene"===s.get("type")?s.get("_id"):d(s.get("_parent"),t)}t.getParentGroupIds=c,t.getClosestGroupId=d,e.exports={getParent:i,getParentGroupIds:c,getParents:o,getGroupIds:l,getClosestGroupId:d,findInItemTree:function(e,t){const n=document.querySelector(".vis-container"),a={x:0,y:0};let r,i,o,l=+Number.MAX_VALUE,c=+Number.MAX_VALUE;for(let n=t.length-1;n>=0;--n){const s=t[n];a.x+=+e.x||0,a.y+=+e.y||0;for(let t=e.items,n=0,a=t.length;n<a&&null===(e=(o=t[n].role)&&+o.split("lyra_")[1]===s?t[n].items[0]:null);++n);if(null===e)break}const d=new s({x1:n.scrollLeft,x2:300+n.scrollLeft,y1:n.scrollTop,y2:200+n.scrollTop});if(e&&e.mark.items.length>1)for(let t=0,n=e.mark.items,a=n.length;t<a;++t){const a=(e=n[t]).bounds,s=a&&(a.x1<l||a.y1<c);if(!a)break;if(d.encloses(a)){i=r=null;break}d.intersects(a)&&s?(r=e,l=a.x1,c=a.y1):s&&(i=e,l=a.x1,c=a.y1)}return r||i||e}}},312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(40).getInVis;const a=n(47),s=n(372),r=n(581),i=n(224),o=n(141),l=n(92),c=n(167);t.addPipeline=function(e,n,a){return function(s,r){const i=e._id||c.assignId(s,r()),d=c.assignId(s,r()),p=n.merge({_id:d,name:`${e.name}_source_${d}`,_parent:i});s(o.addDataset(p,a)),s(t.baseAddPipeline(e.merge({_id:i,_source:d}),i)),s(l.selectPipeline(i))}},t.derivePipeline=function(e){return function(n,a){const i=a(),d=i.getIn(["vis","present","pipelines",String(e)]),p=d._source,u=i.getIn(["vis","present","datasets",String(p),"_schema"]),m=c.assignId(n,a()),g=c.assignId(n,a()),h=s.Dataset({_id:m,name:d.get("name")+"_derived_"+m,source:String(p),transform:[],_schema:u,_parent:g}),f=r.Pipeline({_id:g,name:`${d.name}_derived`,_source:m});n(t.baseAddPipeline(f,g)),n(o.addDataset(h,null)),n(l.selectPipeline(g))}},t.aggregatePipeline=function(e,n){return function(a,r){const l=r(),d=l.getIn(["vis","present","pipelines",String(e)]),p=d._source,u=l.getIn(["vis","present","datasets",String(p),"_schema"]),m=i.aggregateSchema(u,n),g=n.groupby.join("|"),h=c.assignId(a,r()),f=s.Dataset({_id:h,name:d.get("name")+"_groupby_"+g,source:String(p),transform:[n],_schema:m,_parent:e});a(o.addDataset(f,null)),a(t.baseAggregatePipeline({dsId:n._id=h,key:g},e))}},t.baseAddPipeline=a.createStandardAction("ADD_PIPELINE")(),t.baseAggregatePipeline=a.createStandardAction("AGGREGATE_PIPELINE")(),t.updatePipelineProperty=a.createStandardAction("UPDATE_PIPELINE_PROPERTY")()},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(167);t.addScale=function(e){return function(n,a){const r=e._id||s.assignId(n,a());n(t.baseAddScale(e.merge({_id:r}),r))}},t.baseAddScale=a.createStandardAction("ADD_SCALE")(),t.updateScaleProperty=a.createStandardAction("UPDATE_SCALE_PROPERTY")(),t.amendDataRef=a.createStandardAction("AMEND_DATA_REF")(),t.deleteScale=a.createStandardAction("DELETE_SCALE")()},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47);t.addScaleToGroup=a.createStandardAction("ADD_SCALE_TO_GROUP")(),t.addAxisToGroup=a.createStandardAction("ADD_AXIS_TO_GROUP")(),t.addLegendToGroup=a.createStandardAction("ADD_LEGEND_TO_GROUP")(),t.addInteractionToGroup=a.createStandardAction("ADD_INTERACTION_TO_GROUP")(),t.addWidgetToGroup=a.createStandardAction("ADD_WIDGET_TO_GROUP")()},315:function(e,t,n){"use strict";var a=n(15),s=n(378),r=n(116),i=n(602)({displayName:"ContentEditable",propTypes:{value:r.oneOfType([r.string,r.number]),save:r.func},getInitialState:function(){return{edit:!1}},componentDidMount:function(){this._el=s.findDOMNode(this)},componentDidUpdate:function(){this.state.edit&&this._el.focus()},componentWillUnmount:function(){this._el=null},start:function(){this.setState({edit:!0})},stop:function(){this.setState({edit:!1}),this.props.save&&this.props.save(this._el.textContent.trim())},handleEnter:function(e){(!e.keyCode||e.keyCode&&13===e.keyCode)&&this._el.blur()},render:function(){var e=this.props;return a.createElement("div",{style:e.style,className:(e.className||"")+" content-editable",contentEditable:this.state.edit,onClick:e.onClick||this.start,onDoubleClick:e.onDoubleClick||this.start,onBlur:this.stop,onKeyDown:this.handleEnter},e.value)}});e.exports=i},369:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),s=n(90),r=n(222);t.default=function(e,t,n){const i=`${s.ANCHOR}.target`;let o=`(${s.ANCHOR} && ${i} && ${i}.datum && `;return`${o+=n?`${i}.datum.mode === ${a.stringValue(t)}  && `+`${i}.datum.lyra_id === ${e._id} && `+`test(regexp(${a.stringValue(n)}, "i"), ${i}.datum.key)`:`${i}.mark && ${i}.mark.name === ${a.stringValue(r.default(e.name))}`})`}},370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return"if("+e+","+t+","+n+")"}},372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.Column=a.Record({name:null,type:null,mtype:null,source:null},"ColumnDescription"),t.Dataset=a.Record({_id:null,_parent:null,_schema:null,name:null,source:null,transform:[]},"LyraDataset")},373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.PointSelection=a.Record({type:"point",ptype:null,id:null,label:null,field:null,encoding:null},"LyraPointSelection"),t.IntervalSelection=a.Record({type:"interval",id:null,label:null,encoding:null},"LyraIntervalSelection"),t.MarkApplication=a.Record({type:"mark",id:null,label:null,targetGroupName:null,targetMarkName:null,propertyName:null,unselectedValue:null},"LyraMarkApplication"),t.ScaleApplication=a.Record({type:"scale",id:null,label:null,scaleInfo:null},"LyraScaleApplication"),t.TransformApplication=a.Record({type:"transform",id:null,label:null,targetGroupName:null,targetMarkName:null,datasetName:null},"LyraTransformApplication"),t.Interaction=a.Record({id:null,name:null,groupId:null,input:null,selection:null,applications:[],signals:[]},"LyraInteraction")},376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1142),s=n(420),r=n(309),i=n(67),o=n(1144),l=n(1145),c=n(1146),d=n(1147),p=n(1148),u=n(595),m=n(40).getInVis,g=n(224),h={rect:"bar",symbol:"circle",text:"text",line:"line",area:"area"};function f(e){switch(e){case"x":case"x+":case"x2":case"width":return"x";case"y":case"y+":case"y2":case"height":return"y";case"fill":case"stroke":return"color";case"size":case"text":case"detail":return e}}t.CELLW=517,t.CELLH=392,t.default=function(e,n,u,v){return function(_,b){const x=b(),S=m(x,"marks."+u),E=S.type,w=function(e){return e._vlUnit||{mark:h[e.type],data:{values:[]},encoding:{},config:{}}}(S),k=(T=w)._lyraMap||(T._lyraMap={data:{},scales:{},axes:{},legends:{},marks:{}}),I=f(v),$=m(x,"datasets."+e+"._parent");var T;const N=S.from;if(N&&N.data&&m(x,`datasets.${N.data}._parent`)!==$)throw Error("Mark and field must be from the same pipeline.");s.batchGroupBy.start(),w.encoding[I]=function(e){const t=e.name,n=e.aggregate,a=e.bin,s={type:e.mtype};let r;return n||(r=y.agg.exec(t))?s.aggregate=r?r[1]:n:(a||(r=y.bin.exec(t)))&&(s.bin=!0),s.field=r?r[2]:t,s}(n);const O=function(e,n,s){return(e=r.default(e)).data.values=g.output(s),e.config.view={width:t.CELLW,height:t.CELLH},e.config.mark={filled:"fill"===n},{input:e,output:a.compile(e).spec}}(w,v,e);O.map=k,O.mark=S,O.markId=u,O.markType=E,O.property=v,O.channel=I,O.dsId=e,O.plId=$,l.default(_,x,O),p.default(_,x,O),d.default(_,x,O),o.default(_,x),c.default(_,b(),O),_(i.setVlUnit(w,u)),s.batchGroupBy.end()}},t.channelName=f;const y={agg:new RegExp("^("+u.join("|")+")_(.*?)$"),bin:new RegExp("^(bin)_(.*?)(_start|_mid|_end)$")}},40:function(e,t,n){"use strict";var a=n(44);function s(e){return""+e}function r(e){return e.split(".")}function i(e,t){if(e)return e.getIn(r(t))}function o(e,t,n){return e.setIn(r(t),n)}e.exports={get:function(e,t){if(e)return e.get(s(t))},set:function(e,t,n){return e.set(s(t),n)},getIn:i,getInVis:function(e,t){return i(e.get("vis").present,t)},setIn:o,deleteKeyFromMap:function(e,t){return e.delete(s(t))},ensureValuePresent:function(e,t,n){var s=i(e,t);return s&&a.List.isList(s)&&s.indexOf(n)<0?o(e,t,s.push(n)):e},ensureValueAbsent:function(e,t,n){var s=i(e,t);return s&&a.List.isList(s)&&s.indexOf(n)>=0?o(e,t,s.filter(function(e){return e!==n})):e},str:s}},420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(303),s=n(47),r=n(141),i=n(201),o=n(266);t.batchGroupBy={_group:[],start(){return this._group.push(Date.now())},end(){return this._group.pop()},init(e){const t=a.groupByActionTypes(e);return e=>this._group.length?this._group.join("|"):t(e)}},t.default={limit:15,filter:function(e){return e.type!==s.getType(r.baseAddDataset)},groupBy:t.batchGroupBy.init([s.getType(o.setSignal),s.getType(i.updateGuideProperty)])}},421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(853),s=n(855),r=n(856),i=n(857),o=n(422),l=n(580),c={encode:{update:{x:{value:100},y:{value:100},fill:{value:"#4682b4"},fillOpacity:{value:1},stroke:{value:"#000000"},strokeWidth:{value:0}}}};function d(e,t){switch(e){case"symbol":return o.Symbol(t).mergeDeepWith(p,c);case"area":return a.Area(t).mergeDeepWith(p,c);case"line":return r.Line(t).mergeDeepWith(p,{encode:{update:Object.assign(Object.assign({},c.encode.update),{fill:void 0,fillOpacity:void 0})}});case"rect":return i.Rect(t).mergeDeepWith(p,c);case"text":return l.Text(t).mergeDeepWith(p,c);case"group":return s.Group(t).mergeDeepWith(p,c)}}t.Mark=d;const p=(e,t)=>void 0!==e?null===e?void 0:e:t;d.getHandleStreams=function(e){switch(e.type){case"symbol":return o.getHandleStreams(e);case"area":return a.getHandleStreams(e);case"line":return r.getHandleStreams(e);case"text":return l.getHandleStreams(e);case"group":case"rect":return i.getHandleStreams(e)}}},422:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(369),r=n(168),i=n(370),o=n(90);t.Symbol=a.Record({_id:null,_parent:null,_vlUnit:null,type:"symbol",name:null,from:null,encode:{update:{size:{value:200},shape:{value:"circle"}}}},"LyraSymbolMark"),t.SymbolShapes=["circle","square","cross","diamond","triangle-up","triangle-down"],t.getHandleStreams=function(e){const t=s.default.bind(null,e,"handles"),n=e._id,a=r.propSg(n,"symbol","x"),l=r.propSg(n,"symbol","y"),c=r.propSg(n,"symbol","size"),d=`${o.DELTA}.x`,p=`${o.DELTA}.y`;return{[a]:[{events:{signal:o.DELTA},update:i.default(t(),`${a} + ${d}`,a)}],[l]:[{events:{signal:o.DELTA},update:i.default(t(),`${l} + ${p}`,l)}],[c]:[{events:{signal:o.DELTA},update:i.default(t("top"),`${c} - (${p} << 5)`,c)},{events:{signal:o.DELTA},update:i.default(t("bottom"),`${c} + (${p} << 5)`,c)}]}}},423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1103),s=n(47),r=n(202),i=n(372),o=n(308),l=n(373),c=n(853),d=n(855),p=n(856),u=n(857),m=n(580),g=n(859),h=n(422),f=n(581),y=n(860),v=n(90),_=n(224),b=n(268),x=n(597),S=n(598),E=n(599),w=a.withRecords([h.Symbol,c.Area,p.Line,u.Rect,m.Text,d.Group,g.Scene,i.Column,i.Dataset,o.Axis,o.Legend,f.Pipeline,v.Signal,b.EncodingState,b.FieldDraggingState,b.SignalDraggingState,b.ScaleDraggingState,b.Inspector,l.Interaction,l.IntervalSelection,l.PointSelection,l.MarkApplication,l.ScaleApplication,l.TransformApplication,S.Widget,S.WidgetSelection,x.LyraGlobals,E.VegaReparse],(e,t)=>{switch(console.log(e),e){case"LyraScale":return console.log(t),y.Scale(t);default:return null}});t.persist=function(){const e=r.store.getState();return{store:{vis:w.toJSON(e.vis.present),inspector:w.toJSON(e.inspector),lyra:w.toJSON(e.lyra)},values:_.persist()}},t.hydrate=s.createStandardAction("HYDRATE").map(e=>{const t=JSON.parse(e);return _.persist(t.values),{payload:{vis:w.fromJSON(t.store.vis),inspector:w.fromJSON(t.store.inspector),lyra:w.fromJSON(t.store.lyra)}}}),t.hydrator=function(e,n){return(a,r)=>r.type===s.getType(t.hydrate)?r.payload[n]:e(a,r)}},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return function(a){return a.key=e,a.manipulator=t,a.tooltip=n||e,a}}},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(369),r=n(168),i=n(370),o=n(90);t.Text=a.Record({_id:null,_parent:null,_vlUnit:null,type:"text",name:null,from:null,encode:{update:{dx:{value:0,offset:0},dy:{value:0,offset:0},text:{signal:"Text"},align:{value:"center"},baseline:{value:"middle"},font:{value:"Helvetica"},fontSize:{value:12},fontStyle:{value:"normal"},fontWeight:{value:"normal"},angle:{value:0}}}},"LyraTextMark"),t.getHandleStreams=function(e){const t=s.default.bind(null,e,"handles"),n=e._id,a=r.propSg(n,"text","x"),l=r.propSg(n,"text","y"),c=r.propSg(n,"text","fontSize"),d=`${o.DELTA}.x`,p=`${o.DELTA}.y`;return{[a]:[{events:{signal:o.DELTA},update:i.default(t(),`${a} + ${d}`,a)}],[l]:[{events:{signal:o.DELTA},update:i.default(t(),`${l} + ${p}`,l)}],[c]:[{events:{signal:o.DELTA},update:i.default(`${t("left")} && ${t("top")}`,`${c} - ${d}`,c)},{events:{signal:o.DELTA},update:i.default(`${t("right")} && ${t("bottom")}`,`${c} + ${d}`,c)},{events:{signal:o.DELTA},update:i.default(`${t("left")} && ${t("top")}`,`${c} - ${p}`,c)},{events:{signal:o.DELTA},update:i.default(`${t("right")} && ${t("bottom")}`,`${c} + ${p}`,c)}]}},t.TextAlignments=["left","center","right"],t.TextBaselines=["top","middle","bottom"],t.TextFonts=["Helvetica","Verdana","Georgia","Palatino","Garamond","Trebuchet MS"],t.TextFontStyles=["normal","italic"],t.TextFontWeights=["normal","bold"]},581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.Pipeline=a.Record({_id:null,name:null,_source:null,_aggregates:a.Map()},"LyraPipeline")},590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),s=n(591),r=n(202),i=n(308),o=n(224),l=n(309),c=n(222),d=n(222),p=n(168),u=n(870),m=n(157),g=n(27),h=n(1128),f=n(40),y=f.getIn,v=f.getInVis,_=n(1138),b={data:{},scales:{},_totaled:!1},x={marks:{},scales:{}},S={marks:{},guides:{}};let E=l.default(b);function w(e=!1){const t=r.store.getState(),n=!0===e;E=l.default(b);let a=w.scene(t,n);return a.data=w.pipelines(t,n),a=w.interactions(t,a),a=w.widgets(t,a)}function k(e,t,n){return{name:"pathgroup",type:"group",from:{facet:Object.assign(Object.assign({},n),{data:c.default(v(e,"datasets."+n.data+".name"))})},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:a.array(t)}}function I(e,t){const n=e.encode.update,a=s.default[t];if(!n[a.SPAN.name]._disabled)return u.signalLookup(n[a.SPAN.name].signal)}function $(e,t){let n;for(const[s,r]of Object.entries(e))(n=(n=s.startsWith("_"))||null==r||r._disabled)?delete e[s]:"name"===s&&a.isString(r)?e[s]=c.default(r):a.isObject(r)&&(r.signal&&!t?r.signal.startsWith("lyra")&&(e[s]=u.signalLookup(r.signal)):e[s]=$(e[s],t));return e}function T(e){let t,n;if(e)w();else if(E._totaled)return E;for(t in E.data)(n=E.data[t]).total=Object.keys(n.marks).length+Object.keys(n.scales).length;for(t in E.scales)(n=E.scales[t]).markTotal=Object.keys(n.marks).length,n.guideTotal=Object.keys(n.guides).length,n.total=n.markTotal+n.guideTotal;return E._totaled=!0,E}function N(e,t,n){let a,s,r,i,o,l,c={};if(1===n.length)return n=n[0],O(a=v(e,"datasets."+n.data),t,n.field);for(i=0,o=n.length;i<o;++i)a=v(e,"datasets."+n[i].data),r=n[i].field,c[s=a.get("_id")]=c[s]||(c[s]=[]),c[s].push(r);if(1===(l=Object.keys(c)).length)return O(a,t,c[s]);for(n={fields:[]},i=0,o=l.length;i<o;++i)a=v(e,"datasets."+l[i]),n.fields.push(O(a,t,c[l[i]]));return n}function O(e,t,n){const s={data:c.default(e.get("name")),field:n};if("ordinal"===t.type&&e.get("_sort")){const t=y(e,"_sort.field");return a.extend({},s,{sort:t===s.field||{field:t,op:"min"},_sortOrder:y(e,"_sort.order")})}const r=e.get("_id");return(E.data[r]||(E.data[r]=l.default(x))).scales[t._id]=!0,s}t.exporter=w,w.interactions=function(e,t){return e.getIn(["vis","present","interactions"]).forEach(n=>{const a=e.getIn(["vis","present","marks",String(n.groupId)]),s=d.default(a.name),r=m.getScaleInfoForGroup(e,a._id),i=m.getFieldsOfGroup(e,a._id),o=a._interactions.map(t=>{const n=e.getIn(["vis","present","interactions",String(t)]);return n.input?n.input.mouse:null}).filter(e=>e),l=new Set(o).size!==o.length;if(t=m.addDatasetsToScene(t,s,n.id),t=m.addInputsToScene(t,s,n.id,n.input,r,i,l),n.selection&&(t=m.addSelectionToScene(t,s,n.id,n.input,n.selection)),n.applications.length)for(const e of n.applications)if(t=m.addApplicationToScene(t,s,n.id,n.input,e),n.input&&n.input.mouse&&"mouseover"===n.input.mouse&&n.input.nearest){const a=e.targetMarkName;if(a){const r=n.selection&&"point"===n.selection.type?n.selection.encoding:null;t=m.addVoronoiMark(t,s,r,a,n.id,e.id)}}t=m.pushSignalsInScene(t,s,n.signals)}),t},w.widgets=function(e,t){return e.getIn(["vis","present","widgets"]).forEach(n=>{const a=e.getIn(["vis","present","marks",String(n.groupId)]),s=d.default(a.name);if(n.selection&&(t=m.addWidgetSelectionToScene(t,n,n.selection)),n.applications.length)for(const e of n.applications)t=m.addWidgetApplicationToScene(t,s,n,e)}),t},w.pipelines=function(e,t){return v(e,"pipelines").valueSeq().reduce(function(n,a){n.push(w.dataset(e,t,a._source));const s=a._aggregates.toJS();for(const a in s)n.push(w.dataset(e,t,s[a]));return n},[])},w.dataset=function(e,t,n){const a=v(e,"datasets."+n).toJS(),s=$(l.default(a),t),r=o.input(n),i=s.format&&s.format.type,d=w.sort(a);return E.data[n]=E.data[n]||l.default(x),s.source?s.source=c.default(v(e,"datasets."+s.source+".name")):t?(s.values=r,delete s.url,delete s.format):s.url||(s.values=i&&"json"!==i?h({data:r,del:"tsv"===i?"\t":","}):r),void 0!==d&&(s.transform=s.transform||[],s.transform.push(d)),s.transform.forEach(t=>{"lookup"===t.type&&(t.from=e.getIn(["vis","present","datasets",t.from,"name"]))}),s},w.sort=function(e){const t=e._sort;if(t)return{type:"sort",by:(t.order===_.DESC?"-":"")+t.field}},w.scene=function(e,t){const n=e.getIn(["vis","present","scene","_id"]);let a=w.group(e,t,n);return t&&(a=a[0]),delete a.from,delete a.encode,a},w.mark=function(e,t,n){const s=v(e,"marks."+n).toJS(),r=$(l.default(s),t),i=s.encode.update,o=r.encode.update,d=s._facet;if(d)r.from={data:d.name};else if(r.from){let t;if(t=r.from.data){r.from.data=c.default(v(e,"datasets."+t+".name")),(E.data[t]||(E.data[t]=l.default(x))).marks[n]=!0}else(t=r.from.mark)&&(r.from.mark=c.default(v(e,"marks."+t+".name")))}if(Object.keys(o).forEach(function(t){let s=o[t];const r=i[t],d=r.scale;if(a.isObject(s)||(s=o[t]={value:s}),d){s.scale=c.default(v(e,"scales."+d+".name")),(E.scales[d]||(E.scales[d]=l.default(S))).marks[n]=!0}r.group&&(s.field={group:r.group},delete s.group)}),"text"===r.type){let e=r.encode.update.text.signal;e&&!e.startsWith("brush")&&(e=e.split(RegExp("{{(.*?)}}")).map(e=>e.indexOf("datum")>=0?`+ ${e} + `:e.startsWith("#")?`+ ${e.substring(1)} + `:`"${e}"`).join(""),r.encode.update.text.signal=e)}if(t){r.role=`lyra_${s._id}`;const t=g.default(s,r);return d?k(e,t,d):t}return d?k(e,r,d):r},w.group=function(e,t,n){const s=v(e,`marks.${n}`),r=w.mark(e,t,n),i=t?r[0]:r;return["scale","mark","axe","legend"].forEach(function(n){const r=n+"s",o="axes"===r||"legends"===r?"guides":r;i[r]=s[r].map(a=>{const s=v(e,`${o}.${a}`);return s?w[s.type]?w[s.type](e,t,a):w[n]?w[n](e,t,a):$(l.default(s.toJS()),t):null}).reduce((e,t)=>(a.isArray(t)?e.push.apply(e,t):t&&e.push(t),e),[])}),"Scene"!==s.name&&(i.signals=i.signals||[],i.signals.push({name:"width",value:I(s,"x")},{name:"height",value:I(s,"y")})),r},w.area=function(e,t,n){const s=w.mark(e,t,n),r=a.array("pathgroup"===s.name?s.marks:s)[0],i=r.encode.update;return r.from||(r.from={data:"dummy_data"},i.x={signal:`datum.x + ${p.propSg(n,"area","x")}`},i.y={signal:`datum.y + ${p.propSg(n,"area","y")}`}),"horizontal"===i.orient.value?delete i.y2:delete i.x2,s},w.line=function(e,t,n){const s=w.mark(e,t,n),r=a.array("pathgroup"===s.name?s.marks:s)[0],i=r.encode.update;return r.from||(r.from={data:"dummy_data"},i.x={signal:`datum.x + ${p.propSg(n,"line","x")}`},i.y={signal:`datum.y + ${p.propSg(n,"line","y")}`}),s},w.scale=function(e,t,n){const s=v(e,"scales."+n).toJS(),r=$(l.default(s),t);E.scales[n]=E.scales[n]||l.default(S),!s.domain&&s._domain&&s._domain.length&&(r.domain=N(e,s,s._domain)),!s.range&&s._range&&s._range.length&&(r.range=N(e,s,s._range));const i=a.isObject(r.domain)&&r.domain._sortOrder;return i&&(r.reverse=i===_.DESC?!r.reverse:!!r.reserve),r},w.axe=w.legend=function(e,t,n){const s=v(e,"guides."+n).toJS(),r=$(l.default(s),t),o=s._gtype,d=s._type;return o===i.GuideType.Axis?(E.scales[r.scale].guides[n]=!0,r.scale=c.default(v(e,"scales."+r.scale+".name"))):o===i.GuideType.Legend&&(E.scales[r[d]].guides[n]=!0,r[d]=c.default(v(e,"scales."+r[d]+".name"))),Object.keys(r.encode).forEach(function(e){const t=r.encode[e];Object.keys(t).forEach(function(e){a.isObject(t[e])||(t[e]={value:t[e]})})}),r},t.getCounts=T,e.exports.exportName=c.default,e.exports.counts=T},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={x:{START:{name:"x",label:"Left"},CENTER:{name:"xc",label:"Center"},SPAN:{name:"width",label:"Width"},END:{name:"x2",label:"Right"}},y:{START:{name:"y",label:"Top"},CENTER:{name:"yc",label:"Middle"},SPAN:{name:"height",label:"Height"},END:{name:"y2",label:"Bottom"}}}},595:function(e,t,n){"use strict";e.exports=["count","mean","sum","min","max","variance","variancep","stdev","stdevp","median","q1","q3","modeskew"]},596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47);t.hintsOn=a.createStandardAction("HINTS_ON")(),t.clearHints=a.createStandardAction("CLEAR_HINTS")()},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.LyraGlobals=a.Record({idCounter:1},"LyraGlobals")},598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.WidgetSelection=a.Record({type:null,id:null,label:null,step:null,comparator:null},"LyraWidgetSelection"),t.Widget=a.Record({id:null,name:null,groupId:null,field:null,dsId:null,selection:null,applications:[],signals:[]},"LyraWidget")},599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.VegaReparse=a.Record({invalid:!1,isParsing:!1},"LyraVegaReparse")},603:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),s=n(592),r=n(424),i={json:"application/json",html:"text/html"};function o(e,t){const n=s.select(document.createElement("a")).attr("href",e).attr("target","_blank").attr("download","lyra."+t).node(),a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(a)}function l(t,n){for(const a of t){const t=new FileReader;t.onloadend=(t=>a=>{const s=a.target.result;n("string"==typeof s?s:e.from(s).toString("utf-8"),t)})(a),t.readAsText(a)}}t.toBlob=function(e,t){const n=new Blob([e],{type:i[t]});return o(window.URL.createObjectURL(n),t)},t.download=o,t.get=function(e,t){r.load({url:e},(e,n)=>t(n,e))},t.fopen=function(e,t){s.select(document.createElement("input")).attr("type","file").attr("accept",a.array(e).map(e=>`.${e}`).join(",")).on("change",()=>l(s.event.target.files,t)).node().click()},t.read=l}).call(this,n(415).Buffer)},662:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(23),s=n(87),r=n(48),i=n.n(r),o=n(27);const l=2*o.PADDING;function c(e){s.a.call(this,[],e)}c.Definition=Object(a.extend)({},s.a.Definition);const d=Object(a.inherits)(c,s.a);d.handles=function(e){const t=Object(o.coords)(e.bounds,"handle");return Object.values(t).filter(e=>"midCenter"!==e.key)},d.connectors=function(e){return Object.values(Object(o.coords)(e.bounds,"connector"))},d.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,a=Object(o.coords)(t),s=a.topLeft,r=a.topRight,l=a.bottomRight,c=t.width(),d=t.height(),p=Math.max(Math.min(r.x+c,n.x2-o.PADDING),r.x+50),u=Math.max(Math.min(l.y+d,n.y2-o.PADDING),l.y+50);return[].concat([{x:s.x,y:s.y-o.PADDING},{x:r.x,y:r.y-o.PADDING},{x:p,y:r.y-o.PADDING},{x:p-o.ARROWHEAD,y:r.y-2*o.PADDING},{x:p-o.ARROWHEAD,y:r.y},{x:p,y:r.y-o.PADDING+.1}].map(i()("x+","arrow","x position"))).concat([{x:r.x+o.PADDING,y:r.y},{x:l.x+o.PADDING,y:l.y},{x:l.x+o.PADDING,y:u},{x:l.x+2*o.PADDING,y:u-o.ARROWHEAD},{x:l.x,y:u-o.ARROWHEAD},{x:l.x+o.PADDING,y:u+.1}].map(i()("y+","arrow","y position"))).concat([{x:e.x,y:e.y,x2:e.x2,y2:e.y2,width:e.width,height:e.height,shape:e.shape}].map(i()("fill","border")))},d.altchannels=function(e){var t=e.bounds,n=e.mark.group.bounds,a=Object(o.coords)(t),s=a.topLeft,r=a.topCenter,c=a.topRight,d=a.midLeft,p=a.midRight,u=a.bottomLeft,m=a.bottomCenter,g=a.bottomRight;return[].concat([{x:n.x1,y:s.y},{x:s.x-l,y:s.y}].map(i()("x","span","left (x)"))).concat([{x:n.x1,y:g.y+o.PADDING},{x:u.x,y:g.y+o.PADDING},{x:g.x,y:g.y+o.PADDING}].map(i()("x2","span","right (x2)"))).concat([{x:s.x,y:n.y1},{x:s.x,y:s.y-l}].map(i()("y","span","top (y)"))).concat([{x:g.x+o.PADDING,y:n.y1},{x:g.x+o.PADDING,y:c.y},{x:g.x+o.PADDING,y:g.y}].map(i()("y2","span","bottom (y2)"))).concat([{x:d.x,y:c.y-o.PADDING},{x:p.x,y:c.y-o.PADDING}].map(i()("width","span"))).concat([{x:u.x-o.PADDING,y:r.y},{x:u.x-o.PADDING,y:m.y}].map(i()("height","span"))).concat([{x:e.x,y:e.y,x2:e.x2,y2:e.y2,width:e.width,height:e.height,shape:e.shape}].map(i()("stroke","border")))}},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(420),r=n(421),i=n(167),o=n(371),l=n(40).getInVis;t.addMark=function(e){return function(n,a){const s=e._id||i.assignId(n,a());if(!(e=e.set("_id",s)).name){const t=function(e,t){t=t||"Mark";const n=e.getIn(["vis","present","marks"]).filter(e=>e.type===t).size;return o(t)+" "+(n+1)}(a(),e.type);e=e.set("name",t)}n(t.baseAddMark({name:e.name,streams:r.Mark.getHandleStreams(e),props:e},s))}},t.baseAddMark=a.createStandardAction("ADD_MARK")(),t.updateMarkProperty=a.createStandardAction("UPDATE_MARK_PROPERTY")(),t.setParent=a.createStandardAction("SET_PARENT_MARK")(),t.setMarkVisual=a.createStandardAction("SET_MARK_VISUAL")(),t.disableMarkVisual=a.createStandardAction("DISABLE_MARK_VISUAL")(),t.resetMarkVisual=a.createStandardAction("RESET_MARK_VISUAL")(),t.bindScale=a.createStandardAction("BIND_SCALE")(),t.bindField=a.createStandardAction("BIND_FIELD")(),t.setMarkExtent=a.createStandardAction("SET_MARK_EXTENT")(),t.setVlUnit=a.createStandardAction("SET_VL_UNIT")(),t.deleteMark=function e(n){return function(a,r){const i=l(r(),"marks."+n),o=i.get("marks");s.batchGroupBy.start(),o&&o.size&&o.forEach(function(t){a(e(t))}),a(t.baseDeleteMark(i.type,i._id)),s.batchGroupBy.end()}},t.baseDeleteMark=a.createStandardAction("DELETE_MARK")()},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),s=n(90),r=n(590),i=n(27),o=n(423),l=n(267),c=n(424),d=(n(27),n(221)),p=n(1139),u=e.exports={view:null},m=n(310);let g=null;u.export=r.exporter,u.persist=o.persist,u.hydrate=o.hydrate,u.manipulators=function(){const e=u.export(!0),t=e.data||(e.data=[]),n=e.signals||(e.signals=[]),a=e.marks||(e.marks=[]),r=c.comparator("_idx");return n.push.apply(n,Object.values(l.api()).sort(r)),t.push({name:"bubble_cursor",transform:[{type:d("bubble_cursor"),lyra_cell:{signal:s.CELL},lyra_mouse:{signal:s.MOUSE}}]}),a.push(i.BUBBLE_CURSOR),a.push.apply(a,i.BUBBLE_CURSOR_TIP),t.push({name:"dummy_data",values:[{x:0,y:0},{x:100,y:100}]}),e},u.parse=function(e){return e=e||"#vis",g&&g.cancel(),(g=new p(function(e,t){const n=this;setTimeout(function(){if(!n.cancelled)try{e(a.parse(u.manipulators()))}catch(e){console.error(e)}},10)})).then(function(t){u.view=new a.View(t,{renderer:"svg"}).initialize(e).logLevel(a.Warn).hover(),m.register(),u.update(),g=null})},u.update=function(){u.view&&u.view.runAsync&&"function"==typeof u.view.runAsync&&u.view.runAsync()}},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15);t.Icon=class extends a.Component{render(){const e=this.props,t=(e.className?e.className+" ":"")+"icon";return a.createElement("svg",{className:t,onClick:e.onClick,width:e.width||13,height:e.height||13,"data-html":e["data-html"],"data-tip":e["data-tip"],"data-place":e["data-place"]},a.createElement("use",{xlinkHref:"#"+e.glyph.id}))}}},82:function(e,t,n){"use strict";e.exports={"group-expanded":n(1185),"group-contracted":n(1186),rect:n(1187),line:n(1188),area:n(1189),text:n(1190),symbol:n(1191),trash:n(1192),plus:n(1193),undo:n(1194),redo:n(1195),nominal:n(1196),ordinal:n(1197),quantitative:n(1198),temporal:n(1199),prev:n(1200),next:n(1201),close:n(1202),hamburger:n(1203),erase:n(1204),export:n(1205),scaffold:n(1206),select:n(1207),sort:n(1208),sortAlphaAsc:n(1209),sortAlphaDesc:n(1210),sortNumericAsc:n(1211),sortNumericDesc:n(1212),filter:n(1213),lookup:n(1214),formula:n(1215),aggregate:n(1216),download:n(1217),bold:n(1218),italic:n(1219),open:n(1220),save:n(1221),"align-left":n(1222),"align-center":n(1223),"align-right":n(1224),"vertical-align-bottom":n(1225),"vertical-align-center":n(1226),"vertical-align-top":n(1227)}},852:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47);t.incrementCounter=a.createStandardAction("INCREMENT_COUNTER")()},853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(369),r=n(168),i=n(370),o=n(90);t.Area=a.Record({_id:null,_parent:null,_vlUnit:null,type:"area",name:null,from:null,encode:{update:{y2:{value:250},tension:{value:13},interpolate:{value:"monotone"},orient:{value:"vertical"}}}},"LyraAreaMark"),t.getHandleStreams=function(e){const t=s.default.bind(null,e,"handles"),n=e._id,a=r.propSg(n,"area","x"),l=r.propSg(n,"area","xc"),c=r.propSg(n,"area","x2"),d=r.propSg(n,"area","y"),p=r.propSg(n,"area","yc"),u=r.propSg(n,"area","y2"),m=r.propSg(n,"area","width"),g=r.propSg(n,"area","height"),h=`${o.DELTA}.x`,f=`${o.DELTA}.y`;return{[a]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("left")}`,`${a} + ${h}`,a)}],[l]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("left")}`,`${l} + ${h}`,l)}],[c]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("right")}`,`${c} + ${h}`,c)}],[d]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("top")}`,`${d} + ${f}`,d)}],[p]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("top")}`,`${p} + ${f}`,p)}],[u]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("bottom")}`,`${u} + ${f}`,u)}],[m]:[{events:{signal:o.DELTA},update:i.default(t("left"),`${m} - ${h}`,m)},{events:{signal:o.DELTA},update:i.default(t("right"),`${m} + ${h}`,m)}],[g]:[{events:{signal:o.DELTA},update:i.default(t("top"),`${g} - ${f}`,g)},{events:{signal:o.DELTA},update:i.default(t("bottom"),`${g} + ${f}`,g)}]}}},855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);n(40).getInVis;t.Group=a.Record({_id:null,_parent:null,_vlUnit:null,_manualLayout:!1,_interactions:[],_widgets:[],type:"group",name:null,from:null,scales:[],axes:[],legends:[],marks:[],encode:{update:{fill:{value:"transparent"},stroke:null,x:{value:0},y:{value:0},x2:{value:140,_disabled:!0},y2:{value:140,_disabled:!0},xc:{value:70,_disabled:!0},yc:{value:70,_disabled:!0},width:{value:640},height:{value:360}}}},"LyraGroupMark")},856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(369),r=n(168),i=n(370),o=n(90);t.Line=a.Record({_id:null,_parent:null,_vlUnit:null,_facet:null,type:"line",name:null,from:null,encode:{update:{strokeWidth:{value:3},tension:{value:13},interpolate:{value:"monotone"}}}},"LyraLineMark"),t.getHandleStreams=function(e){const t=s.default.bind(null,e,"handles"),n=e._id,a=r.propSg(n,"line","x"),l=r.propSg(n,"line","y"),c=`${o.DELTA}.x`,d=`${o.DELTA}.y`;return{[a]:[{events:{signal:o.DELTA},update:i.default(t(),`${a} + ${c}`,a)}],[l]:[{events:{signal:o.DELTA},update:i.default(t(),`${l} + ${d}`,l)}]}}},857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(369),r=n(168),i=n(370),o=n(90);t.Rect=a.Record({_id:null,_parent:null,_vlUnit:null,type:"rect",name:null,from:null,encode:{update:{x2:{value:140},y2:{value:140},xc:{value:70,_disabled:!0},yc:{value:70,_disabled:!0},width:{value:40,_disabled:!0},height:{value:40,_disabled:!0}}}},"LyraRectMark"),t.getHandleStreams=function(e){const t=s.default.bind(null,e,"handles"),n=e._id,a=e.type,l=r.propSg(n,a,"x"),c=r.propSg(n,a,"xc"),d=r.propSg(n,a,"x2"),p=r.propSg(n,a,"y"),u=r.propSg(n,a,"yc"),m=r.propSg(n,a,"y2"),g=r.propSg(n,a,"width"),h=r.propSg(n,a,"height"),f=`${o.DELTA}.x`,y=`${o.DELTA}.y`;return{[l]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("left")}`,`${l} + ${f}`,l)}],[c]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("left")}`,`${c} + ${f}`,c)}],[d]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("right")}`,`${d} + ${f}`,d)}],[p]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("top")}`,`${p} + ${y}`,p)}],[u]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("top")}`,`${u} + ${y}`,u)}],[m]:[{events:{signal:o.DELTA},update:i.default(`${t()} || ${t("bottom")}`,`${m} + ${y}`,m)}],[g]:[{events:{signal:o.DELTA},update:i.default(t("left"),g+"-"+f,g)},{events:{signal:o.DELTA},update:i.default(t("right"),g+"+"+f,g)}],[h]:[{events:{signal:o.DELTA},update:i.default(t("top"),h+"-"+y,h)},{events:{signal:o.DELTA},update:i.default(t("bottom"),h+"+"+y,h)}]}}},859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.Scene=a.Record({_id:null,type:"scene",name:"Scene",background:"white",autosize:"pad",padding:5,encode:{update:{}},scales:[],axes:[],legends:[],marks:[]},"LyraScene")},860:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.Scale=function(e){return a.Record(Object.assign({_id:null,_origName:null,_domain:[],_range:[],name:null},e),"LyraScale")()}},87:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(23);function s(e){a.Transform.call(this,[],e)}s.Definition={metadata:{source:!0,changes:!0},params:[{name:"lyra_id",type:"number",required:!0},{name:"lyra_selected",required:!0},{name:"lyra_mode",required:!0},{name:"signals",array:!0}]};const r=Object(a.inherits)(s,a.Transform);r.transform=function(e,t){const n=this.value||[],s=t.fork(t.NO_FIELDS&t.NO_SOURCE),r=e.lyra_id,i=e.lyra_selected,o=e.lyra_mode,l=i.mark.role,c=Object(a.tupleid)(i);if(!n.length||n._id===c&&n._mode===o||(s.rem=n.splice(0)),!l||l&&r!==+l.split("lyra_")[1])return s.source=this.value=n,s;const d=this[o](i).map(function(e){return e.mode=o,e.lyra_id=r,e});return n.length&&n._id===c?(d.forEach((e,t)=>Object(a.extend)(n[t],e)),s.mod=n):(n._id=c,n._mode=o,n.push.apply(n,d.map(a.ingest)),s.add=n),s.source=this.value=n,s},r.handles=function(e){return[]},r.connectors=function(e){return[]},r.channels=function(e){return[]},r.altchannels=function(e){return[]}},870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(202),s=n(40).getInVis,r=n(221);t.signalLookup=function(e){return s(a.store.getState(),`signals.${r(e)}.value`)}},874:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47);t.setActiveStep=a.createStandardAction("SET_ACTIVE_STEP")(),t.setActiveWalkthrough=a.createStandardAction("SET_ACTIVE_WALKTHROUGH")()},877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44);t.Hints=a.Record({display:null,on:!1},"LyraHints")},878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordName=function(e,t,n){return n+" "+(e.getIn(["vis","present",t]).size+1)}},879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(1171);t.Walkthrough=a.Record({data:s.data,activeStep:1,activeWalkthrough:null},"LyraWalkthrough")},880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.MARKS="marks",e.GUIDES="guides",e.SCALES="scales",e.DATASETS="datasets",e.INTERACTIONS="interactions",e.WIDGETS="widgets"}(t.PrimType||(t.PrimType={}))},881:function(e,t,n){"use strict";e.exports=["linear","step-before","step-after","basis","basis-open","cardinal","cardinal-open","monotone"]},882:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(15);t.MoreProperties=class extends a.Component{constructor(e){super(e),this.state={display:"none"}}toggle(e){return"block"===e?"none":"block"}handleClick(e){this.setState({display:this.toggle(this.state.display)})}render(){const e=this.props,t=this.state.display,n={display:t},s={display:this.toggle(t)};let r,i;return e.header?r=a.createElement("div",null,a.createElement("h3",{className:"show-more-props more-props-label",onClick:this.handleClick,style:s},"+ ",e.label),a.createElement("h3",{className:"hide-more-props more-props-label",onClick:this.handleClick,style:n}," ",e.label)):(r=a.createElement("a",{className:"show-more-props more-props-label",href:"#",onClick:this.handleClick,style:s},"+ More ",e.label," Properties"),i=a.createElement("a",{className:"hide-more-props more-props-label",href:"#",style:n,onClick:this.handleClick}," Fewer ",e.label," Properties")),a.createElement("div",null,r,a.createElement("div",{className:"more-props",style:n},e.children),i)}}},883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1270),s=n(1277),r=n(15),i=n(35),o=n(81),l=n(424),c=(n(40).getInVis,n(224)),d=n(82),p=n(72);t.default=i.connect(function(e,t){const n=t.id,a=e.getIn(["vis","present","datasets",String(n)]);let s=[];if(a&&a.transform){const t=e.getIn(["vis","present","interactions"]).valueSeq().toArray(),n=[].concat.apply([],t.filter(e=>e.signals.length).map(e=>e.signals.map(e=>e.signal))),r=e.getIn(["vis","present","widgets"]).valueSeq().toArray(),i=[].concat.apply([],r.filter(e=>e.signals.length).map(e=>e.signals.map(e=>e.signal))),o=n.concat(i);a.transform.map(e=>{if("filter"===e.type){const t=e.expr,n=o.filter(e=>t.indexOf(e)>-1);s=s.concat(n)}})}return{dataset:a,vega:e.get("vega"),signalsInExprs:s}})(class extends r.Component{constructor(e){super(e),this.$table=r.createRef(),this.prevPage=(()=>{this.setState({page:this.state.page-1},()=>{this.props.onPage&&this.props.onPage(this.state.page)}),this.$table.current.scrollLeft=0}),this.nextPage=(()=>{this.setState({page:this.state.page+1},()=>{this.props.onPage&&this.props.onPage(this.state.page)}),this.$table.current.scrollLeft=0}),this.showHoverField=(e=>{const t=e.target;this.setState({hoverField:{name:t.textContent,offsetTop:t.offsetTop},hoverValue:null})}),this.showHoverValue=(e=>{this.setState({hoverField:null,hoverValue:(e.persist(),e)})}),this.hideHover=(()=>{this.setState({hoverField:null,hoverValue:null})}),this.onScroll=(()=>{this.hideHover();const e=this.$table.current&&this.$table.current.scrollLeft;this.props.onScroll&&this.props.onScroll(e)}),this.state={page:0,hoverField:null,hoverValue:null,output:e.id?c.output(e.id):e.values}}shouldComponentUpdate(e,t){const n=e.vega;return!n.get("invalid")&&!n.get("isParsing")}componentDidUpdate(e,t){this.props.scroll!==e.scroll&&this.$table&&(this.$table.current.scrollLeft=this.props.scroll),this.props.signalsInExprs!==e.signalsInExprs&&(this.onFilterExprSignal(),e.signalsInExprs.forEach(e=>{p.view.removeSignalListener(e,()=>this.onFilterExprSignal())}),this.props.signalsInExprs.forEach(e=>{p.view.addSignalListener(e,()=>this.onFilterExprSignal())}))}onFilterExprSignal(){this.setState({output:this.props.id?c.output(this.props.id):this.props.values})}render(){const e=this.state,t=this.props,n=void 0!==t.page?t.page:e.page,i=t.limit,c=n*i,p=c+i,u=t.id,m=u?t.dataset.get("_schema"):t.schema,g=e.output,h=g.slice(c,p),f=m.keySeq().toArray().filter((e,t)=>void 0===this.props.fieldsIndex||void 0===this.props.fieldsCount||t>=this.props.fieldsIndex*this.props.fieldsCount&&t<this.props.fieldsIndex*this.props.fieldsCount+this.props.fieldsCount),y=g.length,v=l.format.auto.number(),_=this.$table.current&&this.$table.current.scrollLeft,b=n>0?r.createElement(o.Icon,{glyph:d.prev,width:"10",height:"10",onClick:this.prevPage}):null,x=n+1<y/i?r.createElement(o.Icon,{glyph:d.next,width:"10",height:"10",onClick:this.nextPage}):null;return r.createElement("div",{className:"datatable-container"},g.length?r.createElement("div",{className:"datatable",ref:this.$table,onMouseLeave:this.hideHover,onScroll:this.onScroll},r.createElement("table",null,r.createElement("tbody",null,f.map(function(e){return r.createElement("tr",{key:e},r.createElement("td",{className:"field "+(m.get(e).source?"source":"derived"),onMouseOver:this.showHoverField},e),h.map(function(t,n){return r.createElement("td",{key:e+n,className:n%2?"even":"odd",onMouseOver:this.showHoverValue},t[e])},this))},this))),u?r.createElement(a.default,{dsId:u,schema:m,def:e.hoverField}):null,r.createElement(s.default,{event:e.hoverValue,scrollLeft:_})):null,r.createElement("div",{className:"paging"},t.first?r.createElement("span",null,v(c+1),"",v(p>y?y:p)," of ",v(y)):null,t.last?r.createElement("span",{className:"pager"},b," ",x):null))}})},884:function(e,t,n){"use strict";var a=e.exports=["quantitative","nominal","temporal"];a.NOMINAL="nominal",a.ORDINAL="ordinal",a.QUANTITATIVE="quantitative",a.TEMPORAL="temporal"},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(44),s=n(23),r=n(221);t.SELECTED=r("selected"),t.MODE=r("mode"),t.ANCHOR=r("anchor"),t.DELTA=r("delta"),t.CURSOR="cursor",t.CELL=r("cell"),t.MOUSE=r("mouse"),t.signalNames=[t.SELECTED,t.MODE,t.ANCHOR,t.DELTA,t.CURSOR,t.CELL,t.MOUSE],t.Signal=a.Record({_idx:null,value:null,name:null,on:[]},"LyraSignal"),t.defaultSignalState=a.Map({[t.SELECTED]:t.Signal({name:t.SELECTED,value:{mark:{}},on:[{events:"mousedown[item().mark && item().mark.name &&item().mark.name !== "+s.stringValue(t.CELL)+"]",update:"item()"},{events:"mousedown[!item().mark]",update:"{mark: {}}"}],_idx:0}),[t.MODE]:t.Signal({name:t.MODE,value:"handles",_idx:1}),[t.DELTA]:t.Signal({name:t.DELTA,value:0,on:[{events:"[mousedown, window:mouseup] > window:mousemove",update:"{x: x() - lyra_anchor.x, y: y() - lyra_anchor.y}"}],_idx:2}),[t.ANCHOR]:t.Signal({name:t.ANCHOR,value:0,on:[{events:"mousedown",update:"{x: x(), y: y(), target: item()}"},{events:"[mousedown, window:mouseup] > window:mousemove",update:"{x: x(), y: y(), target: lyra_anchor.target}"}],_idx:3}),[t.CELL]:t.Signal({name:t.CELL,value:{},on:[{events:{type:"dragover",filter:[`event.item && event.item.mark.role === "${t.CELL}"`]},update:"item()"},{events:{type:"dragleave",filter:[`event.item && event.item.mark.role === "${t.CELL}"`]},update:"{}"}],_idx:4}),[t.MOUSE]:t.Signal({name:t.MOUSE,value:{},on:[{events:"mousemove, dragover",update:"{x: x(), y: y()}"}],_idx:5})})},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(47),s=n(311);var r;!function(e){e.SELECT_GUIDE="SELECT_GUIDE",e.SELECT_MARK="SELECT_MARK",e.SELECT_PIPELINE="SELECT_PIPELINE",e.SELECT_SCALE="SELECT_SCALE",e.SELECT_INTERACTION="SELECT_INTERACTION",e.SELECT_WIDGET="SELECT_WIDGET"}(r=t.InspectorSelectedType||(t.InspectorSelectedType={})),t.toggleLayers=a.createStandardAction("TOGGLE_LAYERS")(),t.expandLayers=a.createStandardAction("EXPAND_LAYERS")(),t.removeLayers=a.createStandardAction("REMOVE_LAYERS")(),t.selectGuide=a.createStandardAction(r.SELECT_GUIDE)(),t.baseSelectMark=a.createStandardAction(r.SELECT_MARK)(),t.selectMark=function(e){return function(n,a){const r=s.getParentGroupIds(e,a());n(t.baseSelectMark(e,r))}},t.selectPipeline=a.createStandardAction(r.SELECT_PIPELINE)(),t.selectScale=a.createStandardAction(r.SELECT_SCALE)(),t.selectInteraction=a.createStandardAction(r.SELECT_INTERACTION)(),t.selectWidget=a.createStandardAction(r.SELECT_WIDGET)(),t.startDragging=a.createStandardAction("START_DRAGGING")(),t.stopDragging=a.createStandardAction("STOP_DRAGGING")()}}]);
//# sourceMappingURL=default.js.map